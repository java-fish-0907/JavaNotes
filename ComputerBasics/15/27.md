## ã€ŒåŠ›æ‰£ã€ç¬¬ 221 é¢˜ï¼šæœ€å¤§æ­£æ–¹å½¢ï¼ˆä¸­ç­‰ï¼‰

- [é“¾æ¥](https://leetcode-cn.com/problems/maximal-square)

> åœ¨ä¸€ä¸ªç”± 0 å’Œ 1 ç»„æˆçš„äºŒç»´çŸ©é˜µå†…ï¼Œæ‰¾åˆ°åªåŒ…å« 1 çš„æœ€å¤§æ­£æ–¹å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚
>
> ç¤ºä¾‹ï¼š
>
> ```
> è¾“å…¥: 
> 
> 1 0 1 0 0
> 1 0 1 1 1
> 1 1 1 1 1
> 1 0 0 1 0
> 
> è¾“å‡º: 4
> ```

### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’

- çŠ¶æ€å®šä¹‰ï¼š`dp[i][j]` ä»¥ `matrix[i][j]` ä¸ºå³ä¸‹è§’çš„æ­£æ–¹å½¢çš„æœ€å¤§è¾¹é•¿ï¼›
- ã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€è§ä»£ç ã€‚

Java ä»£ç  1ï¼šï¼ˆä¸æ¨èçš„å†™æ³•ï¼Œç›´æ¥çœ‹ Java ä»£ç  2ï¼‰

java

```java
public class Solution {

    // ä¸ä½¿ç”¨å“¨å…µçš„å†™æ³•

    public int maximalSquare(char[][] matrix) {
        int rows = matrix.length;
        if (rows == 0) {
            return 0;
        }

        int cols = matrix[0].length;
        if (cols == 0) {
            return 0;
        }

        int maxSide = 0;
        int[][] dp = new int[rows][cols];
        // å…ˆå¡«ç¬¬ 1 è¡Œ
        for (int j = 0; j < cols; j++) {
            if (matrix[0][j] == '1') {
                dp[0][j] = 1;
                maxSide = 1;
            }
        }

        // å†å¡«ç¬¬ 1 åˆ—
        for (int i = 1; i < rows; i++) {
            if (matrix[i][0] == '1') {
                dp[i][0] = 1;
                maxSide = 1;
            }
        }

        for (int i = 1; i < rows; i++) {
            for (int j = 1; j < cols; j++) {
                if (matrix[i][j] == '1') {
                    dp[i][j] = Math.min(dp[i - 1][j - 1], Math.min(dp[i - 1][j], dp[i][j - 1])) + 1;
                    maxSide = Math.max(maxSide, dp[i][j]);
                }
            }
        }
        return maxSide * maxSide;
    }
}
```

**å¤æ‚åº¦åˆ†æ**ï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘€ğ‘)O(MN)ï¼Œå…¶ä¸­ ğ‘€M å’Œ ğ‘N æ˜¯çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘€ğ‘)O(MN)ã€‚

æ³¨æ„ï¼šå¤šè®¾ç½®ä¸€è¡Œï¼Œå¤šè®¾ç½®ä¸€åˆ—ï¼Œè¿™æ ·ä¸ç”¨è®¨è®ºç‰¹æ®Šæƒ…å†µã€‚

Java ä»£ç  2ï¼šå¤šè®¾ç½®ä¸€è¡Œã€ä¸€åˆ—ï¼Œå‡å°‘è®¨è®º

java

```java
public class Solution {

    public int maximalSquare(char[][] matrix) {
        int rows = matrix.length;
        if (rows == 0) {
            return 0;
        }

        int cols = matrix[0].length;
        if (cols == 0) {
            return 0;
        }


        int[][] dp = new int[rows + 1][cols + 1];

        int res = 0;
        for (int i = 0; i < rows; i++) {
            for (int j = 0; j < cols; j++) {

                // æ³¨æ„ï¼šæ˜¯å­—ç¬¦ 1
                if (matrix[i][j] == '1') {
                    dp[i + 1][j + 1] = Math.min(dp[i][j], Math.min(dp[i + 1][j], dp[i][j + 1])) + 1;
                    res = Math.max(res, dp[i + 1][j + 1]);
                }

            }
        }
        return res * res;
    }
}
```

Java ä»£ç  3ï¼š

- é‡å¤ä½¿ç”¨äº†ä¹‹å‰ä½¿ç”¨è¿‡çš„è¡Œå’Œåˆ—ï¼›
- çŠ¶æ€å¤šä¸€ä¸ªå•ä½çš„åç§»ï¼Œè¿™æ ·ä¸ç”¨è®¨è®ºç‰¹æ®Šæƒ…å†µã€‚



java

```java
public class Solution {

    public int maximalSquare(char[][] matrix) {
        int rows = matrix.length;
        if (rows == 0) {
            return 0;
        }

        int cols = matrix[0].length;
        if (cols == 0) {
            return 0;
        }

        int[] dp = new int[cols + 1];
        int res = 0;
        int leftUp = 0;

        for (int i = 0; i < rows; i++) {
            for (int j = 0; j < cols; j++) {
                // æŠŠä¸‹ä¸€ä¸ªéœ€è¦çš„çŠ¶æ€å€¼ä¿å­˜èµ·æ¥
                int nextLeftUp = dp[j + 1];
                // æ³¨æ„ï¼šæ˜¯å­—ç¬¦ 1
                if (matrix[i][j] == '1') {
                    dp[j + 1] = Math.min(leftUp, Math.min(dp[j], dp[j + 1])) + 1;
                    res = Math.max(res, dp[j + 1]);
                } else {
                    // æ³¨æ„ï¼šè¿™é‡Œè¦é‡ç½®ä¸€ä¸‹
                    dp[j + 1] = 0;
                }
                leftUp = nextLeftUp;
            }
        }
        return res * res;
    }
}
```

ï¼ˆæœ¬èŠ‚å®Œï¼‰