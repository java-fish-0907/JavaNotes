## ã€ŒåŠ›æ‰£ã€ç¬¬ 53 é¢˜ï¼šæœ€å¤§å­åºå’Œï¼ˆä¸­ç­‰ï¼‰

> æç¤ºï¼šç»å…¸çš„ã€ŒåŠ¨æ€è§„åˆ’ã€é—®é¢˜ï¼Œä¸€å®šè¦æŒæ¡ã€‚
>
> åŠ¨æ€è§„åˆ’å‘Šè¯‰æˆ‘ä»¬å¯ä»¥ä¸ç”¨ç›´æ¥å»è§£å†³é¢˜ç›®ï¼Œè€Œæ˜¯å»å‘ç°è¿™ä¸ªé—®é¢˜æœ€å¼€å§‹çš„æ ·å­ï¼Œé€šè¿‡ã€ŒçŠ¶æ€ã€è½¬ç§»ï¼Œæ¯ä¸€æ­¥å‚è€ƒäº†ä¹‹å‰è®¡ç®—çš„ç»“æœï¼Œå¾—åˆ°æœ€ç»ˆçš„ç­”æ¡ˆã€‚

- [é“¾æ¥](https://leetcode-cn.com/problems/maximum-subarray/)
- [é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/maximum-subarray/solution/dong-tai-gui-hua-fen-zhi-fa-python-dai-ma-java-dai/)
- å‚è€ƒèµ„æ–™ï¼šhttps://www.geeksforgeeks.org/maximum-subarray-sum-using-divide-and-conquer-algorithm/

> ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚
>
> ç¤ºä¾‹ï¼š
>
> ```
> è¾“å…¥: [-2,1,-3,4,-1,2,1,-5,4],
> è¾“å‡º: 6
> è§£é‡Š: è¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6ã€‚
> ```
>
> è¿›é˜¶ï¼š
>
> å¦‚æœä½ å·²ç»å®ç°å¤æ‚åº¦ä¸º ğ‘‚(ğ‘›)O(n) çš„è§£æ³•ï¼Œå°è¯•ä½¿ç”¨æ›´ä¸ºç²¾å¦™çš„åˆ†æ²»æ³•æ±‚è§£ã€‚

## æ–¹æ³•ä¸€ï¼šæš´åŠ›è§£æ³•

å³ç©·ä¸¾æ‰€æœ‰å­åŒºé—´ã€‚æ€è·¯è™½ç„¶ç®€å•ï¼Œä½†æ˜¯å†™å¥½æš´åŠ›è§£æ³•ä¹Ÿä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚

- ä½¿ç”¨åŒå±‚å¾ªç¯ï¼Œç©·ä¸¾æ‰€æœ‰çš„å­åŒºé—´ï¼›
- ç„¶åå†å¯¹å­åŒºé—´å†…çš„æ‰€æœ‰å…ƒç´ æ±‚å’Œï¼›
- æ—¶é—´å¤æ‚åº¦æ˜¯ç«‹æ–¹çº§åˆ«çš„ã€‚

**å‚è€ƒä»£ç  1**ï¼š

è¿™é‡Œè¦æ³¨æ„ä¸€äº›è¾¹ç•Œæ¡ä»¶ï¼š

- å˜é‡ `i` è¡¨ç¤ºç»“å°¾çš„é‚£ä¸ªç´¢å¼•ï¼›
- å˜é‡ `j` è¡¨ç¤ºä»ä¸‹æ ‡ `0` ä¾æ¬¡å‘å‰èµ°ã€‚

Java ä»£ç ï¼š

```java
public class Solution {

    public int maxSubArray(int[] nums) {
        int len = nums.length;
        int res = Integer.MIN_VALUE;
        for (int i = 0; i < len; i++) {
            for (int j = 0; j <= i; j++) {
                int sum = sumOfSubArray(nums, j, i);
                res = Math.max(res, sum);
            }
        }
        return res;
    }

    private int sumOfSubArray(int[] nums, int left, int right) {
        // å­åŒºé—´çš„å’Œ
        int res = 0;
        for (int i = left; i <= right; i++) {
            res += nums[i];
        }
        return res;
    }

}
```

C++ ä»£ç ï¼š

```cpp
#include <iostream>
#include <vector>

using namespace std;

class Solution {

private:
    int sumOfArray(vector<int> &nums, int left, int right) {
        int res = 0;
        for (int i = left; i <= right; ++i) {
            res += nums[i];
        }
        return res;
    }

public:
    int maxSubArray(vector<int> &nums) {
        int size = nums.size();
        int res = INT_MIN;
        for (int i = 0; i < size; ++i) {
            for (int j = 0; j <= i; ++j) {
                int sum = sumOfArray(nums, j, i);
                res = max(res, sum);
            }
        }
        return res;
    }
};
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘3)O(N3)ï¼Œè¿™é‡Œ ğ‘N ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ã€‚

æäº¤ä»¥åå‘ç°ã€Œè¶…æ—¶ã€ã€‚ã€Œè¶…æ—¶ã€æœ‰ä¸¤ç§æƒ…å†µï¼š

- ç¨‹åºå½“ä¸­å†™äº†ã€Œæ­»å¾ªç¯ã€ï¼›
- ä»£ç æ­£ç¡®ï¼Œå¤æ‚åº¦è¾ƒé«˜ï¼Œæœ¬è§£æ³•å±äºè¿™ç§æƒ…å†µã€‚

**ä¼˜åŒ–**ï¼šäº‹å®ä¸Šï¼Œä¸Šé¢çš„ä»£ç æœ‰ä¸€äº›é‡å¤è®¡ç®—ã€‚è¿™æ˜¯å› ä¸ºç›¸åŒå‰ç¼€çš„åŒºé—´æ±‚å’Œï¼Œå¯ä»¥é€šè¿‡ç±»ä¼¼ã€ŒçŠ¶æ€è½¬ç§»ã€çš„æ–¹æ³•å¾—åˆ°ã€‚

ä¾‹å¦‚ï¼šè®¡ç®—å­åŒºé—´ `[1, 4]` çš„å’Œå¯ä»¥åœ¨è®¡ç®—å­åŒºé—´ `[1, 3]` çš„åŸºç¡€ä¸Šï¼Œå†åŠ ä¸Š `nums[4]` å¾—åˆ°ã€‚ï¼ˆè¿™é‡Œæ„Ÿè°¢ç”¨æˆ· [@YYM](https://www.liwei.party/u/hele/) çš„æé†’ï¼‰ã€‚å› æ­¤ï¼Œåªéœ€è¦æšä¸¾å­åºçš„å·¦ç«¯ç‚¹ï¼Œç„¶åå†æ‰«æå³ç«¯ç‚¹ï¼Œå°±å¯ä»¥å‡å°‘ä¸€ä¸ªçº§åˆ«çš„å¤æ‚åº¦ã€‚

**å‚è€ƒä»£ç  2**ï¼š

Java ä»£ç ï¼š

```java
public class Solution {

    public int maxSubArray(int[] nums) {
        int len = nums.length;
        int res = Integer.MIN_VALUE;
        for (int i = 0; i < len; i++) {
            int sum = 0;
            for (int j = i; j < len; j++) {
                sum += nums[j];
                res = Math.max(res, sum);
            }
        }
        return res;
    }
}
```

C++ ä»£ç ï¼š

```cpp
#include <iostream>
#include <vector>


using namespace std;


class Solution {
public:
    int maxSubArray(vector<int> &nums) {
        int size = nums.size();
        int res = INT32_MIN;
        for (int i = 0; i < size; ++i) {
            int sum = 0;
            for (int j = i; j < size; ++j) {
                sum += nums[j];
                res = max(res, sum);
            }

        }
        return res;
    }
};
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘2)O(N2)ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ã€‚

å…¶å®è¿™é“é¢˜æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚

> è¯¥é—®é¢˜æœ€æ—©äº 1977 å¹´æå‡ºï¼Œä½†æ˜¯ç›´åˆ° 1984 å¹´æ‰è¢« Jay Kadane å‘ç°äº†çº¿æ€§æ—¶é—´çš„æœ€ä¼˜è§£æ³•ã€‚

### æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’

#### ç¬¬ 1 æ­¥ï¼šå®šä¹‰çŠ¶æ€

æ—¢ç„¶ä¸€ä¸ªè¿ç»­å­æ•°ç»„ä¸€å®šè¦ä»¥ä¸€ä¸ªæ•°ä½œä¸ºç»“å°¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å°†çŠ¶æ€å®šä¹‰æˆå¦‚ä¸‹ã€‚

`dp[i]`ï¼š**è¡¨ç¤ºä»¥ `nums[i]` ç»“å°¾çš„è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ**ã€‚

- é‚£ä¹ˆä¸ºä»€ä¹ˆè¿™ä¹ˆå®šä¹‰å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºè¿™æ ·å®šä¹‰ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å®¹æ˜“å¾—åˆ°ï¼›
- æ€ä¹ˆæƒ³åˆ°è¿™ä¹ˆå®šä¹‰çš„å‘¢ï¼Ÿå‡­ç»éªŒï¼Œä»¥å‰åšè¿‡ç±»ä¼¼é—®é¢˜ï¼Œä¾‹å¦‚ã€ŒåŠ›æ‰£ã€ç¬¬ 300 é¢˜ï¼š[æœ€é•¿ä¸Šå‡å­åºåˆ—](https://leetcode-cn.com/problems/longest-increasing-subsequence/)ï¼Œæˆ–è€…è¯´æ˜¯å‡­æ„Ÿè§‰ã€‚è¿™ä¸¤é“é¢˜éƒ½æ˜¯åŠ¨æ€è§„åˆ’çš„ç»å…¸é—®é¢˜ï¼Œå½“åšä¾‹é¢˜æ¥å­¦ä¹ æœªå°ä¸å¯ï¼Œæˆ‘å­¦ä¹ åŠ¨æ€è§„åˆ’çš„æ—¶å€™ï¼Œå°±æ˜¯ç›´æ¥çœ‹åˆ«äººçš„åšå®¢å’Œé¢˜è§£çš„ã€‚

#### ç¬¬ 2 æ­¥ï¼šæ€è€ƒçŠ¶æ€è½¬ç§»æ–¹ç¨‹

æ ¹æ®çŠ¶æ€çš„å®šä¹‰ï¼Œç”±äº `nums[i]` ä¸€å®šä¼šè¢«é€‰å–ï¼Œå¹¶ä¸” `dp[i]` æ‰€è¡¨ç¤ºçš„è¿ç»­å­åºåˆ—ä¸ `dp[i - 1]` æ‰€è¡¨ç¤ºçš„è¿ç»­å­åºåˆ—ï¼ˆæœ‰å¯èƒ½ï¼‰å°±å·®ä¸€ä¸ª `nums[i]` ã€‚

å‡è®¾æ•°ç»„ `nums` å…¨æ˜¯æ­£æ•°ï¼Œé‚£ä¹ˆä¸€å®šæœ‰ `dp[i] = dp[i - 1] + nums[i]`ã€‚

åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ `dp[i - 1]` æœ‰å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œä¾‹å¦‚å‰å‡ ä¸ªæ•°éƒ½æ˜¯è´Ÿæ•°ï¼Œçªç„¶æ¥äº†ä¸€ä¸ªæ­£æ•°ã€‚

äºæ˜¯åˆ†ç±»è®¨è®ºï¼š

- å¦‚æœ `dp[i - 1] >= 0`ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ `nums[i]` ç›´æ¥æ¥åœ¨ `dp[i - 1]` è¡¨ç¤ºçš„é‚£ä¸ªæ•°ç»„çš„åé¢ã€‚
- å¦‚æœ `dp[i - 1] < 0`ï¼Œé‚£ä¹ˆåŠ ä¸Šå‰é¢çš„æ•°åè€Œè¶Šæ¥è¶Šå°äº†ï¼Œäºæ˜¯â€œå¦èµ·ç‚‰ç¶â€ï¼Œå•ç‹¬çš„ä¸€ä¸ª `nums[i]`ï¼Œå°±æ˜¯ `dp[i]`ã€‚

ä»¥ä¸Šä¸¤ç§æƒ…å†µçš„æœ€å¤§å€¼å°±æ˜¯ `dp[i]` çš„å€¼ï¼Œå†™å‡ºå¦‚ä¸‹çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š



ğ‘‘ğ‘[ğ‘–]={ğ‘‘ğ‘[ğ‘–âˆ’1]+ğ‘›ğ‘¢ğ‘šğ‘ [ğ‘–],ğ‘–ğ‘“ğ‘‘ğ‘[ğ‘–âˆ’1]â‰¥0 ğ‘›ğ‘¢ğ‘šğ‘ [ğ‘–],ğ‘–ğ‘“ğ‘‘ğ‘[ğ‘–âˆ’1]<0dp[i]={dp[iâˆ’1]+nums[i],ifdp[iâˆ’1]â‰¥0 nums[i],ifdp[iâˆ’1]<0



è®°ä¸ºã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ 1ã€ï¼ˆå¦‚æœå…¬å¼æ˜¾ç¤ºæœ‰è¯¯ï¼Œè¯·å‚è€ƒï¼š[é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/maximum-subarray/solution/dong-tai-gui-hua-fen-zhi-fa-python-dai-ma-java-dai/)ï¼‰ã€‚

çŠ¶æ€è½¬ç§»æ–¹ç¨‹è¿˜å¯ä»¥è¿™æ ·å†™ï¼Œåæ­£æ±‚çš„æ˜¯æœ€å¤§å€¼ï¼Œä¹Ÿä¸ç”¨åˆ†ç±»è®¨è®ºäº†ï¼Œå°±è¿™ä¸¤ç§æƒ…å†µï¼Œå–æœ€å¤§å³å¯ï¼Œå› æ­¤è¿˜å¯ä»¥å†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š



ğ‘‘ğ‘[ğ‘–]=maxğ‘›ğ‘¢ğ‘šğ‘ [ğ‘–],;ğ‘‘ğ‘[ğ‘–âˆ’1]+ğ‘›ğ‘¢ğ‘šğ‘ [ğ‘–]dp[i]=maxnums[i],;dp[iâˆ’1]+nums[i]



è®°ä¸ºã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ 2ã€ã€‚

> åŠ¨æ€è§„åˆ’çš„é—®é¢˜ç»å¸¸è¦åˆ†ç±»è®¨è®ºï¼Œè¿™æ˜¯å› ä¸ºåŠ¨æ€è§„åˆ’çš„é—®é¢˜æœ¬æ¥å°±æœ‰æœ€ä¼˜å­ç»“æ„çš„ç‰¹å¾ï¼Œå³å¤§é—®é¢˜çš„æœ€ä¼˜è§£é€šå¸¸ç”±å°é—®é¢˜çš„æœ€ä¼˜è§£å¾—åˆ°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦é€šè¿‡åˆ†ç±»è®¨è®ºï¼Œå¾—åˆ°å¤§é—®é¢˜çš„å°é—®é¢˜ç©¶ç«Ÿæ˜¯å“ªäº›ã€‚

#### ç¬¬ 3 æ­¥ï¼šæ€è€ƒåˆå§‹å€¼

`dp[0]` æ ¹æ®å®šä¹‰ï¼Œä¸€å®šä»¥ `nums[0]` ç»“å°¾ï¼Œå› æ­¤ `dp[0] = nums[0]`ã€‚

#### ç¬¬ 4 æ­¥ï¼šæ€è€ƒè¾“å‡º

æ³¨æ„ï¼šè¿™é‡ŒçŠ¶æ€çš„å®šä¹‰ä¸æ˜¯é¢˜ç›®ä¸­çš„é—®é¢˜çš„å®šä¹‰ï¼Œä¸èƒ½ç›´æ¥å°†æœ€åä¸€ä¸ªçŠ¶æ€è¿”å›å›å»ã€‚

è¾“å‡ºåº”è¯¥æ˜¯æŠŠæ‰€æœ‰çš„ `dp[0]`ã€`dp[1]`ã€â€¦â€¦ã€`dp[n - 1]` éƒ½çœ‹ä¸€éï¼Œå–æœ€å¤§å€¼ã€‚ åŒæ ·çš„æƒ…å†µä¹Ÿé€‚ç”¨äºã€ŒåŠ›æ‰£ã€ç¬¬ 300 é¢˜ï¼šæœ€é•¿ä¸Šå‡å­åºåˆ—ã€‚æˆ‘ç»å¸¸åœ¨è¿™ä¸€æ­¥ã€Œæ‘”è·Ÿå¤´ã€ã€‚

**å‚è€ƒä»£ç  3**ï¼šæ ¹æ®ã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ 1ã€

Java ä»£ç ï¼š

```java
public class Solution {

    public int maxSubArray(int[] nums) {
        int len = nums.length;
        if (len == 0) {
            return 0;
        }
        int[] dp = new int[len];
        dp[0] = nums[0];

        for (int i = 1; i < len; i++) {
            if (dp[i - 1] >= 0) {
                dp[i] = dp[i - 1] + nums[i];
            } else {
                dp[i] = nums[i];
            }
        }

        // æœ€åä¸è¦å¿˜è®°å…¨éƒ¨çœ‹ä¸€éæ±‚æœ€å¤§å€¼
        int res = dp[0];
        for (int i = 1; i < len; i++) {
            res = Math.max(res, dp[i]);
        }
        return res;
    }

}
```

Python ä»£ç ï¼š

```python
class Solution:
    def maxSubArray(self, nums: List[int]) -> int:
        size = len(nums)
        if size == 0:
            return 0
        dp = [0 for _ in range(size)]

        dp[0] = nums[0]
        for i in range(1, size):
            if dp[i - 1] >= 0:
                dp[i] = dp[i - 1] + nums[i]
            else:
                dp[i] = nums[i]
        return max(dp)
```

**å‚è€ƒä»£ç  4**ï¼šæ ¹æ®ã€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ 2ã€

Java ä»£ç ï¼š

```java
public class Solution {

    public int maxSubArray(int[] nums) {
        int len = nums.length;
        if (len == 0) {
            return 0;
        }
        int[] dp = new int[len];
        dp[0] = nums[0];

        for (int i = 1; i < len; i++) {
            dp[i] = Math.max(nums[i], dp[i - 1] + nums[i]);
        }

        int res = dp[0];
        for (int i = 1; i < len; i++) {
            res = Math.max(res, dp[i]);
        }
        return res;
    }
}
```

Python ä»£ç ï¼š

```python
from typing import List


class Solution:
    def maxSubArray(self, nums: List[int]) -> int:
        size = len(nums)
        if size == 0:
            return 0
        dp = [0 for _ in range(size)]

        dp[0] = nums[0]
        for i in range(1, size):
            dp[i] = max(dp[i - 1] + nums[i], nums[i])
        return max(dp)
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ã€‚

#### ç¬¬ 5 æ­¥ï¼šæ€è€ƒèŠ‚çº¦ç©ºé—´

æ—¢ç„¶å½“å‰çŠ¶æ€åªä¸ä¸Šä¸€ä¸ªçŠ¶æ€æœ‰å…³ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç©ºé—´å¤æ‚åº¦å‹ç¼©åˆ° ğ‘‚(1)O(1)ã€‚

**å‚è€ƒä»£ç  5**ï¼š

Java ä»£ç ï¼š

```java
public class Solution {

    public int maxSubArray(int[] nums) {
        int len = nums.length;
        if (len == 0) {
            return 0;
        }
        // pre è¡¨ç¤ºçš„æ„æ€æ˜¯ã€Œä¸Šä¸€ä¸ªçŠ¶æ€ã€çš„å€¼
        int pre = nums[0];
        int res = pre;
        for (int i = 1; i < len; i++) {
            pre = Math.max(nums[i], pre + nums[i]);
            res = Math.max(res, pre);
        }
        return res;
    }

}
```

Python ä»£ç ï¼š

```python
from typing import List


class Solution:
    def maxSubArray(self, nums: List[int]) -> int:
        size = len(nums)
        if size == 0:
            return 0
        # // pre è¡¨ç¤ºçš„æ„æ€æ˜¯ã€Œä¸Šä¸€ä¸ªçŠ¶æ€ã€çš„å€¼
        pre = nums[0]
        res = pre
        for i in range(1, size):
            pre = max(nums[i], pre + nums[i])
            res = max(res, pre)
        return res
```

C++ ä»£ç ï¼š

```cpp
#include <iostream>
#include <vector>

using namespace std;

class Solution {
public:
    int maxSubArray(vector<int> &nums) {
        int res = INT_MIN;
        int pre = 0;
        for (int i = 0; i < nums.size(); ++i) {
            int cur = max(pre, 0) + nums[i];
            res = max(res, cur);
            pre = cur;
        }
        return res;
    }
};
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ã€‚

### æ–¹æ³•ä¸‰ï¼šåˆ†æ²»æ³•

åˆ†æ²»æ³•çš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼Œå…¶å®ä¹Ÿæ˜¯åˆ†ç±»è®¨è®ºã€‚

è¿ç»­å­åºåˆ—çš„æœ€å¤§å’Œä¸»è¦ç”±è¿™ä¸‰éƒ¨åˆ†å­åŒºé—´é‡Œå…ƒç´ çš„æœ€å¤§å’Œå¾—åˆ°ï¼š

- ç¬¬ 1 éƒ¨åˆ†ï¼šå­åŒºé—´ `[left, mid]`ï¼›
- ç¬¬ 2 éƒ¨åˆ†ï¼šå­åŒºé—´ `[mid + 1, right]`ï¼›
- ç¬¬ 3 éƒ¨åˆ†ï¼šåŒ…å«å­åŒºé—´ `[mid , mid + 1]` çš„å­åŒºé—´ï¼Œå³ `nums[mid]` ä¸ `nums[mid + 1]` ä¸€å®šä¼šè¢«é€‰å–ã€‚

å¯¹å®ƒä»¬ä¸‰è€…æ±‚æœ€å¤§å€¼å³å¯ã€‚



![ç¬¬ 53 é¢˜åˆ†æ²»ç®—æ³•ç¤ºæ„å›¾](https://liweiwei1419.gitee.io/visualgo/15-dynamic-programming/0053/01.png)

**ç¬¬ 53 é¢˜åˆ†æ²»ç®—æ³•ç¤ºæ„å›¾**



**å‚è€ƒä»£ç  6**ï¼š

Java ä»£ç ï¼š

```java
public class Solution {

    public int maxSubArray(int[] nums) {
        int len = nums.length;
        if (len == 0) {
            return 0;
        }
        return maxSubArraySum(nums, 0, len - 1);
    }

    private int maxCrossingSum(int[] nums, int left, int mid, int right) {
        // ä¸€å®šä¼šåŒ…å« nums[mid] è¿™ä¸ªå…ƒç´ 
        int sum = 0;
        int leftSum = Integer.MIN_VALUE;
        // å·¦åŠè¾¹åŒ…å« nums[mid] å…ƒç´ ï¼Œæœ€å¤šå¯ä»¥åˆ°ä»€ä¹ˆåœ°æ–¹
        // èµ°åˆ°æœ€è¾¹ç•Œï¼Œçœ‹çœ‹æœ€å€¼æ˜¯ä»€ä¹ˆ
        // è®¡ç®—ä»¥ mid ç»“å°¾çš„æœ€å¤§çš„å­æ•°ç»„çš„å’Œ
        for (int i = mid; i >= left; i--) {
            sum += nums[i];
            if (sum > leftSum) {
                leftSum = sum;
            }
        }
        sum = 0;
        int rightSum = Integer.MIN_VALUE;
        // å³åŠè¾¹ä¸åŒ…å« nums[mid] å…ƒç´ ï¼Œæœ€å¤šå¯ä»¥åˆ°ä»€ä¹ˆåœ°æ–¹
        // è®¡ç®—ä»¥ mid+1 å¼€å§‹çš„æœ€å¤§çš„å­æ•°ç»„çš„å’Œ
        for (int i = mid + 1; i <= right; i++) {
            sum += nums[i];
            if (sum > rightSum) {
                rightSum = sum;
            }
        }
        return leftSum + rightSum;
    }

    private int maxSubArraySum(int[] nums, int left, int right) {
        if (left == right) {
            return nums[left];
        }
        int mid = (left + right) >>> 1;
        return max3(maxSubArraySum(nums, left, mid),
                maxSubArraySum(nums, mid + 1, right),
                maxCrossingSum(nums, left, mid, right));
    }

    private int max3(int num1, int num2, int num3) {
        return Math.max(num1, Math.max(num2, num3));
    }
}
```

Python ä»£ç ï¼š

```python
from typing import List


class Solution:
    def maxSubArray(self, nums: List[int]) -> int:
        size = len(nums)
        if size == 0:
            return 0
        return self.__max_sub_array(nums, 0, size - 1)

    def __max_sub_array(self, nums, left, right):
        if left == right:
            return nums[left]
        mid = (left + right) >> 1
        return max(self.__max_sub_array(nums, left, mid),
                   self.__max_sub_array(nums, mid + 1, right),
                   self.__max_cross_array(nums, left, mid, right))

    def __max_cross_array(self, nums, left, mid, right):
        # ä¸€å®šåŒ…å« nums[mid] å…ƒç´ çš„æœ€å¤§è¿ç»­å­æ•°ç»„çš„å’Œï¼Œ
        # æ€è·¯æ˜¯çœ‹çœ‹å·¦è¾¹"æ‰©æ•£åˆ°åº•"ï¼Œå¾—åˆ°ä¸€ä¸ªæœ€å¤§æ•°ï¼Œå³è¾¹"æ‰©æ•£åˆ°åº•"å¾—åˆ°ä¸€ä¸ªæœ€å¤§æ•°
        # ç„¶åå†åŠ ä¸Šä¸­é—´æ•°
        left_sum_max = 0
        start_left = mid - 1
        s1 = 0
        while start_left >= left:
            s1 += nums[start_left]
            left_sum_max = max(left_sum_max, s1)
            start_left -= 1

        right_sum_max = 0
        start_right = mid + 1
        s2 = 0
        while start_right <= right:
            s2 += nums[start_right]
            right_sum_max = max(right_sum_max, s2)
            start_right += 1
        return left_sum_max + nums[mid] + right_sum_max
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘logğ‘)O(Nlogâ¡N)ï¼Œè¿™é‡Œé€’å½’çš„æ·±åº¦æ˜¯å¯¹æ•°çº§åˆ«çš„ï¼Œæ¯ä¸€å±‚éœ€è¦éå†ä¸€éæ•°ç»„ï¼ˆæˆ–è€…æ•°ç»„çš„ä¸€åŠã€å››åˆ†ä¹‹ä¸€ï¼‰ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ï¼Œä»…éœ€è¦å¸¸æ•°ä¸ªç©ºé—´ç”¨äºé€‰å–æœ€å¤§å€¼ã€‚

ï¼ˆæœ¬èŠ‚å®Œï¼‰