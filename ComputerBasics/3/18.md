## ã€ŒåŠ›æ‰£ã€ç¬¬ 448 é¢˜ï¼šæ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­—

é¢˜è§£åœ°å€ï¼š[æ¡¶æ’åº + åŸºäºâ€œå¼‚æˆ–è¿ç®—â€äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰](https://leetcode-cn.com/problems/find-all-numbers-disappeared-in-an-array/solution/tong-pai-xu-ji-yu-yi-huo-yun-suan-jiao-huan-liang-/)ã€‚

è¯´æ˜ï¼šæ–‡æœ¬é¦–å‘åœ¨åŠ›æ‰£çš„é¢˜è§£ç‰ˆå—ï¼Œæ›´æ–°ä¹Ÿä¼šåœ¨ç¬¬ 1 æ—¶é—´åœ¨ä¸Šé¢çš„ç½‘ç«™ä¸­æ›´æ–°ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯ä¸Šé¢çš„æ–‡ç« çš„ä¸€ä¸ªå¿«ç…§ï¼Œæ‚¨å¯ä»¥ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥çœ‹åˆ°å…¶ä»–ç½‘å‹å¯¹æœ¬æ–‡çš„è¯„è®ºã€‚

ä¼ é€é—¨ï¼š[448. æ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­—](https://leetcode-cn.com/problems/find-all-numbers-disappeared-in-an-array/)ã€‚

> ç»™å®šä¸€ä¸ªèŒƒå›´åœ¨ 1 â‰¤ a[i] â‰¤ n ğ‘›=æ•°ç»„å¤§å°n=æ•°ç»„å¤§å° çš„ æ•´å‹æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸€äº›å‡ºç°äº†ä¸¤æ¬¡ï¼Œå¦ä¸€äº›åªå‡ºç°ä¸€æ¬¡ã€‚
>
> æ‰¾åˆ°æ‰€æœ‰åœ¨ [1, n] èŒƒå›´ä¹‹é—´æ²¡æœ‰å‡ºç°åœ¨æ•°ç»„ä¸­çš„æ•°å­—ã€‚
>
> æ‚¨èƒ½åœ¨ä¸ä½¿ç”¨é¢å¤–ç©ºé—´ä¸”æ—¶é—´å¤æ‚åº¦ä¸ºOğ‘›nçš„æƒ…å†µä¸‹å®Œæˆè¿™ä¸ªä»»åŠ¡å—? ä½ å¯ä»¥å‡å®šè¿”å›çš„æ•°ç»„ä¸ç®—åœ¨é¢å¤–ç©ºé—´å†…ã€‚
>
> ç¤ºä¾‹:
>
> è¾“å…¥:
> [4,3,2,7,8,2,3,1]
>
> è¾“å‡º:
> [5,6]

## æ¡¶æ’åº + åŸºäºâ€œå¼‚æˆ–è¿ç®—â€äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰

**æ€è·¯åˆ†æ**ï¼š

- æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„æ€è·¯æ˜¯â€œæ¡¶æ’åºâ€ï¼Œâ€œæ¡¶æ’åºâ€çš„æ€æƒ³å¾ˆç®€å•ï¼Œâ€œä¸€ä¸ªèåœä¸€ä¸ªå‘â€ï¼Œä½†è¿™é“é¢˜æ¯”è¾ƒè®©äººå¤´ç–¼çš„æ˜¯â€œä¸ä½¿ç”¨é¢å¤–ç©ºé—´â€ã€‚

â€œæ¡¶æ’åºâ€çš„æ€æƒ³ï¼Œæœ‰äº›åœ°æ–¹ä¹ŸæŠŠå®ƒå«åšâ€œæŠ½å±‰åŸç†â€ï¼Œä»¥ä¸‹ä»‹ç»æ¥è‡ªâ€œç™¾åº¦ç™¾ç§‘â€ä¹‹[â€œæŠ½å±‰åŸç†â€](https://baike.baidu.com/item/æŠ½å±‰åŸç†/233776?fr=aladdin)è¯æ¡ï¼š

> æŠ½å±‰åŸç†çš„ä¸€èˆ¬å«ä¹‰ä¸ºï¼šâ€œå¦‚æœæ¯ä¸ªæŠ½å±‰ä»£è¡¨ä¸€ä¸ªé›†åˆï¼Œæ¯ä¸€ä¸ªè‹¹æœå°±å¯ä»¥ä»£è¡¨ä¸€ä¸ªå…ƒç´ ï¼Œå‡å¦‚æœ‰ n + 1 ä¸ªå…ƒç´ æ”¾åˆ° n ä¸ªé›†åˆä¸­å»ï¼Œå…¶ä¸­å¿…å®šæœ‰ä¸€ä¸ªé›†åˆé‡Œè‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ ã€‚â€ æŠ½å±‰åŸç†æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºé¸½å·¢åŸç†ã€‚å®ƒæ˜¯ç»„åˆæ•°å­¦ä¸­ä¸€ä¸ªé‡è¦çš„åŸç†ã€‚

- â€œæ¡¶æ’åºâ€çš„å­æ­¥éª¤æ˜¯â€œäº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªä½ç½®çš„å…ƒç´ â€ï¼Œ**å¦‚æœä¸ä½¿ç”¨é¢å¤–çš„ç©ºé—´ï¼Œå¯ä»¥ä½¿ç”¨â€œå¼‚æˆ–è¿ç®—â€ä»£æ›¿**ã€‚

### æ–¹æ³•ä¸€ï¼šæ¡¶æ’åº + åŸºäºâ€œå¼‚æˆ–è¿ç®—â€äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼

äº¤æ¢ä¸¤ä¸ªæ•´æ•°ï¼Œæœ‰ä¸¤ç§æ¯”è¾ƒ tricky çš„åšæ³•ã€‚ä¸‹é¢ç»™å‡ºç»“è®ºã€‚

â€œåŸºäºå¼‚æˆ–è¿ç®—â€æ˜¯å› ä¸ºåˆ©ç”¨äº†â€œå¼‚æˆ–è¿ç®—â€æ˜¯ä¸è¿›ä½çš„äºŒè¿›åˆ¶åŠ æ³•ã€‚å®ƒæœ‰å¦‚ä¸‹æ€§è´¨ï¼š

> å¦‚æœ `a ^ b = c` ï¼Œé‚£ä¹ˆ `a ^ c = b` ä¸ `b ^ c = a` åŒæ—¶æˆç«‹ï¼Œåˆ©ç”¨è¿™ä¸€æ¡ï¼Œå¯ä»¥ç”¨äºäº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ã€‚

äºæ˜¯ï¼Œäº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼Œä¾‹å¦‚ `a` å’Œ `b`ï¼Œä¸ä½¿ç”¨ç¬¬ä¸‰ä¸ªå˜é‡ï¼Œæœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ³•ï¼š

| åŸºäºå¼‚æˆ–è¿ç®—                                  | åŸºäºåŠ å‡æ³•                                    |
| :-------------------------------------------- | :-------------------------------------------- |
| `a = a ^ b` <br/>`b = a ^ b` <br/>`a = a ^ b` | `a = a + b` <br/>`b = a - b`<br/> `a = a - b` |

æˆ‘ç†è§£çš„æ–¹å¼å°±æ˜¯è‡ªå·±åœ¨çº¸ä¸Šå†™å‡ ä¸ªä¾‹å­ï¼Œå¹¶ä¸”è®°ä½è¿™ä¸ªç»“è®ºã€‚ä¸ªäººè§‰å¾—â€œåŸºäºå¼‚æˆ–è¿ç®—â€äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼å¥½è®°ä¸€äº›ï¼Œå› ä¸ºå³è¾¹éƒ½ä¸€æ ·ï¼Œå·¦è¾¹ä¾æ¬¡æ˜¯ `a`ã€`b`ã€`a`ã€‚

**å‚è€ƒä»£ç  1**ï¼š

Python ä»£ç ï¼š

Python

```Python
class Solution:
    def findDisappearedNumbers(self, nums: List[int]) -> List[int]:
        size = len(nums)

        for i in range(size):
            while nums[i] != i + 1:
                if nums[i] != nums[nums[i] - 1]:
                    self.__swap(nums, i, nums[i] - 1)
                else:
                    break

        res = []
        for i in range(size):
            if nums[i] != i + 1:
                res.append(i + 1)
        return res

    def __swap(self, nums, index1, index2):
        nums[index1] = nums[index1] ^ nums[index2]
        nums[index2] = nums[index1] ^ nums[index2]
        nums[index1] = nums[index1] ^ nums[index2]
```

Java ä»£ç ï¼š

Java

```Java
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Solution {

    public List findDisappearedNumbers(int[] nums) {
        int len = nums.length;

        for (int i = 0; i < len; i++) {
            while (nums[i] != i + 1 && nums[nums[i] - 1] != nums[i]) {
                swap(nums, i, nums[i] - 1);
            }
        }

        // System.out.println("æ¡¶æ’åºä»¥åçš„æ•°ç»„ï¼š" + Arrays.toString(nums));
        List res = new ArrayList<>();
        for (int i = 0; i < nums.length; i++) {
            if (nums[i] != i + 1) {
                res.add(i + 1);
            }
        }
        return res;
    }

    private void swap(int[] nums, int i, int j) {
        nums[i] = nums[i] ^ nums[j];
        nums[j] = nums[i] ^ nums[j];
        nums[i] = nums[i] ^ nums[j];
    }

}
```

**å¤æ‚åº¦åˆ†æ**ï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ï¼Œè¿™é‡Œ ğ‘N æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ï¼Œè¿™é‡Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„ç©ºé—´ã€‚

è¯´æ˜ï¼šåŒæ ·çš„æ€è·¯å’ŒæŠ€å·§ï¼Œå¯ä»¥è§£å†³[ã€ŒåŠ›æ‰£ã€ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°](https://leetcode-cn.com/problems/first-missing-positive)ã€‚

### æ–¹æ³•äºŒï¼šä½å›¾ï¼ˆä½¿ç”¨äº† 1 ä¸ªé¢å¤–ç©ºé—´ï¼Œä¸ç¬¦åˆé¢˜æ„ï¼Œè¯¥æ–¹æ³•ä»…ä½œäº†è§£ï¼‰

**å‚è€ƒä»£ç  2**ï¼š

Python ä»£ç ï¼š

Python

```Python
from typing import List


class Solution:
    def findDisappearedNumbers(self, nums: List[int]) -> List[int]:
        size = len(nums)

        # ä½å›¾
        map = 1 << (size)

        # è°ƒè¯•ä»£ç 
        # print(bin(map))

        for num in nums:
            map |= 1 << (num - 1)
            # è°ƒè¯•ä»£ç 
            # print(bin(map))

        res = []

        for index in range(size):
            if (map >> index) & 1 == 0:
                res.append(index + 1)
        return res
```

Java ä»£ç ï¼š





Java

```Java
import java.util.ArrayList;
import java.util.List;

public class Solution {

    public List findDisappearedNumbers(int[] nums) {
        int len = nums.length;
        int map = 1 << len;

        // è°ƒè¯•ä»£ç 
        // System.out.println(Integer.toBinaryString(map));
        for (int num : nums) {
            map |= 1 << (num - 1);
            // è°ƒè¯•ä»£ç 
            // System.out.println(Integer.toBinaryString(map));
        }

        List res = new ArrayList<>();
        for (int i = 0; i < len; i++) {
            if (((map >> i) & 1) == 0) {
                res.add(i + 1);
            }
        }
        return res;
    }
}
```

**å¤æ‚åº¦åˆ†æ**ï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ï¼Œè¿™é‡Œ ğ‘N æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ï¼Œè¿™é‡Œä½¿ç”¨äº† 1 ä¸ªé¢å¤–çš„ç©ºé—´ã€‚