# ã€ŒåŠ›æ‰£ã€ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°

é¢˜è§£åœ°å€ï¼š[æ¡¶æ’åº + åŸºäºâ€œå¼‚æˆ–è¿ç®—â€äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰](https://leetcode-cn.com/problems/first-missing-positive/solution/tong-pai-xu-python-dai-ma-by-liweiwei1419/)ã€‚

è¯´æ˜ï¼šæ–‡æœ¬é¦–å‘åœ¨åŠ›æ‰£çš„é¢˜è§£ç‰ˆå—ï¼Œæ›´æ–°ä¹Ÿä¼šåœ¨ç¬¬ 1 æ—¶é—´åœ¨ä¸Šé¢çš„ç½‘ç«™ä¸­æ›´æ–°ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯ä¸Šé¢çš„æ–‡ç« çš„ä¸€ä¸ªå¿«ç…§ï¼Œæ‚¨å¯ä»¥ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥çœ‹åˆ°å…¶ä»–ç½‘å‹å¯¹æœ¬æ–‡çš„è¯„è®ºã€‚

ä¼ é€é—¨ï¼š[41. ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°](https://leetcode-cn.com/problems/first-missing-positive/)ã€‚

> ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚
>
> ç¤ºä¾‹ 1:
>
> è¾“å…¥: [1,2,0]
> è¾“å‡º: 3
> ç¤ºä¾‹ 2:
>
> è¾“å…¥: [3,4,-1,1]
> è¾“å‡º: 2
> ç¤ºä¾‹ 3:
>
> è¾“å…¥: [7,8,9,11,12]
> è¾“å‡º: 1
> è¯´æ˜:
>
> ä½ çš„ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”ä¸ºOğ‘›nï¼Œå¹¶ä¸”åªèƒ½ä½¿ç”¨å¸¸æ•°çº§åˆ«çš„ç©ºé—´ã€‚

## æ¡¶æ’åº + åŸºäºâ€œå¼‚æˆ–è¿ç®—â€äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰

è¿™é“é¢˜ä½¿ç”¨æ¡¶æ’åºçš„æ€è·¯ï¼Œå³ â€œä¸€ä¸ªèåœä¸€ä¸ªå‘â€ã€‚åœ¨å­¦ä¹ â€œæ’åºç®—æ³•â€çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¿½ç•¥â€œæ¡¶æ’åºâ€çš„ä½œç”¨ï¼Œä½†å®ƒçš„æ€æƒ³çš„ç¡®å¯ä»¥è§£å†³ä¸€äº›ç‰¹å®šé—®é¢˜ã€‚

â€œæ¡¶æ’åºâ€çš„æ€æƒ³ï¼Œæœ‰äº›åœ°æ–¹ä¹ŸæŠŠå®ƒå«åšâ€œæŠ½å±‰åŸç†â€ï¼Œä»¥ä¸‹ä»‹ç»æ¥è‡ª[â€œç™¾åº¦ç™¾ç§‘â€ä¹‹â€œæŠ½å±‰åŸç†â€è¯æ¡]ï¼š

> æŠ½å±‰åŸç†çš„ä¸€èˆ¬å«ä¹‰ä¸ºï¼šâ€œå¦‚æœæ¯ä¸ªæŠ½å±‰ä»£è¡¨ä¸€ä¸ªé›†åˆï¼Œæ¯ä¸€ä¸ªè‹¹æœå°±å¯ä»¥ä»£è¡¨ä¸€ä¸ªå…ƒç´ ï¼Œå‡å¦‚æœ‰ n + 1 ä¸ªå…ƒç´ æ”¾åˆ° n ä¸ªé›†åˆä¸­å»ï¼Œå…¶ä¸­å¿…å®šæœ‰ä¸€ä¸ªé›†åˆé‡Œè‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ ã€‚â€ æŠ½å±‰åŸç†æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºé¸½å·¢åŸç†ã€‚å®ƒæ˜¯ç»„åˆæ•°å­¦ä¸­ä¸€ä¸ªé‡è¦çš„åŸç†ã€‚

**æ€è·¯åˆ†æ**ï¼šå¯ä»¥å°±ä½¿ç”¨é¢˜ç›®ä¸­çš„ä¾‹å­ï¼Œåœ¨çº¸ä¸Šå†™å†™ç”»ç”»ï¼Œå°±èƒ½å¾—å‡ºæ€è·¯ï¼Œåªä¸è¿‡åœ¨ç¼–ç ä¸Šéœ€è¦æ³¨æ„ä¸€äº›ç»†èŠ‚ã€‚



![41.png](https://liweiwei1419.gitee.io/images/leetcode-solution-new/0041/41-0.png)

**41.png**



ä¸‹é¢æ˜¯â€œæ¡¶æ’åºâ€è¿‡ç¨‹ã€‚

ï¼ˆæ¸©é¦¨æç¤ºï¼šä¸‹é¢çš„å¹»ç¯ç‰‡ä¸­ï¼Œæœ‰å‡ é¡µä¸Šæœ‰è¾ƒå¤šçš„æ–‡å­—ï¼Œå¯èƒ½éœ€è¦æ‚¨åœç•™ä¸€ä¸‹ï¼Œå¯ä»¥ç‚¹å‡»å³ä¸‹è§’çš„åé€€ â€œ|â—€â€ æˆ–è€…å‰è¿› â€œâ–¶|â€ æŒ‰é’®æ§åˆ¶å¹»ç¯ç‰‡çš„æ’­æ”¾ã€‚ï¼‰



![img](https://liweiwei1419.gitee.io/images/leetcode-solution-new/0041/new/0041.gif)



å¦‚å›¾æ‰€ç¤ºï¼šæˆ‘ä»¬å¯ä»¥æŠŠæ•°ç»„è¿›è¡Œä¸€æ¬¡â€œæ’åºâ€ï¼Œâ€œæ’åºâ€çš„è§„åˆ™æ˜¯ï¼š**å¦‚æœè¿™ä¸ªæ•°å­— `i` è½åœ¨â€œåŒºé—´èŒƒå›´é‡Œâ€ï¼Œ`i` å°±åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º `i - 1` çš„ä½ç½®ä¸Š**ï¼Œä¸‹é¢å…·ä½“è§£é‡Šã€‚

1ã€æ•°å­— `i` è½åœ¨â€œåŒºé—´èŒƒå›´é‡Œâ€ï¼›

ä¾‹å¦‚ï¼š`[3, 4, -1, 1]`ï¼Œä¸€å…± 4 ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆå¦‚æœè¿™ä¸ªæ•°ç»„ä¸­å‡ºç° â€œ1â€ã€â€œ2â€ã€â€œ3â€ã€â€œ4â€ï¼Œå°±æ˜¯æˆ‘ä»¬é‡ç‚¹è¦å…³æ³¨çš„æ•°å­—äº†ï¼›
åˆä¾‹å¦‚ï¼š`[7, 8, 9, 11, 12]` ä¸€å…± 5 ä¸ªæ•°å­—ï¼Œæ¯ä¸€ä¸ªéƒ½ä¸æ˜¯ â€œ1â€ã€â€œ2â€ã€â€œ3â€ã€â€œ4â€ã€â€œ5â€ ä¸­çš„ä¸€ä¸ªï¼Œå› æ­¤æˆ‘ä»¬æ— é¡»å…³æ³¨å®ƒä»¬ï¼›

2ã€`i` å°±åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º`i - 1` çš„ä½ç½®ä¸Šï¼›

è¿™å¥è¯ä¹Ÿå¯ä»¥è¿™ä¹ˆè¯´ â€œ**ç´¢å¼•ä¸º `i` çš„ä½ç½®ä¸Šåº”è¯¥å­˜æ”¾çš„æ•°å­—æ˜¯ `i + 1`**â€ã€‚

å°±çœ‹ä¸Šé¢é‚£å¼ å›¾ï¼Œæ•°å­— 11 åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º 00 çš„ä½ç½®ä¸Šï¼Œæ•°å­— 33 åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º 22 çš„ä½ç½®ä¸Šï¼Œæ•°å­— 44 åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º 33 çš„ä½ç½®ä¸Šã€‚ä¸€ä¸ªæ•°å­—æ”¾åœ¨å®ƒåº”è¯¥æ”¾çš„ä½ç½®ä¸Šï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªä½ç½®æ˜¯â€œå’Œè°â€çš„ï¼Œçœ‹èµ·æ¥â€œé¡ºçœ¼â€çš„ã€‚

æŒ‰ç…§ä»¥ä¸Šè§„åˆ™æ’å¥½åºä»¥åï¼Œç¼ºå¤±çš„ç¬¬ 11 ä¸ªæ­£æ•°ä¸€ä¸‹å­å°±çœ‹å‡ºæ¥äº†ï¼Œé‚£ä¹ˆâ€œæœ€ä¸å’Œè°â€çš„æ•°å­—çš„ç´¢å¼• +1+1ï¼Œå°±ä¸ºæ‰€æ±‚ã€‚é‚£å¦‚æœæ‰€æœ‰çš„æ•°å­—éƒ½ä¸â€œå’Œè°â€ï¼Œæ•°ç»„çš„é•¿åº¦ +1+1 å°±ä¸ºæ‰€æ±‚ã€‚

**å‚è€ƒä»£ç  1**ï¼š

Python ä»£ç ï¼š

python

```python
class Solution:
    def firstMissingPositive(self, nums: List[int]) -> int:

        size = len(nums)
        if size == 0:
            return 1

        for i in range(size):

            while nums[i] > 0 and nums[i] <= size:
                if nums[nums[i] - 1] == nums[i]:
                    # å¦‚æœå·²ç»åœ¨åˆé€‚çš„ä½ç½®ä¸Šï¼Œå°±ä¸ç”¨äº¤æ¢äº†
                    break
                # è¿™é‡Œæˆ‘å•ç‹¬æŠŠäº¤æ¢æ•°ç»„ä¸¤ä¸ªä½ç½®çš„æ–¹æ³•å°è£…èµ·æ¥ï¼Œæ˜¯ä¸ºäº†ä¸è®©è‡ªå·±å‡ºé”™ï¼Œè¿™ä¸€è¡Œä»£ç æœ‰ç‚¹ç»•
                # å°±è¦æŠŠå®ƒæ”¾åˆ°åˆé€‚çš„ä½ç½®ä¸Šï¼Œi åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º i - 1 çš„ä½ç½®ä¸Š
                self.__swap(nums, i , nums[i] - 1)


        # ä»å¤´åˆ°å°¾çœ‹ä¸€é
        for i in range(size):
            if nums[i] != i + 1:
                return i + 1
        return size + 1


    def __swap(self, nums, index1, index2):
        if index1 == index2:
            return
        nums[index1], nums[index2] = nums[index2], nums[index1]  
```

Java ä»£ç ï¼š

java

```java
import java.util.Arrays;

public class Solution {

    // å…³é”®å­—ï¼šæ¡¶æ’åºï¼Œä»€ä¹ˆæ•°å­—å°±è¦æ”¾åœ¨å¯¹åº”çš„ç´¢å¼•ä¸Šï¼Œå…¶å®ƒç©ºç€å°±ç©ºç€
    // æœ€å¥½çš„ä¾‹å­ï¼š[3,4,-1,1]
    // æ•´ç†å¥½åº”è¯¥æ˜¯è¿™æ ·ï¼š[1,-1,3,4]ï¼Œ
    // è¿™é‡Œ 1ï¼Œ3ï¼Œ4 éƒ½åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šï¼Œ
    // -1 ä¸åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šï¼Œç´¢å¼•æ˜¯ 1 ï¼Œæ‰€ä»¥è¿”å› 2

    // [4,3,2,1] è¦å˜æˆ [1,2,3,4]ï¼Œ*** Offer ä¸Šæœ‰ç±»ä¼¼çš„é—®é¢˜ã€‚

    // è¿™é‡Œè´Ÿæ•°å’Œå¤§äºæ•°ç»„é•¿åº¦çš„æ•°éƒ½æ˜¯"æ£ä¹±é¡¹"ã€‚

    public int firstMissingPositive(int[] nums) {
        int len = nums.length;

        for (int i = 0; i < len; i++) {
            // å‰ä¸¤ä¸ªæ˜¯åœ¨åˆ¤æ–­æ˜¯å¦æˆä¸ºç´¢å¼•
            // åä¸€ä¸ªæ˜¯åœ¨åˆ¤æ–­ï¼Œä¾‹å¦‚ 3 åœ¨ä¸åœ¨ç´¢å¼• 2 ä¸Š
            // å³ nums[i] ?= nums[nums[i]-1] è¿™é‡Œè¦ç‰¹åˆ«å°å¿ƒ
            while (nums[i] > 0 && nums[i] <= len && nums[nums[i] - 1] != nums[i]) {
                // ç¬¬ 3 ä¸ªæ¡ä»¶ä¸æˆç«‹çš„ç´¢å¼•çš„éƒ¨åˆ†æ˜¯ i å’Œ nums[i]-1
                swap(nums, nums[i] - 1, i);
            }
        }

        // è°ƒè¯•ä»£ç 
        // System.out.println(Arrays.toString(nums));

        for (int i = 0; i < len; i++) {
            // [1,-2,3,4]
            // é™¤äº† -2 å…¶å®ƒéƒ½æ»¡è¶³ï¼š i+1 = num[i]
            if (nums[i] - 1 != i) {
                return i + 1;
            }
        }

        return len + 1;
    }

    private void swap(int[] nums, int index1, int index2) {
        if (index1 == index2) {
            return;
        }
        int temp = nums[index1];
        nums[index1] = nums[index2];
        nums[index2] = temp;
    }

    public static void main(String[] args) {
        Solution solution = new Solution();
        // int[] nums = {3, 4, -1, 5};
        int[] nums = {4, 3, 2, 1};
        int firstMissingPositive = solution.firstMissingPositive(nums);
        System.out.println(firstMissingPositive);
    }
}
```

**å¤æ‚åº¦åˆ†æ**ï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ï¼Œè¿™é‡Œ ğ‘N æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå…¶å®åªè¦çœ‹è¿™ä¸ªæ•°ç»„ä¸€éï¼Œå°±å¯ä»¥çŸ¥é“æ¯ä¸ªæ•°å­—åº”è¯¥æ”¾åœ¨å“ªä¸ªä½ç½®ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ ğ‘‚(ğ‘)O(N)ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ï¼Œæ¡¶æ’åºåœ¨åŸåœ°è¿›è¡Œï¼Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚

------

**è¡¥å……å†…å®¹**ï¼š

äº¤æ¢ä¸¤ä¸ªæ•´æ•°ï¼Œæœ‰ä¸¤ç§æ¯”è¾ƒ tricky çš„åšæ³•ã€‚ä¸‹é¢åªç»™å‡ºç»“è®ºï¼Œä¸ç»™å‡ºè§£é‡Šï¼ˆæˆ‘ä¹Ÿè§£é‡Šä¸äº†ï¼‰ã€‚

> äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼Œä¾‹å¦‚ a å’Œ bï¼Œä¸ä½¿ç”¨ç¬¬ä¸‰ä¸ªå˜é‡ï¼Œæœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ³•ï¼š

| åŸºäºå¼‚æˆ–è¿ç®—                                 | åŸºäºåŠ å‡æ³•                                    |
| :------------------------------------------- | :-------------------------------------------- |
| `a = a ^ b` <br>`b = a ^ b`<br/> `a = a ^ b` | `a = a + b` <br/>`b = a - b`<br/> `a = a - b` |

æˆ‘ç†è§£çš„æ–¹å¼å°±æ˜¯è‡ªå·±åœ¨çº¸ä¸Šå†™å‡ ä¸ªä¾‹å­ï¼Œå¹¶ä¸”è®°ä½è¿™ä¸ªç»“è®ºã€‚ä¸ªäººè§‰å¾—â€œåŸºäºå¼‚æˆ–è¿ç®—â€äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼å¥½è®°ä¸€äº›ï¼Œå› ä¸ºå³è¾¹éƒ½ä¸€æ ·ï¼Œå·¦è¾¹æ˜¯ `a`ã€`b`ã€`a`ã€‚

**å‚è€ƒä»£ç  2**ï¼šåŸºäºå¼‚æˆ–è¿ç®—äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ã€‚

Python ä»£ç ï¼š

python

```python
from typing import List


class Solution:
    def firstMissingPositive(self, nums: List[int]) -> int:

        size = len(nums)

        # é¢˜ç›®ä¸­ç»™å‡ºçš„ä¾‹å­ï¼Œå°±æ˜¯æœ€å¥½çš„ä¾‹å­
        # [3,4,-1,1]
        # [-1,4,3,1]
        # [-1,1,3,4]
        # 3 åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º 2 çš„åœ°æ–¹
        # 4 åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º 3 çš„åœ°æ–¹

        for i in range(size):

            # nums[i] > 0 and nums[i] <= size çš„æ„æ€æ˜¯ï¼šåªè¦æ˜¯ç¬¦åˆç´¢å¼•çš„æ•°å­—
            # è¿™é‡Œçš„ç´¢å¼•åº”è¯¥è®¤ä¸ºä» 1 å¼€å§‹
            # å°±è¦æŠŠå®ƒæ”¾åˆ°æ­£ç¡®çš„åœ°æ–¹ä¸Šå»ï¼Œè¿™ä¸€æ­¥å« hash
            # nums[i] == nums[nums[i]-1]ï¼Œå«æ”¾åˆ°äº†æ­£ç¡®çš„åœ°æ–¹
            # ä¾‹å¦‚ï¼Œ3 åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º 2 çš„åœ°æ–¹ï¼Œå¦‚æœä¸ç†è§£ï¼Œè¿™å¥è¯å¤šè¯»å‡ é

            # æ‰€ä»¥ï¼Œå…ˆåˆ¤æ–­è¿™ä¸ªæ•°å­—æ˜¯ä¸æ˜¯ç´¢å¼•
            # ç„¶ååˆ¤æ–­è¿™ä¸ªæ•°å­—æ˜¯ä¸æ˜¯æ”¾åœ¨äº†æ­£ç¡®çš„åœ°æ–¹

            while 1 <= nums[i] <= size and nums[i] != nums[nums[i] - 1]:
                # äº¤æ¢
                self.__swap(nums, i, nums[i] - 1)

        # print(nums)
        # å†éå†ä¸€æ¬¡ï¼Œæ²¡æœ‰æ”¾å¯¹çš„å°±æ˜¯ä½ è¦æ‰¾çš„
        for i in range(size):
            # valueï¼š [1,2,3,4]
            # indexï¼š [0,1,2,3]
            if i + 1 != nums[i]:
                return i + 1

        return size + 1

    def __swap(self, nums, index1, index2):
        # nums[index1], nums[index2] = nums[index2], nums[index1]
        nums[index1] = nums[index1] ^ nums[index2]
        nums[index2] = nums[index1] ^ nums[index2]
        nums[index1] = nums[index1] ^ nums[index2]
```

Java ä»£ç ï¼š

java

```java
public class Solution {

    // å…³é”®å­—ï¼šæ¡¶æ’åºï¼Œä»€ä¹ˆæ•°å­—å°±è¦æ”¾åœ¨å¯¹åº”çš„ç´¢å¼•ä¸Šï¼Œå…¶å®ƒç©ºç€å°±ç©ºç€
    // æœ€å¥½çš„ä¾‹å­ï¼š[3,4,-1,1]
    // æ•´ç†å¥½åº”è¯¥æ˜¯è¿™æ ·ï¼š[1,-1,3,4]ï¼Œ
    // è¿™é‡Œ 1ï¼Œ3ï¼Œ4 éƒ½åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šï¼Œ
    // -1 ä¸åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šï¼Œç´¢å¼•æ˜¯ 1 ï¼Œæ‰€ä»¥è¿”å› 2

    // [4,3,2,1] è¦å˜æˆ [1,2,3,4]ï¼Œ*** Offer ä¸Šæœ‰ç±»ä¼¼çš„é—®é¢˜ã€‚

    // è¿™é‡Œè´Ÿæ•°å’Œå¤§äºæ•°ç»„é•¿åº¦çš„æ•°éƒ½æ˜¯"æ£ä¹±é¡¹"ã€‚

    public int firstMissingPositive(int[] nums) {
        int len = nums.length;

        for (int i = 0; i < len; i++) {
            // å‰ä¸¤ä¸ªæ˜¯åœ¨åˆ¤æ–­æ˜¯å¦æˆä¸ºç´¢å¼•
            // åä¸€ä¸ªæ˜¯åœ¨åˆ¤æ–­ï¼Œä¾‹å¦‚ 3 åœ¨ä¸åœ¨ç´¢å¼• 2 ä¸Š
            // å³ nums[i] ?= nums[nums[i]-1] è¿™é‡Œè¦ç‰¹åˆ«å°å¿ƒ
            while (nums[i] > 0 && nums[i] <= len && nums[nums[i] - 1] != nums[i]) {
                // ç¬¬ 3 ä¸ªæ¡ä»¶ä¸æˆç«‹çš„ç´¢å¼•çš„éƒ¨åˆ†æ˜¯ i å’Œ nums[i]-1
                swap(nums, nums[i] - 1, i);
            }
        }

        // è°ƒè¯•ä»£ç 
        // System.out.println(Arrays.toString(nums));

        for (int i = 0; i < len; i++) {
            // [1,-2,3,4]
            // é™¤äº† -2 å…¶å®ƒéƒ½æ»¡è¶³ï¼š i+1 = num[i]
            if (nums[i] - 1 != i) {
                return i + 1;
            }
        }

        return len + 1;
    }

    private void swap(int[] nums, int index1, int index2) {
        nums[index1] = nums[index1] ^ nums[index2];
        nums[index2] = nums[index1] ^ nums[index2];
        nums[index1] = nums[index1] ^ nums[index2];
    }

    public static void main(String[] args) {
        Solution2 solution = new Solution2();
        // int[] nums = {3, 4, -1, 5};
        int[] nums = {4, 3, 2, 1};
        int firstMissingPositive = solution.firstMissingPositive(nums);
        System.out.println(firstMissingPositive);
    }
}
```

ï¼ˆæœ¬èŠ‚å®Œï¼‰

------

| é¢˜ç›®åœ°å€                                                     | é¢˜è§£                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°](https://leetcode-cn.com/problems/first-missing-positive/) | [æ¡¶æ’åºï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰](https://leetcode-cn.com/problems/first-missing-positive/solution/tong-pai-xu-python-dai-ma-by-liweiwei1419/) |

- æç¤ºï¼šç‚¹å‡»ä¸Šé¢çš„é¢˜è§£é“¾æ¥ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘åˆ¶ä½œçš„å¹»ç¯ç‰‡è½®æ’­å›¾ã€‚

è¿™é“é¢˜ä½¿ç”¨æ¡¶æ’åºçš„æ€è·¯ï¼Œå³ â€œä¸€ä¸ªèåœä¸€ä¸ªå‘â€ï¼Œå°±å¯ä»¥è§£å†³ã€‚å¯ä»¥å°±ä½¿ç”¨é¢˜ç›®ä¸­çš„ä¾‹å­ï¼Œåœ¨çº¸ä¸Šå†™å†™ç”»ç”»ï¼Œå°±èƒ½å¾—å‡ºæ€è·¯ï¼Œåªä¸è¿‡åœ¨ç¼–ç ä¸Šéœ€è¦æ³¨æ„ä¸€äº›ç»†èŠ‚ã€‚



![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°](https://liweiwei1419.github.io/images/leetcode-solution/41-9.png)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°**



ä¸‹é¢æ˜¯â€œæ¡¶æ’åºâ€è¿‡ç¨‹ã€‚



![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°](https://liweiwei1419.github.io/images/leetcode-solution/LeetCode-0041.gif)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°**



------

ä»¥ä¸‹æ˜¯ä¸Šé¢ gif å›¾çš„é™æ€å›¾ã€‚



![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-1](https://liweiwei1419.github.io/images/leetcode-solution/41-1.png)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-1**





![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-2](https://liweiwei1419.github.io/images/leetcode-solution/41-2.png)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-2**





![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-3](https://liweiwei1419.github.io/images/leetcode-solution/41-3.png)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-3**





![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-4](https://liweiwei1419.github.io/images/leetcode-solution/41-4.png)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-4**





![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-5](https://liweiwei1419.github.io/images/leetcode-solution/41-5.png)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-5**





![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-6](https://liweiwei1419.github.io/images/leetcode-solution/41-6.png)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-6**





![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-7](https://liweiwei1419.github.io/images/leetcode-solution/41-7.png)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-7**





![LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-8](https://liweiwei1419.github.io/images/leetcode-solution/41-8.png)

**LeetCode ç¬¬ 41 é¢˜ï¼šç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°-8**



å¦‚å›¾æ‰€ç¤ºï¼šæˆ‘ä»¬å¯ä»¥æŠŠæ•°ç»„è¿›è¡Œä¸€æ¬¡â€œæ’åºâ€ï¼Œâ€œæ’åºâ€çš„è§„åˆ™æ˜¯ï¼š**å¦‚æœè¿™ä¸ªæ•°å­— `i` è½åœ¨â€œåŒºé—´èŒƒå›´é‡Œâ€ï¼Œ`i` å°±åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º `i - 1` çš„ä½ç½®ä¸Š**ï¼Œä¸‹é¢å…·ä½“è§£é‡Šã€‚

1ã€æ•°å­— `i` è½åœ¨â€œåŒºé—´èŒƒå›´é‡Œâ€ï¼›

ä¾‹å¦‚ï¼š`[3, 4, -1, 1]`ï¼Œä¸€å…± 4 ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆå¦‚æœè¿™ä¸ªæ•°ç»„ä¸­å‡ºç° â€œ1â€ã€â€œ2â€ã€â€œ3â€ã€â€œ4â€ï¼Œå°±æ˜¯æˆ‘ä»¬é‡ç‚¹è¦å…³æ³¨çš„æ•°å­—äº†ï¼›
åˆä¾‹å¦‚ï¼š`[7, 8, 9, 11, 12]` ä¸€å…± 5 ä¸ªæ•°å­—ï¼Œæ¯ä¸€ä¸ªéƒ½ä¸æ˜¯ â€œ1â€ã€â€œ2â€ã€â€œ3â€ã€â€œ4â€ã€â€œ5â€ ä¸­çš„ä¸€ä¸ªï¼Œå› æ­¤æˆ‘ä»¬æ— é¡»å…³æ³¨å®ƒä»¬ï¼›

2ã€`i` å°±åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º`i - 1` çš„ä½ç½®ä¸Šï¼›

è¿™å¥è¯ä¹Ÿå¯ä»¥è¿™ä¹ˆè¯´ â€œ**ç´¢å¼•ä¸º `i` çš„ä½ç½®ä¸Šåº”è¯¥å­˜æ”¾çš„æ•°å­—æ˜¯ `i + 1`**â€ã€‚

å°±çœ‹ä¸Šé¢é‚£å¼ å›¾ï¼Œæ•°å­— 11 åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º 00 çš„ä½ç½®ä¸Šï¼Œæ•°å­— 33 åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º 22 çš„ä½ç½®ä¸Šï¼Œæ•°å­— 44 åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º 33 çš„ä½ç½®ä¸Šã€‚ä¸€ä¸ªæ•°å­—æ”¾åœ¨å®ƒåº”è¯¥æ”¾çš„ä½ç½®ä¸Šï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªä½ç½®æ˜¯â€œå’Œè°â€çš„ï¼Œçœ‹èµ·æ¥â€œé¡ºçœ¼â€çš„ã€‚

æŒ‰ç…§ä»¥ä¸Šè§„åˆ™æ’å¥½åºä»¥åï¼Œç¼ºå¤±çš„ç¬¬ 11 ä¸ªæ­£æ•°ä¸€ä¸‹å­å°±çœ‹å‡ºæ¥äº†ï¼Œé‚£ä¹ˆâ€œæœ€ä¸å’Œè°â€çš„æ•°å­—çš„ç´¢å¼• +1+1ï¼Œå°±ä¸ºæ‰€æ±‚ã€‚é‚£å¦‚æœæ‰€æœ‰çš„æ•°å­—éƒ½ä¸â€œå’Œè°â€ï¼Œæ•°ç»„çš„é•¿åº¦ +1+1 å°±ä¸ºæ‰€æ±‚ã€‚

Python ä»£ç ï¼š

Python

```Python
class Solution:
    def firstMissingPositive(self, nums: List[int]) -> int:

        size = len(nums)
        if size == 0:
            return 1

        for i in range(size):

            while nums[i] > 0 and nums[i] <= size:
                if nums[nums[i] - 1] == nums[i]:
                    # å¦‚æœå·²ç»åœ¨åˆé€‚çš„ä½ç½®ä¸Šï¼Œå°±ä¸ç”¨äº¤æ¢äº†
                    break
                # è¿™é‡Œæˆ‘å•ç‹¬æŠŠäº¤æ¢æ•°ç»„ä¸¤ä¸ªä½ç½®çš„æ–¹æ³•å°è£…èµ·æ¥ï¼Œæ˜¯ä¸ºäº†ä¸è®©è‡ªå·±å‡ºé”™ï¼Œè¿™ä¸€è¡Œä»£ç æœ‰ç‚¹ç»•
                # å°±è¦æŠŠå®ƒæ”¾åˆ°åˆé€‚çš„ä½ç½®ä¸Šï¼Œi åº”è¯¥æ”¾åœ¨ç´¢å¼•ä¸º i - 1 çš„ä½ç½®ä¸Š
                self.__swap(nums, i , nums[i] - 1)


        # ä»å¤´åˆ°å°¾çœ‹ä¸€é
        for i in range(size):
            if nums[i] != i + 1:
                return i + 1
        return size + 1


    def __swap(self, nums, index1, index2):
        if index1 == index2:
            return
        nums[index1], nums[index2] = nums[index2], nums[index1]  
```

Java ä»£ç ï¼š





Java

```Java
import java.util.Arrays;

public class Solution {

    // å…³é”®å­—ï¼šæ¡¶æ’åºï¼Œä»€ä¹ˆæ•°å­—å°±è¦æ”¾åœ¨å¯¹åº”çš„ç´¢å¼•ä¸Šï¼Œå…¶å®ƒç©ºç€å°±ç©ºç€
    // æœ€å¥½çš„ä¾‹å­ï¼š[3,4,-1,1]
    // æ•´ç†å¥½åº”è¯¥æ˜¯è¿™æ ·ï¼š[1,-1,3,4]ï¼Œ
    // è¿™é‡Œ 1ï¼Œ3ï¼Œ4 éƒ½åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šï¼Œ
    // -1 ä¸åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šï¼Œç´¢å¼•æ˜¯ 1 ï¼Œæ‰€ä»¥è¿”å› 2

    // [4,3,2,1] è¦å˜æˆ [1,2,3,4]ï¼Œ*** Offer ä¸Šæœ‰ç±»ä¼¼çš„é—®é¢˜ã€‚

    // è¿™é‡Œè´Ÿæ•°å’Œå¤§äºæ•°ç»„é•¿åº¦çš„æ•°éƒ½æ˜¯"æ£ä¹±é¡¹"ã€‚

    public int firstMissingPositive(int[] nums) {
        int len = nums.length;

        for (int i = 0; i < len; i++) {
            // å‰ä¸¤ä¸ªæ˜¯åœ¨åˆ¤æ–­æ˜¯å¦æˆä¸ºç´¢å¼•
            // åä¸€ä¸ªæ˜¯åœ¨åˆ¤æ–­ï¼Œä¾‹å¦‚ 3 åœ¨ä¸åœ¨ç´¢å¼• 2 ä¸Š
            // å³ nums[i] ?= nums[nums[i]-1] è¿™é‡Œè¦ç‰¹åˆ«å°å¿ƒ
            while (nums[i] > 0 && nums[i] <= len && nums[nums[i] - 1] != nums[i]) {
                // ç¬¬ 3 ä¸ªæ¡ä»¶ä¸æˆç«‹çš„ç´¢å¼•çš„éƒ¨åˆ†æ˜¯ i å’Œ nums[i]-1
                swap(nums, nums[i] - 1, i);
            }
        }

        // è°ƒè¯•ä»£ç 
        // System.out.println(Arrays.toString(nums));

        for (int i = 0; i < len; i++) {
            // [1,-2,3,4]
            // é™¤äº† -2 å…¶å®ƒéƒ½æ»¡è¶³ï¼š i+1 = num[i]
            if (nums[i] - 1 != i) {
                return i + 1;
            }
        }

        return len + 1;
    }

    private void swap(int[] nums, int index1, int index2) {
        if (index1 == index2) {
            return;
        }
        int temp = nums[index1];
        nums[index1] = nums[index2];
        nums[index2] = temp;
    }

    public static void main(String[] args) {
        Solution solution = new Solution();
        // int[] nums = {3, 4, -1, 5};
        int[] nums = {4, 3, 2, 1};
        int firstMissingPositive = solution.firstMissingPositive(nums);
        System.out.println(firstMissingPositive);
    }
}
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ï¼Œè¿™é‡Œ ğ‘N æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå…¶å®åªè¦çœ‹è¿™ä¸ªæ•°ç»„ä¸€éï¼Œå°±å¯ä»¥çŸ¥é“æ¯ä¸ªæ•°å­—åº”è¯¥æ”¾åœ¨å“ªä¸ªä½ç½®ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ ğ‘‚(ğ‘)O(N)ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ï¼Œæ¡¶æ’åºåœ¨åŸåœ°è¿›è¡Œï¼Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚