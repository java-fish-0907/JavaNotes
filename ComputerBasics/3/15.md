## ã€ŒåŠ›æ‰£ã€ç¬¬ 215 é¢˜ï¼šæ•°ç»„ç¬¬ k å¤§çš„å…ƒç´ 

- ä¸­æ–‡ç½‘å€ï¼š[215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode-cn.com/problems/kth-largest-element-in-an-array/description/) ï¼›
- è‹±æ–‡ç½‘å€ï¼š[215. Kth Largest Element in an Array](https://leetcode.com/problems/kth-largest-element-in-an-array/description/) ã€‚

> åœ¨æœªæ’åºçš„æ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ **k** ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚
>
> **ç¤ºä¾‹ 1:**
>
> ```
> è¾“å…¥: [3,2,1,5,6,4] å’Œ k = 2
> è¾“å‡º: 5
> ```
>
> **ç¤ºä¾‹ 2:**
>
> ```
> è¾“å…¥: [3,2,3,1,2,4,5,5,6] å’Œ k = 4
> è¾“å‡º: 4
> ```
>
> **è¯´æ˜:**
>
> ä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œä¸” 1 â‰¤ k â‰¤ æ•°ç»„çš„é•¿åº¦ã€‚

æ€è·¯1ï¼šæ’åºï¼Œç„¶åè¿”å›å€’æ•°ç¬¬ ğ‘˜k ä¸ªå…ƒç´ ï¼Œç´¢å¼•æ˜¯ ğ‘›âˆ’ğ‘˜nâˆ’kï¼›

æ€è·¯2ï¼špartition ï¼Œé€æ¸å‡å°‘æœç´¢çš„èŒƒå›´ï¼Œpartition çš„æ ¸å¿ƒæ˜¯å¤§äºç­‰äºçš„æ”¾è¿‡ï¼Œå°äºçš„æ‰åšæ“ä½œï¼Œ**å› ä¸ºè¦è®©å°äºçš„æŒªåˆ°å‰é¢å»ï¼Œè¿˜èƒ½ä¿è¯å…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¸å˜**ï¼› æ³¨æ„ä¸€äº›è¾¹è¾¹è§’è§’çš„ç»†èŠ‚ï¼Œ`+1` å’Œ `-1` è¦ç‰¹åˆ«å°å¿ƒã€‚

Python ä»£ç ï¼špartition çš„è¿‡ç¨‹ä¸€å®šè¦åœ¨ç†è§£çš„åŸºç¡€ä¸Šï¼Œç†Ÿè®°

python

```python
# 215. æ•°ç»„ä¸­çš„ç¬¬ K ä¸ªæœ€å¤§å…ƒç´ 
# åœ¨æœªæ’åºçš„æ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚
# è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚
class Solution:

    # æ•°ç»„ä¸­çš„ç¬¬ K ä¸ªæœ€å¤§å…ƒç´ 
    # æ•°ç»„ä¸­ç¬¬ k å¤§çš„å…ƒç´ ï¼Œå®ƒçš„ç´¢å¼•æ˜¯ len(nums) - k
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """

        size = len(nums)

        if size < k:
            raise Exception('ç¨‹åºå‡ºé”™')
            # [0,1,2,3,4,5]

        # ç¬¬ k å¤§å…ƒç´ çš„ç´¢å¼•æ˜¯ len(nums) - k
        left = 0
        right = len(nums) - 1

        while True:
            index = self.__partition(nums, left, right)
            if index == len(nums) - k:
                return nums[index]
            if index > len(nums) - k:
                right = index - 1
            else:
                left = index + 1

    def __partition(self, nums, left, right):
        """
        partition æ˜¯å¿…é¡»è¦ä¼šçš„å­æ­¥éª¤ï¼Œä¸€å®šè¦éå¸¸ç†Ÿç»ƒ
        åœ¨ [left, right] è¿™ä¸ªåŒºé—´æ‰§è¡Œ partition
        é‡åˆ°æ¯”ç¬¬ä¸€ä¸ªå…ƒç´ å¤§çš„æˆ–ç­‰äºçš„ï¼Œå°±æ”¾è¿‡ï¼Œé‡åˆ°å°çš„ï¼Œå°±äº¤æ¢
        :param nums:
        :param left:
        :param right:
        :return:
        """
        pivot = nums[left]
        k = left
        for index in range(left + 1, right + 1):
            if nums[index] < pivot:
                k += 1
                nums[k], nums[index] = nums[index], nums[k]
        nums[left], nums[k] = nums[k], nums[left]
        return k


if __name__ == '__main__':
    nums = [3, 7, 8, 1, 2, 4]
    solution = Solution()
    result = solution.findKthLargest(nums, 2)
    print(result)
```

æ€è·¯3ï¼šä½¿ç”¨å †ã€‚

Python ä»£ç 1ï¼šä½¿ç”¨å®¹é‡ä¸º k çš„å°é¡¶å †ï¼Œå…ƒç´ ä¸ªæ•°å°äº k çš„æ—¶å€™ï¼Œæ”¾è¿›å»å°±æ˜¯äº†ï¼›å…ƒç´ ä¸ªæ•°å¤§äº k çš„æ—¶å€™ï¼Œå°äºå †é¡¶å…ƒç´ ï¼Œå°±æ‰”æ‰ï¼Œå¤§äºå †é¡¶å…ƒç´ ï¼Œå°±æ›¿æ¢ã€‚

python

```python
import heapq


class Solution(object):
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """

        size = len(nums)
        if k > size:
            raise Exception('ç¨‹åºå‡ºé”™')

        # å †æœ‰åºæ•°ç»„
        h = []

        for num in nums:
            if len(h) < k:
                heapq.heappush(h, num)
            else:
                if num < h[0]:
                    pass
                else:
                    heapq.heappushpop(h, num)
        return h[0]
```

Python ä»£ç 2ï¼šä¸ Python ä»£ç 1 ç­‰ä»·çš„å†™æ³•

python

```python
import heapq


# è¿˜å¯ä»¥å‚è€ƒï¼šhttps://leetcode.com/problems/kth-largest-element-in-an-array/discuss/167837/Python-or-tm

class Solution(object):
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """
        L = []
        for index in range(k):
            # é»˜è®¤æ˜¯æœ€å°å †
            heapq.heappush(L, nums[index])
        for index in range(k, len(nums)):
            top = L[0]
            if nums[index] > top:
                # çœ‹ä¸€çœ‹å †é¡¶çš„å…ƒç´ ï¼Œåªè¦æ¯”å †é¡¶å…ƒç´ å¤§ï¼Œå°±æ›¿æ¢å †é¡¶å…ƒç´ 
                heapq.heapreplace(L, nums[index])
        # æœ€åå †é¡¶ä¸­çš„å…ƒç´ å°±æ˜¯å †ä¸­æœ€å°çš„ï¼Œæ•´ä¸ªæ•°ç»„ä¸­çš„ç¬¬ k å¤§å…ƒç´ 
        return L[0]
```

Python ä»£ç 3ï¼šä½¿ç”¨å¤§é¡¶å †ï¼Œå…¨éƒ¨æ”¾è¿›å»ä»¥åï¼Œå†å¾€å¤– pop

python

```python
import heapq


class Solution(object):
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """
        l = [(-num, num) for num in nums]
        heapq.heapify(l)
        for _ in range(k - 1):
            heapq.heappop(l)
        return l[0][1]
```

è¯´æ˜ï¼š**Python ä¸­çš„ heapq å¯ä»¥ä¼ å…¥ tupleï¼Œheapq ä¼šæ ¹æ® tuple çš„ 0 å·ç´¢å¼•å…ƒç´ è¿›è¡Œå †çš„æ“ä½œ**ã€‚

Python ä»£ç 4ï¼šä¸ Python ä»£ç  3 ç­‰ä»·çš„å†™æ³•

python

```python
import heapq


class Solution(object):
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """
        l = [(-num, num) for num in nums]
        heapq.heapify(l)
        for _ in range(k):
            _, res = heapq.heappop(l)
        return res
```

ï¼ˆæœ¬èŠ‚å®Œï¼‰

------

é¢˜è§£ï¼š[é€šè¿‡ partition å‡æ²» + ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆJavaã€C++ã€Pythonï¼‰](https://leetcode-cn.com/problems/kth-largest-element-in-an-array/solution/partitionfen-er-zhi-zhi-you-xian-dui-lie-java-dai-/)

ä¼ é€é—¨ï¼š[215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode-cn.com/problems/kth-largest-element-in-an-array/)ã€‚

ä¼ é€é—¨ï¼šè‹±æ–‡ç½‘å€ï¼š[215. Kth Largest Element in an Array](https://leetcode.com/problems/kth-largest-element-in-an-array/description/) ï¼Œä¸­æ–‡ç½‘å€ï¼š[215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode-cn.com/problems/kth-largest-element-in-an-array/description/) ã€‚

> åœ¨æœªæ’åºçš„æ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ **k** ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚
>
> **ç¤ºä¾‹ 1:**
>
> ```
> è¾“å…¥: [3,2,1,5,6,4] å’Œ k = 2
> è¾“å‡º: 5
> ```
>
> **ç¤ºä¾‹ 2:**
>
> ```
> è¾“å…¥: [3,2,3,1,2,4,5,5,6] å’Œ k = 4
> è¾“å‡º: 4
> ```
>
> **è¯´æ˜:**
>
> ä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œä¸” 1 â‰¤ k â‰¤ æ•°ç»„çš„é•¿åº¦ã€‚

è¿™é“é¢˜åº”è¯¥è¯´æ˜¯æ— æ¯”é‡è¦çš„é«˜é¢‘è€ƒé¢˜ï¼Œæ˜¯ä¸€å®šè¦æŒæ¡çš„ã€‚

ä¸¤ç§æ€è·¯åˆ†åˆ«ä½¿ç”¨äº†å¾ˆåŸºç¡€çš„æ•°æ®ç»“æ„ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰å’Œç®—æ³•ï¼ˆpartitionï¼‰ã€‚

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¿«é€Ÿæ’åº partition çš„æ€è·¯

Python ä»£ç ï¼š

python

```python
class Solution:

    # æ•°ç»„ä¸­çš„ç¬¬ K ä¸ªæœ€å¤§å…ƒç´ 
    # æ•°ç»„ä¸­ç¬¬ k å¤§çš„å…ƒç´ ï¼Œå®ƒçš„ç´¢å¼•æ˜¯ len(nums) - k
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """

        left = 0
        right = len(nums) - 1

        while True:
            index = self.__partition(nums, left, right)
            if index == len(nums) - k:
                return nums[index]
            if index > len(nums) - k:
                right = index - 1
            else:
                left = index + 1

    def __partition(self, nums, left, right):
        """
        partition æ˜¯å¿…é¡»è¦ä¼šçš„å­æ­¥éª¤ï¼Œä¸€å®šè¦éå¸¸ç†Ÿç»ƒ
        å…¸å‹çš„ä¾‹å­å°±æ˜¯ï¼š[3,7,8,1,2,4]
        é‡åˆ°æ¯”ç¬¬ä¸€ä¸ªå…ƒç´ å¤§çš„æˆ–ç­‰äºçš„ï¼Œå°±æ”¾è¿‡ï¼Œé‡åˆ°å°çš„ï¼Œå°±äº¤æ¢
        åœ¨ [left,right] è¿™ä¸ªåŒºé—´æ‰§è¡Œ partition
        :param nums:
        :param left:
        :param right:
        :return:
        """
        pivot = nums[left]
        k = left
        for index in range(left + 1, right + 1):
            if nums[index] < pivot:
                k += 1
                nums[k], nums[index] = nums[index], nums[k]
        nums[left], nums[k] = nums[k], nums[left]
        return k


if __name__ == '__main__':
    nums = [3, 7, 8, 1, 2, 4]
    solution = Solution()
    result = solution.findKthLargest(nums, 2)
    print(result)
```

### è§£æ³•2ï¼šä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—

Python ä»£ç ï¼š

python

```python
import heapq

class Solution(object):
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """
        L = []
        for index in range(k):
            # é»˜è®¤æ˜¯æœ€å°å †
            heapq.heappush(L, nums[index])
        for index in range(k, len(nums)):
            top = L[0]
            if nums[index] > top:
                # çœ‹ä¸€çœ‹å †é¡¶çš„å…ƒç´ ï¼Œåªè¦æ¯”å †é¡¶å…ƒç´ å¤§ï¼Œå°±æ›¿æ¢å †é¡¶å…ƒç´ 
                heapq.heapreplace(L, nums[index])
        # æœ€åå †é¡¶ä¸­çš„å…ƒç´ å°±æ˜¯å †ä¸­æœ€å°çš„ï¼Œæ•´ä¸ªæ•°ç»„ä¸­çš„ç¬¬ k å¤§å…ƒç´ 
        return L[0]


if __name__ == '__main__':
    nums = [3, 7, 8, 1, 2, 4]
    solution = Solution()
    result = solution.findKthLargest(nums, 2)
    print(result)
```

# 

æ€è·¯1ï¼šæ’åºï¼Œç„¶åè¿”å›å€’æ•°ç¬¬ ğ‘˜k ä¸ªå…ƒç´ ï¼Œç´¢å¼•æ˜¯ ğ‘›âˆ’ğ‘˜nâˆ’kï¼›

æ€è·¯2ï¼špartition ï¼Œé€æ¸å‡å°‘æœç´¢çš„èŒƒå›´ï¼Œpartition çš„æ ¸å¿ƒæ˜¯å¤§äºç­‰äºçš„æ”¾è¿‡ï¼Œå°äºçš„æ‰åšæ“ä½œï¼Œ**å› ä¸ºè¦è®©å°äºçš„æŒªåˆ°å‰é¢å»ï¼Œè¿˜èƒ½ä¿è¯å…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¸å˜**ï¼› æ³¨æ„ä¸€äº›è¾¹è¾¹è§’è§’çš„ç»†èŠ‚ï¼Œ`+1` å’Œ `-1` è¦ç‰¹åˆ«å°å¿ƒã€‚

Python ä»£ç ï¼špartition çš„è¿‡ç¨‹ä¸€å®šè¦åœ¨ç†è§£çš„åŸºç¡€ä¸Šï¼Œç†Ÿè®°

python

```python
# 215. æ•°ç»„ä¸­çš„ç¬¬ K ä¸ªæœ€å¤§å…ƒç´ 
# åœ¨æœªæ’åºçš„æ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚
# è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚
class Solution:

    # æ•°ç»„ä¸­çš„ç¬¬ K ä¸ªæœ€å¤§å…ƒç´ 
    # æ•°ç»„ä¸­ç¬¬ k å¤§çš„å…ƒç´ ï¼Œå®ƒçš„ç´¢å¼•æ˜¯ len(nums) - k
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """

        size = len(nums)

        if size < k:
            raise Exception('ç¨‹åºå‡ºé”™')
            # [0,1,2,3,4,5]

        # ç¬¬ k å¤§å…ƒç´ çš„ç´¢å¼•æ˜¯ len(nums) - k
        left = 0
        right = len(nums) - 1

        while True:
            index = self.__partition(nums, left, right)
            if index == len(nums) - k:
                return nums[index]
            if index > len(nums) - k:
                right = index - 1
            else:
                left = index + 1

    def __partition(self, nums, left, right):
        """
        partition æ˜¯å¿…é¡»è¦ä¼šçš„å­æ­¥éª¤ï¼Œä¸€å®šè¦éå¸¸ç†Ÿç»ƒ
        åœ¨ [left, right] è¿™ä¸ªåŒºé—´æ‰§è¡Œ partition
        é‡åˆ°æ¯”ç¬¬ä¸€ä¸ªå…ƒç´ å¤§çš„æˆ–ç­‰äºçš„ï¼Œå°±æ”¾è¿‡ï¼Œé‡åˆ°å°çš„ï¼Œå°±äº¤æ¢
        :param nums:
        :param left:
        :param right:
        :return:
        """
        pivot = nums[left]
        k = left
        for index in range(left + 1, right + 1):
            if nums[index] < pivot:
                k += 1
                nums[k], nums[index] = nums[index], nums[k]
        nums[left], nums[k] = nums[k], nums[left]
        return k


if __name__ == '__main__':
    nums = [3, 7, 8, 1, 2, 4]
    solution = Solution()
    result = solution.findKthLargest(nums, 2)
    print(result)
```

æ€è·¯3ï¼šä½¿ç”¨å †ã€‚

Python ä»£ç 1ï¼šä½¿ç”¨å®¹é‡ä¸º k çš„å°é¡¶å †ï¼Œå…ƒç´ ä¸ªæ•°å°äº k çš„æ—¶å€™ï¼Œæ”¾è¿›å»å°±æ˜¯äº†ï¼›å…ƒç´ ä¸ªæ•°å¤§äº k çš„æ—¶å€™ï¼Œå°äºå †é¡¶å…ƒç´ ï¼Œå°±æ‰”æ‰ï¼Œå¤§äºå †é¡¶å…ƒç´ ï¼Œå°±æ›¿æ¢ã€‚

python

```python
import heapq


class Solution(object):
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """

        size = len(nums)
        if k > size:
            raise Exception('ç¨‹åºå‡ºé”™')

        # å †æœ‰åºæ•°ç»„
        h = []

        for num in nums:
            if len(h) < k:
                heapq.heappush(h, num)
            else:
                if num < h[0]:
                    pass
                else:
                    heapq.heappushpop(h, num)
        return h[0]
```

Python ä»£ç 2ï¼šä¸ Python ä»£ç 1 ç­‰ä»·çš„å†™æ³•





python

```python
import heapq


# è¿˜å¯ä»¥å‚è€ƒï¼šhttps://leetcode.com/problems/kth-largest-element-in-an-array/discuss/167837/Python-or-tm

class Solution(object):
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """
        L = []
        for index in range(k):
            # é»˜è®¤æ˜¯æœ€å°å †
            heapq.heappush(L, nums[index])
        for index in range(k, len(nums)):
            top = L[0]
            if nums[index] > top:
                # çœ‹ä¸€çœ‹å †é¡¶çš„å…ƒç´ ï¼Œåªè¦æ¯”å †é¡¶å…ƒç´ å¤§ï¼Œå°±æ›¿æ¢å †é¡¶å…ƒç´ 
                heapq.heapreplace(L, nums[index])
        # æœ€åå †é¡¶ä¸­çš„å…ƒç´ å°±æ˜¯å †ä¸­æœ€å°çš„ï¼Œæ•´ä¸ªæ•°ç»„ä¸­çš„ç¬¬ k å¤§å…ƒç´ 
        return L[0]
```

Python ä»£ç 3ï¼šä½¿ç”¨å¤§é¡¶å †ï¼Œå…¨éƒ¨æ”¾è¿›å»ä»¥åï¼Œå†å¾€å¤– pop





python

```python
import heapq


class Solution(object):
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """
        l = [(-num, num) for num in nums]
        heapq.heapify(l)
        for _ in range(k - 1):
            heapq.heappop(l)
        return l[0][1]
```

è¯´æ˜ï¼š**Python ä¸­çš„ heapq å¯ä»¥ä¼ å…¥ tupleï¼Œheapq ä¼šæ ¹æ® tuple çš„ 0 å·ç´¢å¼•å…ƒç´ è¿›è¡Œå †çš„æ“ä½œ**ã€‚

Python ä»£ç 4ï¼šä¸ Python ä»£ç  3 ç­‰ä»·çš„å†™æ³•

python

```python
import heapq


class Solution(object):
    def findKthLargest(self, nums, k):
        """
        :type nums: List[int]
        :type k: int
        :rtype: int
        """
        l = [(-num, num) for num in nums]
        heapq.heapify(l)
        for _ in range(k):
            _, res = heapq.heappop(l)
        return res
```

ï¼ˆæœ¬èŠ‚å®Œï¼‰