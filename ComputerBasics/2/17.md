## ã€ŒåŠ›æ‰£ã€ç¬¬ 1095 é¢˜ï¼šå±±è„‰æ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼ï¼ˆå›°éš¾ï¼‰

é¢˜è§£åœ°å€ï¼š[ååˆ†å¥½ç”¨çš„äºŒåˆ†æŸ¥æ‰¾æ³•æ¨¡æ¿ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰](https://leetcode-cn.com/problems/find-in-mountain-array/solution/shi-yong-chao-hao-yong-de-er-fen-fa-mo-ban-python-/)ã€‚

è¯´æ˜ï¼šæ–‡æœ¬é¦–å‘åœ¨åŠ›æ‰£çš„é¢˜è§£ç‰ˆå—ï¼Œæ›´æ–°ä¹Ÿä¼šåœ¨ç¬¬ 1 æ—¶é—´åœ¨ä¸Šé¢çš„ç½‘ç«™ä¸­æ›´æ–°ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯ä¸Šé¢çš„æ–‡ç« çš„ä¸€ä¸ªå¿«ç…§ï¼Œæ‚¨å¯ä»¥ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥çœ‹åˆ°å…¶ä»–ç½‘å‹å¯¹æœ¬æ–‡çš„è¯„è®ºã€‚

ä¼ é€é—¨ï¼š[1095. å±±è„‰æ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼](https://leetcode-cn.com/problems/find-in-mountain-array/)ã€‚

> ï¼ˆè¿™æ˜¯ä¸€ä¸ª äº¤äº’å¼é—®é¢˜ ï¼‰
>
> ç»™ä½ ä¸€ä¸ª å±±è„‰æ•°ç»„ `mountainArr`ï¼Œè¯·ä½ è¿”å›èƒ½å¤Ÿä½¿å¾— `mountainArr.get(index)` ç­‰äº target æœ€å° çš„ä¸‹æ ‡ index å€¼ã€‚
>
> å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ä¸‹æ ‡ `index`ï¼Œå°±è¯·è¿”å› `-1`ã€‚
>
> æ‰€è°“å±±è„‰æ•°ç»„ï¼Œå³æ•°ç»„ `A` å‡å¦‚æ˜¯ä¸€ä¸ªå±±è„‰æ•°ç»„çš„è¯ï¼Œéœ€è¦æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š
>
> é¦–å…ˆï¼Œ`A.length >= 3`
>
> å…¶æ¬¡ï¼Œåœ¨ `0 < i < A.length - 1` æ¡ä»¶ä¸‹ï¼Œå­˜åœ¨ i ä½¿å¾—ï¼š
>
> - `A[0] < A[1] < ... A[i-1] < A[i]`
> - `A[i] > A[i+1] > ... > A[A.length - 1]`
>
> ä½ å°† ä¸èƒ½ç›´æ¥è®¿é—®è¯¥å±±è„‰æ•°ç»„ï¼Œå¿…é¡»é€šè¿‡ MountainArray æ¥å£æ¥è·å–æ•°æ®ï¼š
>
> - `MountainArray.get(k)` - ä¼šè¿”å›æ•°ç»„ä¸­ç´¢å¼•ä¸ºk çš„å…ƒç´ ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰
> - `MountainArray.length()` - ä¼šè¿”å›è¯¥æ•°ç»„çš„é•¿åº¦
>
> **æ³¨æ„**ï¼š
>
> å¯¹ `MountainArray.get` å‘èµ·è¶…è¿‡ `100` æ¬¡è°ƒç”¨çš„æäº¤å°†è¢«è§†ä¸ºé”™è¯¯ç­”æ¡ˆã€‚æ­¤å¤–ï¼Œä»»ä½•è¯•å›¾è§„é¿åˆ¤é¢˜ç³»ç»Ÿçš„è§£å†³æ–¹æ¡ˆéƒ½å°†ä¼šå¯¼è‡´æ¯”èµ›èµ„æ ¼è¢«å–æ¶ˆã€‚
>
> ä¸ºäº†å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£äº¤äº’å¼é—®é¢˜ï¼Œæˆ‘ä»¬å‡†å¤‡äº†ä¸€ä¸ªæ ·ä¾‹ â€œç­”æ¡ˆâ€ï¼šhttps://leetcode-cn.com/playground/RKhe3aveï¼Œè¯·æ³¨æ„è¿™ ä¸æ˜¯ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆã€‚
>
> ç¤ºä¾‹ 1ï¼š
>
> ```
> è¾“å…¥ï¼šarray = [1,2,3,4,5,3,1], target = 3
> è¾“å‡ºï¼š2
> è§£é‡Šï¼š3 åœ¨æ•°ç»„ä¸­å‡ºç°äº†ä¸¤æ¬¡ï¼Œä¸‹æ ‡åˆ†åˆ«ä¸º 2 å’Œ 5ï¼Œæˆ‘ä»¬è¿”å›æœ€å°çš„ä¸‹æ ‡ 2ã€‚
> ```
>
> ç¤ºä¾‹ 2ï¼š
>
> ```
> è¾“å…¥ï¼šarray = [0,1,2,4,2,1], target = 3
> è¾“å‡ºï¼š-1
> è§£é‡Šï¼š3 åœ¨æ•°ç»„ä¸­æ²¡æœ‰å‡ºç°ï¼Œè¿”å› -1ã€‚
> ```
>
> æç¤ºï¼š
>
> - `3 <= mountain_arr.length() <= 10000`
> - `0 <= target <= 10^9`
> - `0 <= mountain_arr.get(index) <= 10^9`

## ååˆ†å¥½ç”¨çš„äºŒåˆ†æŸ¥æ‰¾æ³•æ¨¡æ¿ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰

æ ¹æ®é¢˜æ„ï¼Œåˆ†æå¦‚ä¸‹ï¼š

1ã€ç†è§£â€œå±±è„‰æ•°ç»„â€ï¼Œâ€œå±±è„‰æ•°ç»„â€å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯â€œå‰æœ‰åºæ•°ç»„â€ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯â€œåæœ‰åºæ•°ç»„â€ï¼Œâ€œå‰æœ‰åºæ•°ç»„â€æ˜¯å‡åºæ•°ç»„ï¼Œâ€œåæœ‰åºæ•°ç»„â€æ˜¯é™åºæ•°ç»„ã€‚

2ã€é¢˜ç›®è¿˜å‘Šè¯‰æˆ‘ä»¬â€œå¯¹ `MountainArray.get` å‘èµ·è¶…è¿‡ `100` æ¬¡è°ƒç”¨çš„æäº¤å°†è¢«è§†ä¸ºé”™è¯¯ç­”æ¡ˆâ€ï¼Œå°±åœ¨ç–¯ç‹‚æš—ç¤ºä½ ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä½çš„ç®—æ³•ï¼Œå¯¹äºæœ‰åºæ•°ç»„å½“ç„¶ä½¿ç”¨â€œäºŒåˆ†æŸ¥æ‰¾æ³•â€ã€‚

### æ–¹æ³•ï¼šäºŒåˆ†æŸ¥æ‰¾æ³•

è‡ªç„¶åœ°ï¼Œæ±‚è§£è¿™é“é¢˜å¯ä»¥åˆ†ä¸º 3 æ­¥ï¼š

ç¬¬ 1 æ­¥ï¼šå…ˆæ‰¾åˆ°å±±é¡¶å…ƒç´  mountaintop æ‰€åœ¨çš„ç´¢å¼•ã€‚

> è¯´åˆ° mountaintopï¼Œä½ æ˜¯ä¸æ˜¯è·Ÿæˆ‘ä¸€æ ·ï¼Œå¾ˆæƒ³å”±èµ·æ¥ï¼šâ€œmountaintopï¼Œå°±æˆ‘ä¸€èµ·æ¥â€ï¼Œå˜»å˜»å˜» ^_^ ï¼Œè°ƒçš®ä¸€ä¸‹ã€‚

ç¬¬ 2 æ­¥ï¼šåœ¨å‰æœ‰åºä¸”å‡åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œå°±è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æ‰§è¡Œç¬¬ 3 æ­¥ï¼›

ç¬¬ 3 æ­¥ï¼šå¦‚æœæ­¥éª¤ 2 æ‰¾ä¸åˆ°ï¼Œå°±åœ¨åæœ‰åºä¸”é™åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•ã€‚

> **æ³¨æ„ï¼š** å…·ä½“ç¼–ç å®ç°çš„æ—¶å€™ï¼Œæ¯ä¸€æ­¥å†™ä¸€ä¸ªè¾…åŠ©æ–¹æ³•å°±å¯ä»¥äº†ã€‚è¿™ 3 ä¸ªè¾…åŠ©æ–¹æ³•éƒ½æ˜¯äºŒåˆ†æŸ¥æ‰¾æ³•ã€‚

åœ¨è¿™é‡Œæˆ‘è¦å‘ä½ å¼ºçƒˆæ¨èæˆ‘ä½¿ç”¨äº†å¾ˆä¹…çš„äºŒåˆ†æŸ¥æ‰¾æ³•æ¨¡æ¿ã€‚æˆ‘ä¸“é—¨æŠŠè¿™ä¸ªäºŒåˆ†æ³•æ¨¡æ¿å¥½ç”¨çš„åœ°æ–¹ã€ä½¿ç”¨å®ƒçš„æŠ€å·§å’Œæ³¨æ„äº‹é¡¹æ•´ç†åœ¨äº†ã€ŒåŠ›æ‰£ ã€ç¬¬ 35 é¢˜ï¼šæœç´¢æ’å…¥ä½ç½®çš„é¢˜è§£[ã€Šç‰¹åˆ«å¥½ç”¨çš„äºŒåˆ†æŸ¥æ‰¾æ³•æ¨¡æ¿ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰ã€‹](https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/)ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚

å¦‚æœä½ ä¼šäº†è¿™ä¸ªæ¨¡æ¿ï¼Œä½ å°±ä¼šå‘ç°ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿ï¼Œå†™å‡ºæ¥çš„ 3 ä¸ªè¾…åŠ©æ–¹æ³•çš„åˆ†æ”¯é€»è¾‘å‡ºå¥‡åœ°ä¸€æ ·ï¼Œåœ¨å–ä¸­ä½æ•°çš„æ—¶å€™ï¼Œéƒ½å–å·¦ä¸­ä½æ•°ï¼Œæ‰ä¸ä¼šå‘ç”Ÿæ­»å¾ªç¯ã€‚

ä¸‹é¢ç»™å‡ºçš„å‚è€ƒä»£ç åŒ…æ‹¬äº†æŠ½è±¡ç±»ï¼ˆæ¥å£ï¼‰å’Œæˆ‘çš„ç®€å•å®ç°ç±»ï¼Œè¿˜æœ‰ä¸€äº›è°ƒè¯•çš„ä»£ç ã€‚

**å‚è€ƒä»£ç **ï¼š

Java ä»£ç ï¼š

java

```java
/**
 * // This is MountainArray's API interface.
 * // You should not implement it, or speculate about its implementation
 */

interface MountainArray {
    public int get(int index);

    public int length();
}


class MountainArrayImpl implements MountainArray {
    private int[] arr;
    private int size;

    public MountainArrayImpl(int[] arr) {
        this.arr = arr;
        this.size = this.arr.length;
    }

    @Override
    public int get(int index) {
        return this.arr[index];
    }

    @Override
    public int length() {
        return this.size;
    }

}

class Solution {

    // ç‰¹åˆ«æ³¨æ„ï¼š3 ä¸ªè¾…åŠ©æ–¹æ³•çš„åˆ†æ”¯å‡ºå¥‡åœ°ä¸€æ ·ï¼Œå› æ­¤é€‰ä¸­ä½æ•°å‡é€‰å·¦ä¸­ä½æ•°ï¼Œæ‰ä¸ä¼šå‘ç”Ÿæ­»å¾ªç¯

    public int findInMountainArray(int target, MountainArray mountainArr) {
        int size = mountainArr.length();
        // æ­¥éª¤ 1ï¼šå…ˆæ‰¾åˆ°å±±é¡¶å…ƒç´ æ‰€åœ¨çš„ç´¢å¼•
        int mountaintop = findMountaintop(mountainArr, 0, size - 1);
        // æ­¥éª¤ 2ï¼šåœ¨å‰æœ‰åºä¸”å‡åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•
        int res = findFromSortedArr(mountainArr, 0, mountaintop, target);
        if (res != -1) {
            return res;
        }
        // æ­¥éª¤ 3ï¼šå¦‚æœæ­¥éª¤ 2 æ‰¾ä¸åˆ°ï¼Œå°±åœ¨åæœ‰åºä¸”é™åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•
        return findFromInversedArr(mountainArr, mountaintop + 1, size - 1, target);
    }

    private int findMountaintop(MountainArray mountainArr, int l, int r) {
        // è¿”å›å±±é¡¶å…ƒç´ 
        while (l < r) {
            int mid = l + (r - l) / 2;
            // å–å·¦ä¸­ä½æ•°ï¼Œå› ä¸ºè¿›å…¥å¾ªç¯ï¼Œæ•°ç»„ä¸€å®šè‡³å°‘æœ‰ 2 ä¸ªå…ƒç´ 
            // å› æ­¤ï¼Œå·¦ä¸­ä½æ•°ä¸€å®šæœ‰å³è¾¹å…ƒç´ ï¼Œæ•°ç»„ä¸‹æ ‡ä¸ä¼šå‘ç”Ÿè¶Šç•Œ
            if (mountainArr.get(mid) < mountainArr.get(mid + 1)) {
                // å¦‚æœå½“å‰çš„æ•°æ¯”å³è¾¹çš„æ•°å°ï¼Œå®ƒä¸€å®šä¸æ˜¯å±±é¡¶
                l = mid + 1;
            } else {
                r = mid;
            }
        }
        // æ ¹æ®é¢˜æ„ï¼Œå±±é¡¶å…ƒç´ ä¸€å®šå­˜åœ¨ï¼Œå› æ­¤é€€å‡º while å¾ªç¯çš„æ—¶å€™ï¼Œä¸ç”¨å†å•ç‹¬ä½œåˆ¤æ–­
        return l;
    }

    private int findFromSortedArr(MountainArray mountainArr, int l, int r, int target) {
        // åœ¨å‰æœ‰åºä¸”å‡åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•
        while (l < r) {
            int mid = l + (r - l) / 2;
            if (mountainArr.get(mid) < target) {
                l = mid + 1;
            } else {
                r = mid;
            }

        }
        // å› ä¸ºä¸ç¡®å®šåŒºé—´æ”¶ç¼©æˆ 1ä¸ªæ•°ä»¥åï¼Œè¿™ä¸ªæ•°æ˜¯ä¸æ˜¯è¦æ‰¾çš„æ•°ï¼Œå› æ­¤å•ç‹¬åšä¸€æ¬¡åˆ¤æ–­
        if (mountainArr.get(l) == target) {
            return l;
        }
        return -1;
    }

    private int findFromInversedArr(MountainArray mountainArr, int l, int r, int target) {
        // åœ¨åæœ‰åºä¸”é™åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•
        while (l < r) {
            int mid = l + (r - l) / 2;
            // ä¸ findFromSortedArr æ–¹æ³•ä¸åŒçš„åœ°æ–¹ä»…ä»…åœ¨äºç”±åŸæ¥çš„å°äºå·æ”¹æˆå¤§äºå¥½
            if (mountainArr.get(mid) > target) {
                l = mid + 1;
            } else {
                r = mid;
            }

        }
        // å› ä¸ºä¸ç¡®å®šåŒºé—´æ”¶ç¼©æˆ 1ä¸ªæ•°ä»¥åï¼Œè¿™ä¸ªæ•°æ˜¯ä¸æ˜¯è¦æ‰¾çš„æ•°ï¼Œå› æ­¤å•ç‹¬åšä¸€æ¬¡åˆ¤æ–­
        if (mountainArr.get(l) == target) {
            return l;
        }
        return -1;
    }

    public static void main(String[] args) {
        int[] arr = {1, 2, 3, 4, 5, 3, 1};
        int target = 3;
        MountainArray mountainArray = new MountainArrayImpl(arr);

        Solution solution = new Solution();
        int res = solution.findInMountainArray(target, mountainArray);
        System.out.println(res);
    }
}
```

Python ä»£ç ï¼š

python

```python
# """
# This is MountainArray's API interface.
# You should not implement it, or speculate about its implementation
# """
class MountainArray:
    def __init__(self, arr):
        self.arr = arr
        self.size = len(arr)

    def get(self, index: int) -> int:
        return self.arr[index]

    def length(self) -> int:
        return self.size


class Solution:

    # ç‰¹åˆ«æ³¨æ„ï¼š3 ä¸ªè¾…åŠ©æ–¹æ³•çš„åˆ†æ”¯å‡ºå¥‡åœ°ä¸€æ ·ï¼Œå› æ­¤é€‰ä¸­ä½æ•°å‡é€‰å·¦ä¸­ä½æ•°ï¼Œæ‰ä¸ä¼šå‘ç”Ÿæ­»å¾ªç¯

    def findInMountainArray(self, target: int, mountain_arr: 'MountainArray') -> int:
        size = mountain_arr.length()
        # æ­¥éª¤ 1ï¼šå…ˆæ‰¾åˆ°å±±é¡¶å…ƒç´ æ‰€åœ¨çš„ç´¢å¼•
        mountaintop = self.__find_mountaintop(mountain_arr, 0, size - 1)
        # æ­¥éª¤ 2ï¼šåœ¨å‰æœ‰åºä¸”å‡åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•
        res = self.__find_from_sorted_arr(mountain_arr, 0, mountaintop, target)
        if res != -1:
            return res
        # æ­¥éª¤ 3ï¼šå¦‚æœæ­¥éª¤ 2 æ‰¾ä¸åˆ°ï¼Œå°±åœ¨åæœ‰åºä¸”é™åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•
        return self.__find_from_inversed_arr(mountain_arr, mountaintop + 1, size - 1, target)

    def __find_mountaintop(self, mountain_arr: 'MountainArray', l: int, r: int):
        # è¿”å›å±±é¡¶å…ƒç´ 
        while l < r:
            mid = l + (r - l) // 2
            # å–å·¦ä¸­ä½æ•°ï¼Œå› ä¸ºè¿›å…¥å¾ªç¯ï¼Œæ•°ç»„ä¸€å®šè‡³å°‘æœ‰ 2 ä¸ªå…ƒç´ 
            # å› æ­¤ï¼Œå·¦ä¸­ä½æ•°ä¸€å®šæœ‰å³è¾¹å…ƒç´ ï¼Œæ•°ç»„ä¸‹æ ‡ä¸ä¼šå‘ç”Ÿè¶Šç•Œ
            if mountain_arr.get(mid) < mountain_arr.get(mid + 1):
                # å¦‚æœå½“å‰çš„æ•°æ¯”å³è¾¹çš„æ•°å°ï¼Œå®ƒä¸€å®šä¸æ˜¯å±±é¡¶
                l = mid + 1
            else:
                r = mid
        # æ ¹æ®é¢˜æ„ï¼Œå±±é¡¶å…ƒç´ ä¸€å®šå­˜åœ¨ï¼Œå› æ­¤é€€å‡º while å¾ªç¯çš„æ—¶å€™ï¼Œä¸ç”¨å†å•ç‹¬ä½œåˆ¤æ–­
        return l

    def __find_from_sorted_arr(self, mountain_arr: 'MountainArray', l: int, r: int, target: int):
        # åœ¨å‰æœ‰åºä¸”å‡åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•
        while l < r:
            mid = l + (r - l) // 2
            if mountain_arr.get(mid) < target:
                l = mid + 1
            else:
                r = mid
        # å› ä¸ºä¸ç¡®å®šåŒºé—´æ”¶ç¼©æˆ 1 ä¸ªæ•°ä»¥åï¼Œè¿™ä¸ªæ•°æ˜¯ä¸æ˜¯è¦æ‰¾çš„æ•°ï¼Œå› æ­¤å•ç‹¬åšä¸€æ¬¡åˆ¤æ–­
        if mountain_arr.get(l) == target:
            return l
        return -1

    def __find_from_inversed_arr(self, mountain_arr: 'MountainArray', l: int, r: int, target: int):
        # åœ¨åæœ‰åºä¸”é™åºæ•°ç»„ä¸­æ‰¾ target æ‰€åœ¨çš„ç´¢å¼•
        while l < r:
            mid = l + (r - l) // 2
            # ä¸ __find_from_sorted_arr æ–¹æ³•ä¸åŒçš„åœ°æ–¹ä»…ä»…åœ¨äºç”±åŸæ¥çš„å°äºå·æ”¹æˆå¤§äºå·
            if mountain_arr.get(mid) > target:
                l = mid + 1
            else:
                r = mid
        if mountain_arr.get(l) == target:
            return l
        return -1


if __name__ == '__main__':
    arr = [1, 2, 3, 4, 5, 3, 1]
    mountain_array = MountainArray(arr)
    target = 3
    solution = Solution()
    res = solution.findInMountainArray(target, mountain_array)
    print('res', res)
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(logğ‘)O(logâ¡N)ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¯¹æ•°çº§åˆ«çš„ï¼Œè¿™é‡Œä½¿ç”¨äº† 33 æ¬¡äºŒåˆ†æŸ¥æ‰¾æ³•ï¼Œæ˜¯å¸¸æ•°å€æ•°ï¼Œå› æ­¤å¯ä»¥å¿½ç•¥è¿™ä¸ªå¸¸æ•°ç³»æ•°ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ï¼Œè¿™é‡Œä½¿ç”¨çš„é¢å¤–çš„è¾…åŠ©ç©ºé—´ä»…ä»…æ˜¯ `mountaintop`ã€ä¸­ä½æ•°ç´¢å¼• `mid` ç­‰ï¼Œæ˜¯å¸¸æ•°çº§åˆ«ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º ğ‘‚(1)O(1)ã€‚

ï¼ˆæœ¬èŠ‚å®Œï¼‰