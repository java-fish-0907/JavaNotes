## ã€ŒåŠ›æ‰£ã€ç¬¬ 33 é¢˜ï¼šæœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆä¸­ç­‰ï¼‰

- [é“¾æ¥](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)
- [é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/er-fen-fa-python-dai-ma-java-dai-ma-by-liweiwei141/)

> å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚
>
> ( ä¾‹å¦‚ï¼Œæ•°ç»„ `[0, 1, 2, 4, 5, 6, 7]` å¯èƒ½å˜ä¸º `[4, 5, 6, 7, 0, 1, 2]` )ã€‚
>
> æœç´¢ä¸€ä¸ªç»™å®šçš„ç›®æ ‡å€¼ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ï¼Œåˆ™è¿”å›å®ƒçš„ç´¢å¼•ï¼Œå¦åˆ™è¿”å› -1 ã€‚
>
> ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­ä¸å­˜åœ¨é‡å¤çš„å…ƒç´ ã€‚
>
> ä½ çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ ğ‘‚(logğ‘›)O(logâ¡n) çº§åˆ«ã€‚
>
> ç¤ºä¾‹ 1ï¼š
>
> ```
> è¾“å…¥: nums = [4, 5, 6, 7, 0, 1, 2], target = 0
> è¾“å‡º: 4
> ```
>
> ç¤ºä¾‹ 2ï¼š
>
> ```
> è¾“å…¥: nums = [4, 5, 6, 7, 0, 1, 2], target = 3
> è¾“å‡º: -1
> ```

### æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•ï¼ˆBrute Forceï¼‰

æ— è§†é¢˜ç›®â€œä½ çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ ğ‘‚(logğ‘›)O(logâ¡n) çº§åˆ«â€è¿™é¡¹è¦æ±‚ï¼Œé‡‡ç”¨çº¿æ€§æ‰«æçš„æ–¹å¼æœç´¢ã€‚

Java ä»£ç ï¼š

java

```java
public class Solution {

    public int search(int[] nums, int target) {
        int len = nums.length;
        for (int i = 0; i < len; i++) {
            if (nums[i] == target) {
                return i;
            }
        }
        return -1;
    }
}
```

**å¤æ‚åº¦åˆ†æ**ï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ï¼Œè¿™é‡Œ ğ‘N æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ï¼Œä½¿ç”¨åˆ°çš„ä¸´æ—¶å˜é‡çš„ä¸ªæ•°æ˜¯å¸¸æ•°ã€‚

### æ–¹æ³•äºŒï¼šäºŒåˆ†æŸ¥æ‰¾ï¼ˆBinary Searchï¼‰

é¢˜ç›®ä¸­è¯´ï¼šâ€œä½ çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ ğ‘‚(logğ‘›)O(logâ¡n) çº§åˆ«â€ï¼Œæš—ç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ã€‚é¢˜ç›®ä¸­è¿˜è¯´è¯´ï¼šâ€œ**ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­ä¸å­˜åœ¨é‡å¤çš„å…ƒç´ **â€ã€‚

å¯ä»¥æ ¹æ®ç¤ºä¾‹ `[4, 5, 6, 7, 0, 1, 2]` ï¼Œè‡ªå·±æ‰‹å†™å‡ ä¸ªæ—‹è½¬æ•°ç»„ã€‚ä¸éš¾å‘ç°ï¼šå°†å¾…æœç´¢åŒºé—´ä»ä¸­é—´ä¸€åˆ†ä¸ºäºŒï¼Œ**`mid` ä½ç½®ä¸€å®šä¼šè½åœ¨å…¶ä¸­ä¸€ä¸ªæœ‰åºåŒºé—´é‡Œ**ã€‚



![image-20191128101416746](https://tva1.sinaimg.cn/large/006y8mN6ly1g9dk987cj0j310b0u0div.jpg)

**image-20191128101416746**



- ç”±äºé¢˜ç›®ä¸å…è®¸æˆ‘ä»¬é€ä¸ªæ‰«æï¼Œå› æ­¤å¾…æœç´¢åŒºé—´çš„ç¬¬ 1 ä¸ªä¸‹æ ‡ã€æœ€åä¸€ä¸ªä¸‹æ ‡ã€ä¸­é—´ä¸‹æ ‡å°±å¾ˆé‡è¦ï¼›
- äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“èƒ½å¤Ÿæ ¹æ®ä¸­é—´ä¸‹æ ‡çš„å…ƒç´ å€¼å’Œç¬¬ 1 ä¸ªä¸‹æ ‡ï¼ˆæˆ–è€…æœ€åä¸€ä¸ªä¸‹æ ‡ï¼‰çš„å…ƒç´ çš„å€¼åˆ¤æ–­ `mid` è½åœ¨å“ªä¸ªæœ‰åºçš„åŒºé—´é‡Œã€‚

è¿˜å¯ä»¥è¿™æ ·ç†è§£ï¼š

- ä¸­é—´å…ƒç´ æŠŠå¾…æœç´¢åŒºé—´åˆ†æˆäº†ä¸¤éƒ¨åˆ†ï¼Œä¸¤éƒ¨åˆ†å…·æœ‰çš„æ€§è´¨æ˜¯è‡³å°‘æœ‰ä¸€éƒ¨åˆ†æ˜¯æœ‰åºçš„ï¼›

æˆ‘ä»¬ä¸å¦¨è®¨è®ºä¸­é—´å…ƒç´ å’Œå³è¾¹ç•Œçš„å…³ç³»ï¼ˆå…¶å®ƒæƒ…å†µç±»ä¼¼ï¼‰ï¼Œå› ä¸ºä¸å­˜åœ¨é‡å¤å…ƒç´ ï¼Œæ‰€ä»¥å®ƒä»¬çš„å…³ç³»ä¸æ˜¯å¤§äºå°±æ˜¯å°äºã€‚

**æƒ…å†µ 1**ï¼š`nums[mid] < nums[right]`ï¼Œå½“ä¸­é—´å…ƒç´ çš„æ•°å€¼ä¸¥æ ¼å°äºå³è¾¹ç•Œçš„æ•°å€¼æ—¶å€™

1ã€æ­¤æ—¶åŒºé—´ `[mid, right]` ï¼ˆè¡¨ç¤ºå·¦é—­å³é—­ï¼Œä¸‹åŒï¼‰ä¸€å®šæ˜¯æœ‰åºçš„ï¼›

2ã€å› ä¸º `target` è¦ä¹ˆåœ¨æœ‰åºåŒºé—´ `[mid, right]` é‡Œï¼Œè¦ä¹ˆåœ¨å¦ä¸€ä¸ªåŒºé—´ `[left, mid - 1]` é‡Œã€‚

ï¼ˆ1ï¼‰æ˜¾ç„¶åœ¨æœ‰åºåŒºé—´ `[mid, right]` é‡Œçš„æ¡ä»¶å¥½å†™ï¼Œå³ï¼š `nums[mid] <= target <= nums[right]`ã€‚å› ä¸º `target` è½åœ¨å…¶ä¸­ï¼Œæ‰€ä»¥èƒ½ä¸”åªèƒ½ç­‰äºå…¶ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œå½“ç„¶åŒ…æ‹¬å¤´å°¾ï¼Œæ­¤æ—¶è®¾ç½® `left = mid`ï¼›

ï¼ˆ2ï¼‰è½åœ¨å¦ä¸€ä¸ªåŒºé—´ `[left, mid - 1]` é‡Œçš„æ—¶å€™ï¼Œå°±æ˜¯ä¸Šä¸€ä¸ªæƒ…å†µçš„åé¢ï¼Œè¿™ç§æƒ…å†µç”¨ `else` è¡¨ç¤ºå³å¯ï¼Œæ­¤æ—¶è®¾ç½® `right = mid - 1` æ˜¯æ˜¾ç„¶çš„ã€‚

> **å…³é”®**ï¼šæŠŠæ¯”è¾ƒå¥½äº›çš„åˆ¤æ–­ï¼ˆ`target` è½åœ¨æœ‰åºçš„é‚£éƒ¨åˆ†ï¼‰æ”¾åœ¨ `if` çš„å¼€å¤´è€ƒè™‘ï¼ŒæŠŠå‰©ä¸‹çš„æƒ…å†µæ”¾åœ¨ `else` é‡Œé¢ã€‚

åŒç†ï¼Œè®¨è®º `nums[mid] < nums[right]` çš„åé¢ï¼ˆä¸‹é¢æˆ‘çš„æè¿°åŸºæœ¬å°±æ˜¯åè¿‡æ¥è®²çš„ï¼‰ã€‚

**æƒ…å†µ 2**ï¼š`nums[mid] > nums[right]`ï¼Œå½“ä¸­é—´å…ƒç´ çš„æ•°å€¼ä¸¥æ ¼å°äºå³è¾¹ç•Œçš„æ•°å€¼æ—¶å€™ï¼Œå› ä¸ºæ²¡æœ‰é‡å¤å…ƒç´ ï¼Œæ‰€ä»¥æ˜¯ä¸¥æ ¼å¤§äº

1ã€æ­¤æ—¶åŒºé—´ `[left, mid - 1]` å†…çš„å…ƒç´ ä¸€å®šæ˜¯æœ‰åºçš„ï¼›

2ã€å› ä¸º `target` è¦ä¹ˆåœ¨æœ‰åºåŒºé—´ `[left, mid - 1]` é‡Œï¼Œè¦ä¹ˆåœ¨å¦ä¸€ä¸ªåŒºé—´ `[mid, right]` é‡Œã€‚

ï¼ˆ1ï¼‰æ˜¾ç„¶åœ¨æœ‰åºåŒºé—´ `[left, mid - 1]` é‡Œçš„æ¡ä»¶å¥½å†™ï¼Œå³ï¼š `nums[left] <= target <= nums[mid - 1]`ã€‚å› ä¸º `target` è½åœ¨å…¶ä¸­ï¼Œæ‰€ä»¥èƒ½ä¸”åªèƒ½ç­‰äºå…¶ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œå½“ç„¶åŒ…æ‹¬å¤´å°¾ï¼Œæ­¤æ—¶è®¾ç½® `right = mid - 1`ï¼›

ï¼ˆ2ï¼‰è½åœ¨å¦ä¸€ä¸ªåŒºé—´ `[mid, right]` é‡Œçš„æ—¶å€™ï¼Œå°±æ˜¯ä¸Šä¸€ä¸ªæƒ…å†µçš„åé¢ï¼Œè¿™ç§æƒ…å†µç”¨ `else` è¡¨ç¤ºå³å¯ï¼Œæ­¤æ—¶è®¾ç½® `left = mid` æ˜¯æ˜¾ç„¶çš„ã€‚

> è¿™é‡Œç‰¹åˆ«å·§ï¼Œæƒ…å†µ 1 å’Œæƒ…å†µ 2 è¾¹ç•Œçš„æ”¶ç¼©æ­£å¥½å»åˆã€‚éƒ½æ˜¯ `left = mid` ä¸ `right = mid - 1`ã€‚å› æ­¤é€‰ä¸­é—´æ•°çš„æ—¶å€™å°±å¾—ä¸Šå–æ•´ï¼Œå³ `int mid = (left + right + 1) >>> 1`ã€‚



![image-20191128103723984](https://tva1.sinaimg.cn/large/006y8mN6ly1g9dk95gjojj30uk0bet9g.jpg)

**image-20191128103723984**



Java ä»£ç ï¼š

java

```java
public class Solution {

    public int search(int[] nums, int target) {
        int len = nums.length;
        if (len == 0) {
            return -1;
        }

        int left = 0;
        int right = len - 1;
        while (left < right) {

            int mid = (left + right + 1) >>> 1;

            if (nums[mid] < nums[right]) {

                // ä½¿ç”¨ä¸Šå–æ•´çš„ä¸­é—´æ•°ï¼Œå¿…é¡»åœ¨ä¸Šé¢çš„ mid è¡¨è¾¾å¼çš„æ‹¬å·é‡Œ + 1
                if (nums[mid] <= target && target <= nums[right]) {
                    // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [mid, right]
                    left = mid;
                } else {
                    // åªè¦ä¸Šé¢å¯¹äº†ï¼Œè¿™é‡Œä¸ç”¨æ€è€ƒï¼Œå¯ä»¥ä¸€ä¸‹å­å†™å‡ºæ¥
                    right = mid - 1;
                }

            } else {

                // [left, mid] æœ‰åºï¼Œä½†æ˜¯ä¸ºäº†å’Œä¸Šä¸€ä¸ª if æœ‰åŒæ ·çš„æ”¶ç¼©è¡Œä¸ºï¼Œ
                // æˆ‘ä»¬æ•…æ„åªè®¤ä¸º [left, mid - 1] æœ‰åº
                // å½“åŒºé—´åªæœ‰ 2 ä¸ªå…ƒç´ çš„æ—¶å€™ int mid = (left + right + 1) >>> 1; ä¸€å®šä¼šå–åˆ°å³è¾¹
                // æ­¤æ—¶ mid - 1 ä¸ä¼šè¶Šç•Œï¼Œå°±æ˜¯è¿™ä¹ˆåˆšåˆšå¥½

                if (nums[left] <= target && target <= nums[mid - 1]) {
                    // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [left, mid - 1]
                    right = mid - 1;
                } else {
                    left = mid;
                }
            }
        }

        // æœ‰å¯èƒ½åŒºé—´å†…ä¸å­˜åœ¨ç›®æ ‡å…ƒç´ ï¼Œå› æ­¤è¿˜éœ€åšä¸€æ¬¡åˆ¤æ–­
        if (nums[left] == target) {
            return left;
        }
        return -1;
    }
}
```

**å¤æ‚åº¦åˆ†æ**ï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(logğ‘)O(logâ¡N)ï¼Œè¿™é‡Œ ğ‘N æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œåœ¨å¾ªç¯ä¸­ä¸€æ¬¡æ’é™¤ä¸€åŠï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯å¯¹æ•°çº§åˆ«çš„ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ï¼Œä½¿ç”¨åˆ°çš„ä¸´æ—¶å˜é‡çš„ä¸ªæ•°æ˜¯å¸¸æ•°ã€‚

ï¼ˆæœ¬èŠ‚å®Œï¼‰