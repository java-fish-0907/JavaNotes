## ã€ŒåŠ›æ‰£ã€ç¬¬ 34 é¢˜ï¼šæ’åºæ•°ç»„æŸ¥æ‰¾é¦–ã€æœ«ä½ç½®ï¼ˆç®€å•ï¼‰

- [é“¾æ¥](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/)
- [é¢˜è§£é“¾æ¥ï¼ˆå«è§†é¢‘é¢˜è§£ï¼‰](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/solution/si-lu-hen-jian-dan-xi-jie-fei-mo-gui-de-er-fen-cha/)

> ç»™å®šä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ `nums`ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ `target`ã€‚æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚
>
> ä½ çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ ğ‘‚(logğ‘›)O(logâ¡n) çº§åˆ«ã€‚
>
> å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ï¼Œè¿”å› `[-1, -1]`ã€‚
>
> ç¤ºä¾‹ 1ï¼š
>
> ```
> è¾“å…¥: nums = [5, 7, 7, 8, 8, 10], target = 8
> è¾“å‡º: [3, 4]
> ```
>
> ç¤ºä¾‹ 2ï¼š
>
> ```
> è¾“å…¥: nums = [5, 7, 7, 8, 8, 10], target = 6
> è¾“å‡º: [-1, -1]
> ```

### æ€è·¯

> å¦‚æœå½“å‰çœ‹åˆ°çš„ä¸­é—´å…ƒç´ çš„æ•°å€¼æ°å¥½ç­‰äºç›®æ ‡å…ƒç´ ï¼Œåº”è¯¥**ç»§ç»­ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾**ï¼ŒæŸ¥æ‰¾å®ƒç¬¬ä¸€æ¬¡å‡ºç°å’Œæœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œä¸å¯ä»¥çº¿æ€§åœ°å»æ‰«æã€‚

### æ–¹æ³•ä¸€ï¼šæš´åŠ›æ±‚è§£ï¼ˆBrute Forceï¼‰

> è¯¥æ–¹æ³•å¤§å®¶éƒ½ä¼šï¼Œå¯ä»¥è·³è¿‡ã€‚

å¾ˆå®¹æ˜“æƒ³åˆ°çš„ä¸€ä¸ªæ–¹æ³•æ˜¯æš´åŠ›è§£æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦ä»å¤´åˆ°å°¾éå†ä¸€æ¬¡æ•°ç»„ï¼Œå°±èƒ½å¤Ÿæ‰¾åˆ°ç›®æ ‡å…ƒç´ å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®å’Œæœ€åä¸€ä¸ªä½ç½®ã€‚æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬æƒ³è±¡æœ€ä¸€èˆ¬çš„é‚£ç§æƒ…å†µï¼Œå…ˆé‡åˆ°çš„æ•°éƒ½æ˜¯ä¸¥æ ¼å°äº `target`ï¼Œç„¶åé‡åˆ°çš„æ•°éƒ½ç­‰äº `target`ï¼Œæœ€åé‡åˆ°çš„æ•°éƒ½ä¸¥æ ¼å¤§äº `target`ã€‚

- å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨éå†çš„å¼€å§‹ï¼Œæ£€æŸ¥éå†åˆ°çš„å…ƒç´ æ˜¯å¦ç­‰äº `target` ï¼Œé‡åˆ°åˆšå¥½ç­‰äº `target` çš„æ—¶å€™ï¼Œè®°å½•å½“å‰çš„ä½ç½®ï¼›
- ç„¶åæ¥ç€éå†ï¼Œæ£€æŸ¥éå†åˆ°çš„å…ƒç´ æ˜¯å¦ä¸ç­‰äº `target` ï¼Œé‡åˆ°åˆšå¥½ä¸ç­‰äº `target` çš„æ—¶å€™ï¼Œè®°å½•å½“å‰ä½ç½®çš„å‰ä¸€ä¸ªä½ç½®å³å¯ã€‚

è¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ ğ‘‚(ğ‘)O(N)ï¼Œä¸ç¬¦åˆé¢˜ç›®çš„è¦æ±‚ã€‚

Java ä»£ç ï¼š

java

```java
public class Solution {

    public int[] searchRange(int[] nums, int target) {
        int[] targetRange = new int[]{-1, -1};

        int len = nums.length;
        if (len == 0) {
            return targetRange;
        }

        for (int i = 0; i < len; i++) {
            if (nums[i] == target) {
                targetRange[0] = i;
                break;
            }
        }

        // è¿ç¬¬ 1 ä¸ªä½ç½®éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œè¯´æ˜å·²ç»éå†å®Œæ•´ä¸ªæ•°ç»„äº†
        if (targetRange[0] == -1) {
            return targetRange;
        }

        for (int i = targetRange[0] + 1; i < len; i++) {
            if (nums[i] != target) {
                targetRange[1] = i - 1;
                break;
            }
        }

        if (targetRange[1] == -1) {
            targetRange[1] = len - 1;
        }
        return targetRange;
    }
}
```

**ä»£ç è®²è§£**ï¼š

- é¦–å…ˆæ–°å»ºä¸€ä¸ªæœ‰ä¸¤ä¸ªå…ƒç´ çš„æ•´å‹æ•°ç»„ `targetRange`ï¼Œåˆå§‹åŒ–çš„å€¼ä¸º `[-1, -1]`ï¼Œç„¶åæŠŠæ•°ç»„çš„é•¿åº¦èµ‹å€¼æˆä¸€ä¸ªå˜é‡ `len`ï¼Œå½“æ•°ç»„çš„é•¿åº¦ç­‰äº `0` çš„æ—¶å€™ï¼Œç›´æ¥è¿”å› `targetRange`ï¼›
- ç„¶åä»ä¸‹æ ‡ä¸º `0` çš„åœ°æ–¹å¼€å§‹éå†ï¼Œåªè¦æ‰¾åˆ°äº†ç­‰äº `target` çš„å…ƒç´ ï¼Œå°±å°† `targetRange` ä¸‹æ ‡ä¸º `0` çš„é‚£ä¸ªå…ƒç´ èµ‹å€¼ä¸º `i` ï¼Œç„¶åé€€å‡ºå¾ªç¯ï¼›
- è¿™é‡Œè¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šå¦‚æœåœ¨æ•´ä¸ªéå†çš„è¿‡ç¨‹ä¸­ï¼Œ `targetRange[0]` éƒ½æ²¡æœ‰è¢«é‡æ–°èµ‹å€¼ï¼Œé‚£å°±è¯´æ˜ç›®æ ‡å…ƒç´  `target` åœ¨æœ‰åºæ•°ç»„ `nums` ä¸­å¹¶ä¸å­˜åœ¨ï¼Œä¾ç„¶å°† `targetRange` è¿”å›å³å¯ï¼›
- æ¥ç€æˆ‘ä»¬ä»ç›®æ ‡å…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½® `targetRange[0]` çš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹éå†ï¼Œåªè¦æ£€æµ‹åˆ°å…ƒç´ ä¸ç­‰äº `target` ï¼Œè®°å½•å®ƒçš„å‰ä¸€ä¸ªä½ç½®ï¼Œå³å°† `targetRange[1]` èµ‹å€¼ä¸º `i - 1` ï¼Œç„¶åå°±å¯ä»¥é€€å‡ºå¾ªç¯ï¼›
- è¿˜è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œå¦‚æœç›®æ ‡å…ƒç´ åˆšå¥½åœ¨æœ‰åºæ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ï¼Œå…¶å®è¿™ä¸ªå¾ªç¯ä½“æ˜¯æ ¹æœ¬æ²¡æœ‰åŠæ³•æ‰§è¡Œçš„ï¼Œå› æ­¤ï¼Œå¯ä»¥åœ¨æœ€ååšä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœ `targetRange[1]` è¿˜æ²¡æœ‰è¢«èµ‹å€¼ï¼Œå°±æŠŠå®ƒèµ‹å€¼ä¸ºæ•°ç»„ä¸­æœ€åä¸€ä¸ªä½ç½®ã€‚

### æ–¹æ³•äºŒï¼šäºŒåˆ†æŸ¥æ‰¾

ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç›®æ ‡å…ƒç´ åœ¨æœ‰åºæ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚

- äºŒåˆ†æŸ¥æ‰¾æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šåœ¨ä¸€ä¸ªåŒºé—´èŒƒå›´é‡Œçœ‹å¤„åœ¨ä¸­é—´ä½ç½®çš„å…ƒç´ çš„å€¼ `nums[mid]` ä¸ç›®æ ‡å…ƒç´  `target` çš„å¤§å°å…³ç³»ï¼Œè¿›è€Œå†³å®šç›®æ ‡å€¼è½åœ¨å“ªä¸€ä¸ªéƒ¨åˆ†é‡Œï¼›
- å¯¹äºè¿™é“é¢˜ï¼Œä¸å¸¸è§çš„äºŒåˆ†æŸ¥æ‰¾é—®é¢˜æœ€å¤§çš„ä¸åŒå°±åœ¨äºï¼Œç›®æ ‡å…ƒç´  `target` åœ¨æœ‰åºæ•°ç»„ä¸­å¾ˆå¯èƒ½å­˜åœ¨å¤šä¸ªï¼›
- è€Œå½“æˆ‘ä»¬ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ–¹æ³•çœ‹åˆ°çš„å¤„åœ¨ä¸­é—´ä½ç½®çš„å…ƒç´ çš„å€¼ `nums[mid]` æ°å¥½ç­‰äºç›®æ ‡å…ƒç´  `target` çš„æ—¶å€™ï¼Œè¿˜éœ€è¦ç»§ç»­æŸ¥æ‰¾ä¸‹å»ï¼Œè€Œæ­¤æ—¶æ¯”è¾ƒå®¹æ˜“é™·å…¥çš„è¯¯åŒºæ˜¯çº¿æ€§æŸ¥æ‰¾ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ç»§ç»­äºŒåˆ†æŸ¥æ‰¾ï¼›
- å¾ˆæ˜¾ç„¶ï¼Œç›®æ ‡å…ƒç´ ç¬¬ 1 æ¬¡å‡ºç°çš„ä½ç½®ä¸€å®šä¸å¯èƒ½æ˜¯ä¸¥æ ¼å°äº `target` çš„å…ƒç´ çš„ä½ç½®ï¼Œæ ¹æ®ä¹‹å‰æš´åŠ›è§£æ³•çš„åˆ†æï¼Œç›®æ ‡å…ƒç´ ç¬¬ 1 æ¬¡å‡ºç°çš„ä½ç½®æ˜¯ä¸¥æ ¼å°äº `target` çš„å…ƒç´ çš„ä½ç½®çš„è¾¹ç•Œï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ€è·¯ä½¿ç”¨äºŒåˆ†æ³•æ‰¾åˆ°è¿™ä¸ªè¾¹ç•Œï¼›
- å¯¹ç§°åœ°ï¼Œç›®æ ‡å…ƒç´ æœ€å 1 æ¬¡å‡ºç°çš„ä½ç½®ä¸€å®šä¸å¯èƒ½æ˜¯ä¸¥æ ¼å¤§äº `target` çš„å…ƒç´ çš„ä½ç½®ï¼Œç›®æ ‡å…ƒç´ æœ€å 1 æ¬¡å‡ºç°çš„ä½ç½®æ˜¯ä¸¥æ ¼å¤§äº `target` çš„å…ƒç´ çš„ä½ç½®çš„è¾¹ç•Œï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ€è·¯ä½¿ç”¨äºŒåˆ†æ³•æ‰¾åˆ°è¿™ä¸ªè¾¹ç•Œã€‚

Java ä»£ç ï¼š

java

```java
public class Solution {

    public int[] searchRange(int[] nums, int target) {
        int len = nums.length;
        if (len == 0) {
            return new int[]{-1, -1};
        }

        int firstPosition = findFirstPosition(nums, target);
        if (firstPosition == -1) {
            return new int[]{-1, -1};
        }

        int lastPosition = findLastPosition(nums, target);
        return new int[]{firstPosition, lastPosition};
    }

    private int findFirstPosition(int[] nums, int target) {
        int left = 0;
        int right = nums.length - 1;
        while (left < right) {
            int mid = (left + right) >>> 1;
            // å°äºä¸€å®šä¸æ˜¯è§£
            if (nums[mid] < target) {
                // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [mid + 1, right]
                left = mid + 1;
            } else {
                right = mid;
            }
        }

        if (nums[left] == target) {
            return left;
        }
        return -1;
    }

    private int findLastPosition(int[] nums, int target) {
        int left = 0;
        int right = nums.length - 1;
        while (left < right) {
            int mid = (left + right + 1) >>> 1;
            // å¤§äºä¸€å®šä¸æ˜¯è§£
            if (nums[mid] > target) {
                // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [left, mid - 1]
                right = mid - 1;
            } else {
                left = mid;
            }
        }
        return left;
    }
}
```

**ä»£ç è®²è§£**ï¼š

- é¦–å…ˆä¾ç„¶æ˜¯å°†æ•°ç»„çš„é•¿åº¦èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ `len`ï¼›
- ç„¶ååšä¸€ä¸ªç‰¹åˆ¤ï¼šå½“æ•°ç»„çš„é•¿åº¦ä¸º `0` çš„æ—¶å€™ï¼Œç›´æ¥è¿”å› `[-1 , -1]`ï¼›
- æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆäºŒåˆ†æŸ¥æ‰¾ `target` ç¬¬ 1 æ¬¡å‡ºç°çš„ä½ç½®ï¼Œæˆ‘ä»¬æŠŠå®ƒå°è£…æˆä¸€ä¸ªç§æœ‰æ–¹æ³• `findFirstPosition`ï¼š
  - åˆ†åˆ«åˆå§‹åŒ–å·¦è¾¹ç•Œ `left = 0` å’Œå³è¾¹ç•Œ `right = len - 1` ï¼Œè¡¨ç¤ºå¾…æœç´¢åŒºé—´çš„å·¦å³è¾¹ç•Œï¼›
  - æ¥ä¸‹æ¥ä¸æ–­åœ°äºŒåˆ†æŸ¥æ‰¾ç›®æ ‡å…ƒç´ ï¼Œæˆ‘ä»¬æŠŠå¾ªç¯å¯ä»¥ç»§ç»­çš„æ¡ä»¶å†™æˆ `while (left < right)` ï¼Œæ³¨æ„è¿™é‡Œå†™æˆä¸¥æ ¼å°äºï¼Œè¿™æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„å†™æ³•ï¼Œå®ƒçš„æ€è·¯æ˜¯æŠŠç¬¦åˆæ¡ä»¶çš„å…ƒç´ æ”¾åœ¨æœ€ååšåˆ¤æ–­ï¼Œå¥½å¤„æ˜¯åœ¨é€€å‡ºå¾ªç¯çš„æ—¶å€™ä¸€å®šæœ‰ `left == right` æˆç«‹ï¼Œæˆ‘ä»¬å°±ä¸ç”¨è€ƒè™‘åˆ°åº•åº”è¯¥è¿”å› `left` è¿˜æ˜¯è¿”å› `right` äº†ã€‚ä½†æ˜¯è¿™ç§å†™æ³•æœ‰å‡ ä¸ªè¦æ³¨æ„çš„åœ°æ–¹ï¼Œæˆ‘ä»¬é©¬ä¸Šä¼šæåˆ°ã€‚
  - ç„¶åæ˜¯è®¡ç®—ä¸­é—´ä½ç½®ä¸‹æ ‡çš„ä»£ç  `int mid = left + (right - left) / 2;`
  - æ ¹æ®åˆšæ‰çš„åˆ†æï¼Œå½“ `nums[mid] < target` çš„æ—¶å€™ï¼Œ`mid` ä»¥åŠ `mid` å·¦è¾¹çš„æ‰€æœ‰å…ƒç´ ä¸€å®šä¸æ˜¯ `target` å‡ºç°çš„ç¬¬ 1 ä¸ªä½ç½®ï¼Œå› æ­¤ä¸‹ä¸€è½®æœç´¢çš„å…ƒç´ å°±ä¸€å®šåœ¨ `[mid + 1, right]` ä¸­ï¼Œå› æ­¤ï¼Œå°†å·¦è¾¹ç•Œè®¾ç½®ä¸º `mid + 1`ï¼›
  - æ¥ä¸‹æ¥æ˜¯ `nums[mid] < target` çš„åé¢ï¼Œ `nums[mid] >= target` ï¼Œæ­¤æ—¶æœç´¢çš„åŒºé—´æ˜¯ `if` è¿™ä¸ªåˆ†æ”¯æœç´¢åŒºé—´çš„åé¢ï¼Œå³ `[left, mid]` ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼šå¦‚æœæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªæ•°ä¸¥æ ¼å¤§äº `target` ï¼Œ `target` å‡ºç°çš„ç¬¬ 1 ä¸ªä½ç½®ä¸€å®šå‡ºç°åœ¨è¿™ä¸ªæ•°çš„å·¦è¾¹ï¼›å¦‚æœæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªæ•°æ°å¥½ç­‰äº `target` ï¼Œå®ƒæœ‰å¯èƒ½å°±æ˜¯å‡ºç°çš„ç¬¬ 1 ä¸ªä½ç½®ï¼Œä¹Ÿæœ‰å¯èƒ½ `target` å‡ºç°çš„ç¬¬ 1 ä¸ªä½ç½®åœ¨å®ƒå·¦è¾¹ï¼Œä½†æ˜¯ä¸€å®šä¸ä¼šåœ¨è¿™ä¸ªä½ç½®å³è¾¹ï¼Œå› æ­¤ï¼Œä¸‹ä¸€è½®æœç´¢çš„åŒºé—´æ˜¯ `[left, mid]` æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œæ­¤æ—¶éœ€è¦è®¾ç½®å³è¾¹ç•Œ `right = mid`ï¼›
  - åœ¨é€€å‡ºå¾ªç¯çš„æ—¶å€™ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸‹æ ‡çš„å…ƒç´  `left`ï¼ˆæˆ–è€…è¯´æ˜¯ `right` æ­¤æ—¶å®ƒä»¬çš„å€¼ç›¸ç­‰ï¼‰æ²¡æœ‰çœ‹åˆ°ï¼Œå› ä¸ºé¢˜ç›®ä¸­è¯´ï¼Œç›®æ ‡å…ƒç´ æœ‰å¯èƒ½åœ¨æ•°ç»„ä¸­å¹¶ä¸å­˜åœ¨ï¼Œå› æ­¤ï¼Œéœ€è¦å•ç‹¬å†åšä¸€æ¬¡åˆ¤æ–­ï¼Œè¿™ä¸€æ­¥å«åšåå¤„ç†ã€‚
  - å¦‚æœ `nums[left] == target` ï¼Œä¸‹æ ‡ä½ç½® `left` å°±æ˜¯ `target` ç¬¬ 1 æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦åˆ™è¿”å› `-1`ã€‚
- å¯¹ç§°åœ°ï¼Œæˆ‘ä»¬æ¥å†™æŸ¥æ‰¾ `target` æœ€å 1 æ¬¡å‡ºç°çš„ä½ç½®çš„ä»£ç ã€‚
  - é¦–å…ˆå¯ä»¥ç¡®å®šçš„æ˜¯ï¼Œå¦‚æœåœ¨æŸ¥æ‰¾ `target` ç¬¬ 1 æ¬¡å‡ºç°çš„ä½ç½®çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½æ²¡æœ‰æ‰¾åˆ° `target` ï¼Œåœ¨æŸ¥æ‰¾ `target` æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®çš„æ—¶å€™ï¼Œæˆ‘ä»¬è‚¯å®šä¹Ÿä¸ä¼šæ‰¾åˆ°è¿™ä¸ªæ•°ï¼Œå› æ­¤å¯ä»¥å…ˆåšä¸€ä¸ªç‰¹æ®Šçš„åˆ¤æ–­ï¼›
  - `findLastPosition` çš„ç»“æ„å’Œ `findFirstPosition` å¾ˆåƒï¼Œæˆ‘ä»¬ç›´æ¥å¤åˆ¶ä¸‹æ¥ï¼Œéœ€è¦æ›´æ”¹çš„æ˜¯ `if` å’Œ `else` çš„é€»è¾‘ï¼Œæ ¹æ®åˆšæ‰çš„åˆ†æï¼Œå½“ `nums[mid] > target` çš„æ—¶å€™ï¼Œ`mid` ä»¥åŠ `mid` å³è¾¹çš„æ‰€æœ‰å…ƒç´ ä¸€å®šä¸æ˜¯ `target` å‡ºç°çš„æœ€å 1 ä¸ªä½ç½®ï¼Œå› æ­¤ä¸‹ä¸€è½®æœç´¢çš„å…ƒç´ å°±ä¸€å®šåœ¨ `[left, mid - 1]` ä¸­ï¼Œå› æ­¤ï¼Œå°†å³è¾¹ç•Œè®¾ç½®ä¸º `mid - 1`ï¼›
  - æ¥ä¸‹æ¥æ˜¯ `nums[mid] > target` çš„åé¢ï¼Œ `nums[mid] <= target` ï¼Œæ­¤æ—¶æœç´¢çš„åŒºé—´æ˜¯ `if` è¿™ä¸ªåˆ†æ”¯æœç´¢åŒºé—´çš„åé¢ï¼Œå³ `[mid, right]` ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼šå¦‚æœæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªæ•°ä¸¥æ ¼å°äº `target` ï¼Œ `target` å‡ºç°çš„æœ€å 1 ä¸ªä½ç½®ä¸€å®šå‡ºç°åœ¨è¿™ä¸ªæ•°çš„å³è¾¹ï¼›å¦‚æœæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªæ•°æ°å¥½ç­‰äº `target` ï¼Œå®ƒæœ‰å¯èƒ½å°±æ˜¯å‡ºç°çš„æœ€å 1 ä¸ªä½ç½®ï¼Œä¹Ÿæœ‰å¯èƒ½ `target` å‡ºç°çš„æœ€å 1 ä¸ªä½ç½®åœ¨å®ƒå³è¾¹ï¼Œä½†æ˜¯ä¸€å®šä¸ä¼šåœ¨è¿™ä¸ªä½ç½®å·¦è¾¹ï¼Œå› æ­¤ï¼Œä¸‹ä¸€è½®æœç´¢çš„åŒºé—´æ˜¯ `[mid, right]` æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œæ­¤æ—¶éœ€è¦è®¾ç½®å·¦è¾¹ç•Œ `left = mid`ï¼›
  - æ­¤æ—¶è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šä¸€æ—¦çœ‹åˆ° `left = mid` ä¸ `right = mid - 1` è¿™ç§åœ¨äºŒåˆ†æœç´¢ä¸­è¾¹ç•Œæ”¶ç¼©çš„è¡Œä¸ºï¼Œæˆ‘ä»¬éœ€è¦åœ¨å–ä¸­é—´æ•°çš„æ—¶å€™ï¼Œåšä¸€äº›å°çš„è°ƒæ•´ï¼Œé‚£å°±æ˜¯åœ¨è¿™ä¸ªæ‹¬å·é‡ŒåŠ  1ï¼š`int mid = left + (right - left + 1) / 2;`
  - åŸå› æ˜¯è¿™æ ·çš„ï¼š`/` æ˜¯æ•´æ•°é™¤æ³•ï¼Œå®ƒé»˜è®¤çš„å–æ•´è¡Œä¸ºæ˜¯å‘ä¸‹å–æ•´ï¼Œå³ `(3 + 4) / 2 = 3`ã€‚å½“æˆ‘ä»¬ä½¿ç”¨åŸæ¥å†™æ³•çš„æ—¶å€™ï¼Œ`mid` æ°¸è¿œå–ä¸åˆ° `right`ï¼Œè€Œè¾¹ç•Œæ”¶ç¼©æ˜¯ `left = mid` ä¸ `right = mid - 1` çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç”»ä¸€ä¸ªç¤ºæ„å›¾ï¼Œå®ƒæ˜¯è¿™æ ·çš„ï¼Œå½“å¾…æœç´¢åŒºé—´åªæœ‰ 2 ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œç”±äºä¸­é—´æ•°æ°¸è¿œå–ä¸åˆ°å³è¾¹ï¼Œæˆ‘ä»¬å‘ç°åŒºé—´åˆ†ä¸å¼€ï¼Œæ­¤æ—¶ï¼Œä¸€æ—¦ä»£ç æ‰§è¡Œåˆ°è¿™ä¸€ä¸ªåˆ†æ”¯ï¼Œæ— è®ºæ˜¯å·¦è¾¹ç•Œè¿˜æ˜¯å³è¾¹ç•Œéƒ½ä¸ä¼šå‘ä¸­é—´è€ƒè™‘ï¼Œæ­¤æ—¶ä»£ç è¿›å…¥æ­»å¾ªç¯ï¼›
  - è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®åˆšåˆšæˆ‘å·²ç»è¯´äº†ï¼Œéœ€è¦æŠŠå–ä¸­é—´æ•°æ—¶å€™æ•´æ•°é™¤æ³•çš„ä¸‹å–æ•´è¡Œä¸ºæ”¹æˆä¸Šå–æ•´ï¼Œå³åœ¨æ‹¬å·é‡ŒåŠ  `1`ï¼Œè™½ç„¶è¿™ç§å–æ•´è¡Œä¸ºçš„æ”¹å˜åªéœ€è¦åœ¨æœ€ååªå‰© 2 ä¸ªå…ƒç´ çš„æ—¶å€™åšå‡ºï¼Œä½†æ˜¯æˆ‘ä»¬å…¨ç¨‹å°±è®©å®ƒä¸Šå–æ•´ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼›
  - è¿™ä¸€æ¡æ˜¯ä¸€ä¸ªç»éªŒæ€»ç»“ï¼Œä¹Ÿæ˜¯äººä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­é€æ¸æ€»ç»“å‡ºæ¥çš„ï¼Œå…¶å®è¿™ä¸ªå¤„ç†ä¹Ÿä¸éš¾å‘ç°ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å‡ºç°æ­»å¾ªç¯çš„æ—¶å€™ï¼Œåœ¨ç¨‹åºä¸­æ‰“å°å‡º `left` ã€`right` å’Œ `mid` çš„å–å€¼ï¼Œå°±å¾ˆå®¹æ˜“å‘ç°é—®é¢˜å¹¶æƒ³åˆ°è§£å†³çš„åŠæ³•ï¼›
  - åœ¨é€€å‡ºå¾ªç¯çš„æ—¶å€™ï¼Œè¿™é‡Œä¾ç„¶æ˜¯è¿˜æœ‰ä¸€ä¸ªä¸‹æ ‡çš„å…ƒç´  `left`ï¼ˆæˆ–è€…è¯´æ˜¯ `right` æ­¤æ—¶å®ƒä»¬çš„å€¼ç›¸ç­‰ï¼‰æ²¡æœ‰çœ‹åˆ°ã€‚ä½†æ˜¯æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œå…¶å®ä»£ç èƒ½å¤Ÿæ‰§è¡Œåˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯è¯´æ˜ï¼Œ`target` åœ¨ `nums` ä¸­ä¸€å®šå­˜åœ¨ï¼Œçœ‹ä¸€çœ‹æˆ‘ä»¬ä¹‹å‰çš„åˆ¤æ–­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦åœ¨åˆ¤æ–­ `nums[left]` æ˜¯å¦ç­‰äº `target`ï¼Œæ­¤æ—¶ `left`çš„å€¼å°±ä¸€å®šæ˜¯ `target` åœ¨æœ‰åºæ•°ç»„ `nums` ä¸­æœ€å 1 æ¬¡å‡ºç°çš„ä¸‹æ ‡ ã€‚

è°ƒè¯•ä»£ç ï¼š

Java ä»£ç ï¼š

java

```java
class Solution {
    public int[] searchRange(int[] nums, int target) {
        int len = nums.length;
        if (len == 0) {
            return new int[]{-1, -1};
        }

        int firstPosition = findFirstPosition(nums, target, len);
        if (firstPosition == -1) {
            return new int[]{-1, -1};
        }

        int lastPosition = findLastPosition(nums, target, len);
        return new int[]{firstPosition, lastPosition};
    }

    private int findLastPosition(int[] nums, int target, int len) {
        int left = 0;
        int right = len - 1;
        while (left < right) {
            int mid = left + (right - left) / 2;
            System.out.println("left = " + left + ", mid = " + mid + ", right = " + right);

            // ä¸¥æ ¼å¤§äº target çš„æ—¶å€™ä¸æ˜¯è§£
            if (nums[mid] > target) {
                // ä¸‹ä¸€è½®æœç´¢çš„åŒºé—´æ˜¯ [left, mid - 1]
                System.out.println("ä¸‹ä¸€è½®æœç´¢çš„åŒºé—´æ˜¯ [left, mid - 1]");
                right = mid - 1;
            } else {
                System.out.println("ä¸‹ä¸€è½®æœç´¢çš„åŒºé—´æ˜¯ [mid, right]");
                // [mid, right]
                left = mid;
            }
        }
        return left;
    }

    private int findFirstPosition(int[] nums, int target, int len) {
        int left = 0;
        int right = len - 1;
        while (left < right) {
            int mid = left + (right - left) / 2;
            // ä¸¥æ ¼å°äº target çš„æ—¶å€™ä¸æ˜¯è§£
            if (nums[mid] < target) {
                // ä¸‹ä¸€è½®æœç´¢çš„åŒºé—´æ˜¯ [mid + 1, right]
                left = mid + 1;
            } else {
                right = mid;
            }
        }
        if (nums[left] == target) {
            return left;
        }
        return -1;
    }
}
```

**å¤æ‚åº¦åˆ†æ**ï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(logğ‘)O(logâ¡N)ï¼Œè¿™é‡Œ ğ‘N æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œä¸¤ä¸ªå­é—®é¢˜éƒ½æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºå¯¹æ•°çº§åˆ«ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ï¼Œåªä½¿ç”¨äº†å¸¸æ•°ä¸ªæ•°çš„è¾…åŠ©å˜é‡ã€æŒ‡é’ˆã€‚

ï¼ˆæœ¬èŠ‚å®Œï¼‰