## ã€ŒåŠ›æ‰£ã€ç¬¬ 374 é¢˜ï¼šçŒœæ•°å­—å¤§å°

é¢˜è§£åœ°å€ï¼š[å€Ÿæœ¬é¢˜è¯´ä¸€è¯´å–ä¸­ä½æ•°çš„å†™æ³•ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰](https://leetcode-cn.com/problems/guess-number-higher-or-lower/solution/shi-fen-hao-yong-de-er-fen-cha-zhao-fa-mo-ban-pyth/)ã€‚

è¯´æ˜ï¼šæ–‡æœ¬é¦–å‘åœ¨åŠ›æ‰£çš„é¢˜è§£ç‰ˆå—ï¼Œæ›´æ–°ä¹Ÿä¼šåœ¨ç¬¬ 1 æ—¶é—´åœ¨ä¸Šé¢çš„ç½‘ç«™ä¸­æ›´æ–°ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯ä¸Šé¢çš„æ–‡ç« çš„ä¸€ä¸ªå¿«ç…§ï¼Œæ‚¨å¯ä»¥ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥çœ‹åˆ°å…¶ä»–ç½‘å‹å¯¹æœ¬æ–‡çš„è¯„è®ºã€‚

ä¼ é€é—¨ï¼š[374. çŒœæ•°å­—å¤§å°](https://leetcode-cn.com/problems/guess-number-higher-or-lower/)ã€‚

> æˆ‘ä»¬æ­£åœ¨ç©ä¸€ä¸ªçŒœæ•°å­—æ¸¸æˆã€‚ æ¸¸æˆè§„åˆ™å¦‚ä¸‹ï¼š
> æˆ‘ä» 1 åˆ° n é€‰æ‹©ä¸€ä¸ªæ•°å­—ã€‚ ä½ éœ€è¦çŒœæˆ‘é€‰æ‹©äº†å“ªä¸ªæ•°å­—ã€‚
> æ¯æ¬¡ä½ çŒœé”™äº†ï¼Œæˆ‘ä¼šå‘Šè¯‰ä½ è¿™ä¸ªæ•°å­—æ˜¯å¤§äº†è¿˜æ˜¯å°äº†ã€‚
> ä½ è°ƒç”¨ä¸€ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„æ¥å£ guessğ‘–ğ‘›ğ‘¡ğ‘›ğ‘¢ğ‘šintnumï¼Œå®ƒä¼šè¿”å› 3 ä¸ªå¯èƒ½çš„ç»“æœï¼ˆ-1ï¼Œ1 æˆ– 0ï¼‰ï¼š
>
> -1 : æˆ‘çš„æ•°å­—æ¯”è¾ƒå°
> 1 : æˆ‘çš„æ•°å­—æ¯”è¾ƒå¤§
> 0 : æ­å–œï¼ä½ çŒœå¯¹äº†ï¼
> ç¤ºä¾‹ :
>
> è¾“å…¥: n = 10, pick = 6
> è¾“å‡º: 6

## å€Ÿæœ¬é¢˜è¯´ä¸€è¯´å–ä¸­ä½æ•°çš„å†™æ³•ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰

ä»¥ä¸‹ä»£ç æ˜¯æ ¹æ®æˆ‘åœ¨åˆ·é¢˜è¿‡ç¨‹ä¸­æ€»ç»“å‡ºæ¥çš„æœ€å¥½ç”¨çš„äºŒåˆ†æ³•æ¨¡æ¿å†™æˆã€‚æˆ‘ä¸“é—¨æŠŠè¿™ä¸ªäºŒåˆ†æ³•æ¨¡æ¿å¥½ç”¨çš„åœ°æ–¹ã€ä½¿ç”¨å®ƒçš„æŠ€å·§å’Œæ³¨æ„äº‹é¡¹æ•´ç†åœ¨äº†ã€ŒåŠ›æ‰£ã€ç¬¬ 35 é¢˜ï¼šæœç´¢æ’å…¥ä½ç½®çš„é¢˜è§£[ã€Šç‰¹åˆ«å¥½ç”¨çš„äºŒåˆ†æŸ¥æ‰¾æ³•æ¨¡æ¿ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰ã€‹](https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/)ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚

**å‚è€ƒä»£ç **ï¼š

- æ³¨æ„ï¼šä»¥ä¸‹è™½ç„¶æˆ‘ç”¨ä¸¤ç§è¯­è¨€ä½œç­”ï¼Œä½†æ˜¯å®ƒä»¬çš„é€»è¾‘ä¸Šè¿˜æœ‰ä¸€ç‚¹ç‚¹åŒºåˆ«ï¼Œé‚£å°±æ˜¯åœ¨å–ä¸­ä½æ•°çš„æ—¶å€™ï¼Œç­”æ¡ˆåœ¨ä¸Šé¢é‚£ç¯‡é¢˜è§£ä¸­ã€‚

Python

```Python
def guess(num):
    pass


class Solution(object):
    def guessNumber(self, n):
        left = 1
        right = n
        while left < right:
            # mid = left + (right - left) // 2
            mid = (left + right) >> 1
            if guess(mid) == 1:
                left = mid + 1
            else:
                right = mid
        # æœ€åå‰©ä¸‹çš„æ•°ä¸€å®šæ˜¯æ‰€æ±‚ï¼Œæ— éœ€åå¤„ç†
        return left
```

Java

```Java
class GuessGame {

    private static final int NUM = 6;

    int guess(int num) {
        if (num == NUM) {
            return 0;
        } else if (num < NUM) {
            return -1;
        }
        return 1;
    }
}


public class Solution extends GuessGame {

    public int guessNumber(int n) {
        int left = 1;
        int right = n;
        while (left < right) {
            // int mid = left + (right - left + 1) / 2;
            int mid = (left + right + 1) >>> 1;
            int guessNum = guess(mid);
            if (guessNum == -1) {
                right = mid - 1;
            } else {
                left = mid;
            }
        }
        // æœ€åå‰©ä¸‹çš„æ•°ä¸€å®šæ˜¯æ‰€æ±‚ï¼Œæ— éœ€åå¤„ç†
        return left;
    }


    public static void main(String[] args) {
        Solution solution = new Solution();
        int n = 10;
        int guessNumber = solution.guessNumber(n);
        System.out.println(guessNumber);
    }
}
```

------

ä»¥ä¸Šæ˜¯æœ¬é¢˜é¢˜è§£ï¼Œä»¥ä¸‹æ‰æ˜¯æœ¬æ–‡çœŸæ­£æƒ³è¯´çš„ï¼Œä½ åº”è¯¥å·²ç»æ³¨æ„åˆ°äº†ï¼Œä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œ`mid = left + (right - left) // 2` å’Œ `int mid = left + (right - left + 1) / 2;` éƒ½è¢«æˆ‘æ³¨é‡Šæ‰äº†ï¼Œä¸æ˜¯å› ä¸ºå®ƒä»¬ä¸æ­£ç¡®ï¼Œè€Œæ˜¯å› ä¸ºå®ƒä»¬ä¸å¤Ÿå¥½ï¼Œä¸‹é¢å°±æ¥å…·ä½“è¯´è¯´ã€‚

1ã€æœ€æ—©å­¦ä¹ äºŒåˆ†æ³•çš„æ—¶å€™ï¼Œå†™ä¸­ä½æ•°çš„ç´¢å¼•æ˜¯è¿™æ ·çš„ï¼š

Python ä»£ç ï¼š

python

```python
mid = (left + right) // 2
```

Java ä»£ç ï¼š

java

```java
int mid = (left + right) / 2;
```

2ã€åæ¥è¢«å‘ŠçŸ¥åœ¨ `left` å’Œ `right` å¾ˆå¤§çš„æ—¶å€™ï¼Œ`left + right` ä¼šå‘ç”Ÿæ•´å‹æº¢å‡ºï¼Œå˜æˆè´Ÿæ•°ï¼Œè¿™æ˜¯ä¸€ä¸ª bug å¾—æ”¹ï¼

äºæ˜¯æˆ‘ä»¬å†™æˆï¼š

Python ä»£ç ï¼š

python

```python
mid = left + (right - left) // 2
```

Java ä»£ç ï¼š

java

```java
int mid = left + (right - left) / 2;
```

ç„¶ååˆè¢«å‘ŠçŸ¥ `mid = left + (right - left) // 2` åœ¨ `right` å¾ˆå¤§ã€ `left` æ˜¯è´Ÿæ•°ä¸”å¾ˆå°çš„æ—¶å€™ï¼Œ `right - left` ä¹Ÿæœ‰å¯èƒ½è¶…è¿‡ int ç±»å‹èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ï¼Œåªä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ `left` å’Œ `right` è¡¨ç¤ºçš„æ˜¯æ•°ç»„ç´¢å¼•å€¼ï¼Œ`left` æ˜¯éè´Ÿæ•°ï¼Œå› æ­¤ `right - left` æº¢å‡ºçš„å¯èƒ½æ€§å¾ˆå°ã€‚

3ã€æœ€åï¼Œåœ¨ Java çš„ JDK çš„ `Collections` å’Œ `Arrays` æä¾›çš„ `binarySearch` æ–¹æ³•é‡Œçœ‹åˆ°äº†ï¼Œä¸­ä½æ•°æ˜¯è¿™æ ·å–çš„ï¼š

java

```java
int mid = (low + high) >>> 1;
```

æ€ä¹ˆåˆå˜æˆâ€œ+â€äº†ï¼Œä¸€å¤´é›¾æ°´å•Šï¼Œä¼šæ•´å‹æº¢å‡ºå—ï¼Ÿåæ¥æŸ¥äº†æŸ¥èµ„æ–™ï¼Œæœ‰å¯èƒ½ä¼šæ•´å‹æº¢å‡ºçš„ï¼Œä¸è¿‡ç»“æœä¾ç„¶æ­£ç¡®ã€‚ä¸‹é¢æ˜¯åŸå› ï¼š

> `left + right` åœ¨å‘ç”Ÿæ•´å‹æº¢å‡ºä»¥åï¼Œä¼šå˜æˆè´Ÿæ•°ï¼Œæ­¤æ—¶å¦‚æœé™¤ä»¥ 2 ï¼Œ`mid` æ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œä½†æ˜¯ç»è¿‡**æ— ç¬¦å·å³ç§»**ï¼Œå¯ä»¥å¾—åˆ°åœ¨ä¸æº¢å‡ºçš„æƒ…å†µä¸‹æ­£ç¡®çš„ç»“æœã€‚

é¦–å…ˆè§£é‡Šâ€œæ— ç¬¦å·å³ç§»â€ï¼Œåœ¨ Java ä¸­ï¼Œæ— ç¬¦å·å³ç§»è¿ç®—ç¬¦ `>>>` å’Œå³ç§»è¿ç®—ç¬¦ `>>` æœ‰åŒºåˆ«ï¼š

- å³ç§»è¿ç®—ç¬¦ `>>` åœ¨å³ç§»æ—¶ï¼Œä¸¢å¼ƒå³è¾¹æŒ‡å®šä½æ•°ï¼Œå·¦è¾¹è¡¥ä¸Šç¬¦å·ä½ï¼›
- æ— ç¬¦å·å³ç§»è¿ç®—ç¬¦ `>>>` åœ¨å³ç§»æ—¶ï¼Œä¸¢å¼ƒå³è¾¹æŒ‡å®šä½æ•°ï¼Œå·¦è¾¹è¡¥ä¸Š 00ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºæ­£æ•°æ¥è¯´ï¼ŒäºŒè€…ä¸€æ ·ï¼Œè€Œè´Ÿæ•°é€šè¿‡ `>>>` åèƒ½å˜æˆæ­£æ•°ã€‚

äº†è§£äº†è¿™ä¸€ç‚¹ï¼Œå°±èƒ½å¤Ÿç†è§£ Java ä¸­ç”¨ `int mid = (low + high) >>> 1;` çš„åŸå› äº†ï¼Œå…³é”®ä¸åœ¨ â€œ+â€ ï¼Œè€Œæ˜¯â€œæ— ç¬¦å·å³ç§»â€ï¼Œåœ¨ Java çš„ `Collections` å’Œ `Arrays` æä¾›çš„ `binarySearch` æ–¹æ³•é‡Œï¼Œ`low` å’Œ `high` éƒ½è¡¨ç¤ºç´¢å¼•å€¼ï¼Œå®ƒä»¬éƒ½æ˜¯éè´Ÿæ•°ï¼Œå³ä½¿ç›¸åŠ ä»¥åæ•´å‹æº¢å‡ºï¼Œç»“æœè¿˜æ˜¯æ­£ç¡®çš„ï¼Œâ€œä½è¿ç®—â€æœ¬èº«å°±æ¯”å…¶å®ƒè¿ç®—ç¬¦å¿«ï¼Œå› æ­¤ä½¿ç”¨â€œ+â€å’Œâ€œæ— ç¬¦å·å³ç§»â€æ˜¯æ—¢å¿«åˆå¥½çš„åšæ³•ã€‚

å¦‚æœä½ ç”¨ Java å†™çš„è¯ï¼Œä¸å¦¨åšä¸‹é¢çš„è¯•éªŒï¼š

ç”¨â€œ+â€å’Œé™¤æ³•ï¼Œä¸èƒ½é€šè¿‡ï¼Œæç¤ºä¹Ÿå¾ˆæ¸…æ¥šäº†ã€‚



![image.png](https://pic.leetcode-cn.com/049e64ded6739e8bd6955a1d5e3ef76acc0aac0ad12909bdd58772dd6d465240-image.png)

**image.png**



å¦‚æœä½ ç”¨ Python çš„è¯ï¼Œå°±å¯ä»¥è¿‡ï¼Œè¿™æ˜¯å› ä¸ºï¼šå½“ `left + right` å¾ˆå¤§çš„æ—¶å€™ï¼ŒPython å°±è‡ªåŠ¨å¸®ä½ è½¬æˆ long ç±»å‹äº†ï¼Œå› æ­¤ç»“æœä¹Ÿä¸ä¼šé”™ã€‚



![image.png](https://pic.leetcode-cn.com/46e50c5802c6b28bafe78c7b3ca88872139844177e929259ab5d0117ba61d52d-image.png)

**image.png**



æ€»ç»“ï¼š

1ã€`int mid = (left + right) / 2;` æ˜¯åˆçº§å†™æ³•ï¼Œæ˜¯æœ‰ bug çš„ï¼›

2ã€`int mid = left + (right - left) / 2;` æ˜¯æ­£ç¡®çš„å†™æ³•ï¼Œè¯´æ˜ä½ è€ƒè™‘åˆ°äº†æ•´å‹æº¢å‡ºçš„é£é™©ï¼›

3ã€`int mid = (low + high) >>> 1;` é¦–å…ˆè‚¯å®šæ˜¯æ­£ç¡®çš„å†™æ³•ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªè£… âŒ çš„å†™æ³•ï¼Œç†ç”±ä¸Šé¢å·²ç»å™è¿°è¿‡äº†ã€‚

ï¼ˆæœ¬èŠ‚å®Œï¼‰