## ã€ŒåŠ›æ‰£ã€ç¬¬ 230 é¢˜ï¼šäºŒå‰æœç´¢æ ‘ä¸­ç¬¬ K å°çš„å…ƒç´ 

é¢˜è§£åœ°å€ï¼š[é€’å½’ä¸éé€’å½’å†™æ³•ï¼ˆåŒç†å®Œæˆç¬¬ 144ã€94ã€145 é¢˜ï¼ŒPython ä»£ç ã€Java ä»£ç ï¼‰](https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/solution/di-gui-yu-fei-di-gui-xie-fa-tong-li-wan-cheng-di-1/)ã€‚

è¯´æ˜ï¼šæ–‡æœ¬é¦–å‘åœ¨åŠ›æ‰£çš„é¢˜è§£ç‰ˆå—ï¼Œæ›´æ–°ä¹Ÿä¼šåœ¨ç¬¬ 1 æ—¶é—´åœ¨ä¸Šé¢çš„ç½‘ç«™ä¸­æ›´æ–°ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯ä¸Šé¢çš„æ–‡ç« çš„ä¸€ä¸ªå¿«ç…§ï¼Œæ‚¨å¯ä»¥ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥çœ‹åˆ°å…¶ä»–ç½‘å‹å¯¹æœ¬æ–‡çš„è¯„è®ºã€‚

ä¼ é€é—¨ï¼š[230. äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ ](https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/)ã€‚

> ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•° kthSmallest æ¥æŸ¥æ‰¾å…¶ä¸­ç¬¬ k ä¸ªæœ€å°çš„å…ƒç´ ã€‚
>
> è¯´æ˜ï¼š
> ä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œ1 â‰¤ k â‰¤ äºŒå‰æœç´¢æ ‘å…ƒç´ ä¸ªæ•°ã€‚
>
> ç¤ºä¾‹ 1:
>
> è¾“å…¥: root = [3,1,4,null,2], k = 1
> 3
> /
> 1 4
>
> 2
> è¾“å‡º: 1
> ç¤ºä¾‹ 2:
>
> è¾“å…¥: root = [5,3,6,2,4,null,null,1], k = 3
> 5
> /
> 3 6
> /
> 2 4
> /
> 1
> è¾“å‡º: 3
> è¿›é˜¶ï¼š
> å¦‚æœäºŒå‰æœç´¢æ ‘ç»å¸¸è¢«ä¿®æ”¹ï¼ˆæ’å…¥/åˆ é™¤æ“ä½œï¼‰å¹¶ä¸”ä½ éœ€è¦é¢‘ç¹åœ°æŸ¥æ‰¾ç¬¬ k å°çš„å€¼ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ– kthSmallest å‡½æ•°ï¼Ÿ

## é€’å½’ä¸éé€’å½’å†™æ³•ï¼ˆåŒç†å®Œæˆç¬¬ 144ã€94ã€145 é¢˜ï¼ŒPython ä»£ç ã€Java ä»£ç ï¼‰

**æ€è·¯åˆ†æ**ï¼šåˆ©ç”¨â€œäºŒå‰æœç´¢æ ‘â€åœ¨â€œä¸­åºéå†â€ä»¥åï¼Œå¾—åˆ°çš„æ˜¯æœ‰åºæ•°ç»„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸­åºéå†å¥½äº†ï¼Œéå†åˆ°ç¬¬ ğ‘˜k ä¸ªæ•°å³å¯ã€‚

> æˆ‘å†™ä¸‹æ¥å‘ç°é€’å½’çš„å†™æ³•æ¯”è¾ƒå®¹æ˜“å†™é”™ï¼Œè¦è®¾ç½®å…¨å±€å˜é‡ï¼Œè€Œéé€’å½’çš„å†™æ³•è¿˜ç›¸å¯¹æ¯”è¾ƒâ€œé€šç”¨â€ä¸”å¥½ç†è§£ã€‚

**å‚è€ƒä»£ç  1**ï¼šä½¿ç”¨é€’å½’â€œä¸­åºéå†â€ã€‚

Python ä»£ç ï¼š

Python

```Python
class TreeNode:
    def __init__(self, x):
        self.val = x
        self.left = None
        self.right = None

# ä½¿ç”¨é€’å½’çš„æ–¹æ³•ï¼Œä¸­åºéå†

class Solution:

    def __init__(self):
        self.counter = 0
        self.res = 0

    def kthSmallest(self, root, k):
        # é€’å½’æ‰§è¡Œå·¦å­æ ‘çš„é€»è¾‘
        if root.left:
            # ä¸æ˜¯ç©ºï¼Œæ‰ç»§ç»­éå†
            self.kthSmallest(root.left, k)

        # åœ¨è¿™é‡Œæ‰§è¡Œæ“ä½œï¼Œæ•°åˆ°ç¬¬ k ä¸ªå³å¯
        self.counter += 1
        # print(root.val)
        if self.counter == k:
            # æ³¨æ„ï¼šåƒä¸‡ä¸èƒ½åœ¨è¿™é‡Œè¿”å›ï¼Œååºéå†è¿˜è¦ç»§ç»­è¿›è¡Œä¸‹å»
            self.res = root.val
            # æ³¨æ„ï¼šè¿™é‡Œä¸èƒ½åŠ  return

        # é€’å½’æ‰§è¡Œå³å­æ ‘çš„é€»è¾‘
        if root.right:
            self.kthSmallest(root.right, k)
        return self.res


if __name__ == '__main__':
    node3 = TreeNode(3)
    node1 = TreeNode(1)
    node4 = TreeNode(4)
    node2 = TreeNode(2)

    node3.left = node1
    node3.right = node4
    node1.right = node2

    solution = Solution()
    result = solution.kthSmallest(node3, k=1)
    print(result)
```

Java ä»£ç ï¼š

Java

```Java
class TreeNode {
    int val;
    TreeNode left;
    TreeNode right;

    TreeNode(int x) {
        val = x;
    }
}

// è§£é¢˜å…³é”®ï¼šä¸­åºéå†
// https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/description/
// ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°kthSmallestæ¥æŸ¥æ‰¾å…¶ä¸­ç¬¬ k ä¸ªæœ€å°çš„å…ƒç´ ã€‚
// åªè¦åˆ©ç”¨äºŒåˆ†æœç´¢æ ‘çš„ä¸­åºéå†ï¼Œå°±å¯ä»¥å®Œæˆã€‚
public class Solution {
    private int count = 0;
    private int res = 0;

    private void dfs(TreeNode node) {
        if (node == null) {
            // ä»€ä¹ˆéƒ½ä¸åš
            return;
        }
        dfs(node.left);
        count--;
        if (count == 0) {
            this.res = node.val;
        }
        dfs(node.right);
    }

    // k å¦‚æœåœ¨æ–¹æ³•ä¼ é€’çš„è¿‡ç¨‹ä¸­æ˜¯å€¼ä¼ é€’ï¼Œæ‰€ä»¥æŠŠå®ƒè®¾ç½®ä¸ºæˆå‘˜å˜é‡ï¼Œè¿™æ ·å°±æ˜¯å¼•ç”¨ä¼ é€’
    // å› ä¸ºæˆ‘ä»¬è¦ç”¨åˆ° k å…¨å±€çš„å€¼ï¼Œå»æ•°å‡ºï¼Œæˆ‘æ˜¯ç¬¬å‡ ä¸ªä¸­åºéå†åˆ°çš„å€¼
    public int kthSmallest(TreeNode root, int k) {
        count = k;
        dfs(root);
        return res;
    }

    public static void main(String[] args) {
        TreeNode treeNode1 = new TreeNode(10);
        TreeNode treeNode2 = new TreeNode(15);
        TreeNode treeNode3 = new TreeNode(20);
        treeNode2.left = treeNode1;
        treeNode2.right = treeNode3;
        Solution solution = new Solution();
        int kthSmallest = solution.kthSmallest(treeNode2, 2);
        System.out.println(kthSmallest);
    }
}
```

ä¸‹é¢æ˜¯ Python çš„å¦ä¸€ç§å†™æ³•ï¼šä½¿ç”¨ `global` å…³é”®å­—ï¼Œä»éœ€ä½¿ç”¨è¾…åŠ©å‡½æ•°ï¼š

Python ä»£ç ï¼š

Python

```Python
class TreeNode:
    def __init__(self, x):
        self.val = x
        self.left = None
        self.right = None


class Solution:
    def kthSmallest(self, root, k):
        global counter, res
        counter = 0
        res = 0

        def dfs(root, k):
            if not root:
                # å¦‚æœæ˜¯ç©ºï¼Œç›´æ¥é€€å‡º
                return
            dfs(root.left, k)
            global counter, res
            counter += 1
            if counter == k:
                res = root.val
            dfs(root.right, k)

        dfs(root, k)
        return res
```

**å‚è€ƒä»£ç  2**ï¼šæ¨¡æ‹Ÿç³»ç»Ÿæ ˆçš„æ–¹å¼ï¼šä½¿ç”¨äºŒå‰æ ‘éé€’å½’éå†çš„é€šç”¨æ–¹æ³•ã€‚ä½¿ç”¨åŒæ ·çš„çš„æ–¹æ³•è¿˜å¯ä»¥è§£å†³ [ã€ŒåŠ›æ‰£ã€LeetCode ç¬¬ 144 é¢˜ï¼šäºŒå‰æ ‘çš„å‰åºéå†](https://leetcode-cn.com/problems/binary-tree-preorder-traversal/)ã€[ã€ŒåŠ›æ‰£ã€ç¬¬ 94 é¢˜ï¼šäºŒå‰æ ‘çš„ä¸­åºéå†](https://leetcode-cn.com/problems/binary-tree-inorder-traversal)ã€[ã€ŒåŠ›æ‰£ã€ç¬¬ 145 é¢˜ï¼šäºŒå‰æ ‘çš„ååºéå†](https://leetcode-cn.com/problems/binary-tree-postorder-traversal)ã€‚

Python ä»£ç ï¼š

Python

```Python
class TreeNode:
    def __init__(self, x):
        self.val = x
        self.left = None
        self.right = None


class Solution:

    # æ¨¡æ‹Ÿç³»ç»Ÿæ ˆçš„æ–¹å¼å®ç°ï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒé€šç”¨çš„åšæ³•ï¼Œ
    # å¯ä»¥ä½œä¸ºäºŒå‰æ ‘çš„ä¸‰ç§éé€’å½’éå†

    def kthSmallest(self, root, k):
        # 0 è¡¨ç¤ºå½“å‰éå†åˆ°å®ƒï¼Œ1 è¡¨ç¤ºå‹å…¥æ ˆ
        # åˆšå¼€å§‹æ˜¯ 1 ï¼Œä¸è¦å†™æˆ 0 äº†
        stack = [(1, root)]

        while stack:
            command, node = stack.pop()
            if node is None:
                # ä¸èƒ½å†™ return ï¼Œè¿™ä¸æ˜¯é€’å½’
                continue
            if command == 0:
                k -= 1
                if k == 0:
                    return node.val
            else:
                # æ­¤æ—¶ command == 1 çš„æ—¶å€™ï¼Œè¡¨ç¤ºé€’å½’éå†åˆ°çš„
                # æ³¨æ„ï¼šå†™çš„æ—¶å€™å€’è¿‡æ¥å†™
                stack.append((1, node.right))
                stack.append((0, node))
                stack.append((1, node.left))
```

å…¶å®å…¥æ ˆçš„æ—¶å€™ï¼Œå°±å¯ä»¥åˆ¤æ–­ï¼Œæˆ‘ä»¬åªå°†éç©ºç»“ç‚¹å…¥æ ˆï¼Œ**æ¨èä¸‹é¢è¿™ç§å†™æ³•**ï¼š

Python ä»£ç ï¼š

Python

```Python
class Solution:
    def kthSmallest(self, root, k):
        stack = [(1, root)]
        while stack:
            command, node = stack.pop()
            if command == 0:
                k -= 1
                if k == 0:
                    return node.val
            else:
                # æ¨¡æ‹Ÿç³»ç»Ÿæ ˆå®ç°ä¸­åºéå†(å…ˆå·¦è¾¹ã€å†è‡ªå·±ã€å†å³è¾¹)
                # æ³¨æ„ï¼šå†™çš„æ—¶å€™å€’è¿‡æ¥å†™
                if node.right:
                    stack.append((1, node.right))
                stack.append((0, node))
                if node.left:
                    stack.append((1, node.left))
```

Java ä»£ç ï¼š

Java

```Java
import java.util.Stack;

public class Solution4 {

    private enum Action {
        // GO è¡¨ç¤ºé€’å½’å¤„ç†
        // ADDTORESULT è¡¨ç¤ºå½“å‰é©¬ä¸Šæ‰§è¡Œå°†ç»“ç‚¹çš„å€¼æ·»åŠ åˆ°ç»“æœé›†ä¸­
        GO, ADDTORESULT
    }

    private class Command {
        private Action action;
        private TreeNode node;

        public Command(Action action, TreeNode node) {
            this.action = action;
            this.node = node;
        }
    }


    public int kthSmallest(TreeNode root, int k) {
        Stack stack = new Stack<>();
        stack.add(new Command(Action.GO, root));
        while (!stack.isEmpty()) {
            Command cur = stack.pop();
            TreeNode node = cur.node;
            if (cur.action == Action.ADDTORESULT) {
                k--;
                if (k == 0) {
                    return node.val;
                }

            } else {
                assert cur.action == Action.GO;
                if (node.right != null) {
                    stack.add(new Command(Action.GO, node.right));
                }
                stack.add(new Command(Action.ADDTORESULT, node));
                if (node.left != null) {
                    stack.add(new Command(Action.GO, node.left));
                }
            }
        }
        throw new RuntimeException("å‚æ•°é”™è¯¯");
    }

}
```