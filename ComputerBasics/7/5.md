## ã€ŒåŠ›æ‰£ã€ç¬¬ 71 é¢˜ï¼šç®€åŒ–è·¯å¾„ï¼ˆä¸­ç­‰ï¼‰

ä¼ é€é—¨ï¼š[71. ç®€åŒ–è·¯å¾„](https://leetcode-cn.com/problems/simplify-path/)ã€‚

> ä»¥ Unix é£æ ¼ç»™å‡ºä¸€ä¸ªæ–‡ä»¶çš„**ç»å¯¹è·¯å¾„**ï¼Œä½ éœ€è¦ç®€åŒ–å®ƒã€‚æˆ–è€…æ¢å¥è¯è¯´ï¼Œå°†å…¶è½¬æ¢ä¸ºè§„èŒƒè·¯å¾„ã€‚
>
> åœ¨ Unix é£æ ¼çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªç‚¹ï¼ˆ`.`ï¼‰è¡¨ç¤ºå½“å‰ç›®å½•æœ¬èº«ï¼›æ­¤å¤–ï¼Œä¸¤ä¸ªç‚¹ ï¼ˆ`..`ï¼‰ è¡¨ç¤ºå°†ç›®å½•åˆ‡æ¢åˆ°ä¸Šä¸€çº§ï¼ˆæŒ‡å‘çˆ¶ç›®å½•ï¼‰ï¼›ä¸¤è€…éƒ½å¯ä»¥æ˜¯å¤æ‚ç›¸å¯¹è·¯å¾„çš„ç»„æˆéƒ¨åˆ†ã€‚æ›´å¤šä¿¡æ¯è¯·å‚é˜…ï¼š[Linux / Unixä¸­çš„ç»å¯¹è·¯å¾„ vs ç›¸å¯¹è·¯å¾„](https://blog.csdn.net/u011327334/article/details/50355600)
>
> è¯·æ³¨æ„ï¼Œè¿”å›çš„è§„èŒƒè·¯å¾„å¿…é¡»å§‹ç»ˆä»¥æ–œæ  `/` å¼€å¤´ï¼Œå¹¶ä¸”ä¸¤ä¸ªç›®å½•åä¹‹é—´å¿…é¡»åªæœ‰ä¸€ä¸ªæ–œæ  `/`ã€‚æœ€åä¸€ä¸ªç›®å½•åï¼ˆå¦‚æœå­˜åœ¨ï¼‰**ä¸èƒ½**ä»¥ `/`ç»“å°¾ã€‚æ­¤å¤–ï¼Œè§„èŒƒè·¯å¾„å¿…é¡»æ˜¯è¡¨ç¤ºç»å¯¹è·¯å¾„çš„**æœ€çŸ­**å­—ç¬¦ä¸²ã€‚
>
> **ç¤ºä¾‹ 1ï¼š**
>
> ```
>  è¾“å…¥ï¼š"/home/"
>  è¾“å‡ºï¼š"/home"
>  è§£é‡Šï¼šæ³¨æ„ï¼Œæœ€åä¸€ä¸ªç›®å½•ååé¢æ²¡æœ‰æ–œæ ã€‚
> ```
>
> **ç¤ºä¾‹ 2ï¼š**
>
> ```
>  è¾“å…¥ï¼š"/../"
>  è¾“å‡ºï¼š"/"
>  è§£é‡Šï¼šä»æ ¹ç›®å½•å‘ä¸Šä¸€çº§æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºæ ¹æ˜¯ä½ å¯ä»¥åˆ°è¾¾çš„æœ€é«˜çº§ã€‚
> ```
>
> **ç¤ºä¾‹ 3ï¼š**
>
> ```
>  è¾“å…¥ï¼š"/home//foo/"
>  è¾“å‡ºï¼š"/home/foo"
>  è§£é‡Šï¼šåœ¨è§„èŒƒè·¯å¾„ä¸­ï¼Œå¤šä¸ªè¿ç»­æ–œæ éœ€è¦ç”¨ä¸€ä¸ªæ–œæ æ›¿æ¢ã€‚
> ```
>
> **ç¤ºä¾‹ 4ï¼š**
>
> ```
>  è¾“å…¥ï¼š"/a/./b/../../c/"
>  è¾“å‡ºï¼š"/c"
> ```
>
> **ç¤ºä¾‹ 5ï¼š**
>
> ```
>  è¾“å…¥ï¼š"/a/../../b/../c//.//"
>  è¾“å‡ºï¼š"/c"
> ```
>
> **ç¤ºä¾‹ 6ï¼š**
>
> ```
>  è¾“å…¥ï¼š"/a//b////c/d//././/.."
>  è¾“å‡ºï¼š"/a/b/c"
> ```

å‚è€ƒäº†å¦‚ä¸‹çš„æ–‡ç« ï¼šhttp://blog.csdn.net/u012249528/article/details/46705867

è¿™é“é¢˜ç»™å‡ºä¸€ä¸ªâ€œå­—ç¬¦ä¸²â€ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¸­æ˜¯æœ‰ä¸€äº›æ–œæ çš„ï¼Œè¿™äº›æ–œæ çš„å«ä¹‰æ˜¯ç›®å½•æˆ–è€…æ“ä½œçš„åˆ†éš”ç¬¦ã€‚

- å¦‚æœæ˜¯è‹±æ–‡å­—æ¯ï¼Œå°±è¡¨ç¤ºä¸€ä¸ªç›®å½•ã€‚
- å¦‚æœæ˜¯ä¸€ä¸ªç‚¹ `.` è¡¨ç¤ºåœç•™åœ¨å½“å‰ç›®å½•ï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªç‚¹ `..` è¡¨ç¤ºè¿”å›ä¸Šä¸€çº§ç›®å½•ã€‚

é‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦æˆ‘ä»¬ç®€åŒ–å®ƒå‘¢ï¼ŸåŸå› æ˜¯æœ‰ `..` è¡¨ç¤ºè¿”å›ä¸Šä¸€çº§ç›®å½•è¿™ç§æ“ä½œçš„å­˜åœ¨ã€‚

ä¾‹å¦‚ï¼š`/a/b/../..` è¿™ä¸ªè¡¨ç¤ºè·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå…ˆè¿›å…¥ç›®å½• `a` å†è¿›å…¥ç›®å½• `b` ï¼Œç„¶åé‡åˆ°ä¸¤ä¸ª`..` å›åˆ°å®ƒçš„çˆ¶ç›®å½•ï¼Œä¹Ÿå°±æ˜¯å›åˆ°äº†ç›®å½• `a` ï¼Œç„¶ååˆé‡åˆ°ä¸¤ä¸ª`..` å›åˆ°å®ƒçš„çˆ¶ç›®å½•ï¼Œä¹Ÿå°±æ˜¯å›åˆ°äº†æ ¹ç›®å½• `/` ï¼Œé‚£ä¹ˆè¿™ä¸ªè·¯å¾„å°±è¢«ç®€åŒ–ä¸ºä¸€ä¸ªæ–œæ  `/`ã€‚é¢˜ç›®å°±æ˜¯è¦æˆ‘ä»¬è¿”å›è¿™ä¸ªæ–œæ ã€‚

å¦å¤–æˆ‘ä»¬æ³¨æ„åˆ°ç¤ºä¾‹ 3 ï¼Œæœ‰ä¸¤ä¸ªæ–œæ è¿åœ¨ä¸€èµ·çš„æƒ…å†µï¼Œæˆ‘ä»¬è®¤ä¸ºæ­¤æ—¶è¿™ä¸¤ä¸ªæ–œæ ä¸­é—´æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ï¼Œå®ƒç­‰ä»·äºä¸€ä¸ªç‚¹ `.` ï¼Œå³ä»€ä¹ˆéƒ½ä¸åšã€‚

è§£å†³è¿™é“é—®é¢˜çš„æ€è·¯æ˜¯ï¼š

1ã€éœ€è¦å…ˆå¯¹å­—ç¬¦ä¸²æ ¹æ®æ–œæ  `/`è¿›è¡Œåˆ†å‰²ï¼Œå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²æ•°ç»„çš„å­—ç¬¦ä¸²å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç§ï¼š`.`ã€`..`ã€`''`ã€å’Œè¡¨ç¤ºç›®å½•çš„å­—æ¯ï¼›

2ã€æˆ‘ä»¬è¯»å–ç›®å½•ï¼Œä¸€å®šæ˜¯ä»æ ¹ç›®å½• `/` ä¸€å±‚ä¸€å±‚å¾€ä¸‹è¯»çš„ï¼Œå› æ­¤**ä»å·¦åˆ°å³**éå†åˆ†å‰²ä»¥åå¾—åˆ°çš„å­—ç¬¦ä¸²æ•°ç»„ï¼›

3ã€ç‰¹åˆ«æ³¨æ„åˆ°ä¸¤ä¸ªç‚¹ `..` è¿™ä¸ªå­—ç¬¦ä¸²çš„å«ä¹‰ï¼Œæ ¹æ®æˆ‘ä»¬åˆšåˆšä¸¾å‡ºçš„ä¾‹å­ï¼Œå®ƒå…¶å®æ˜¯æˆ‘ä»¬ä¸»è¦æƒ³è¦è¦ç®€åŒ–çš„å¯¹è±¡ï¼Œè¦å›åˆ°ä¸Šä¸€å±‚ç›®å½•ï¼Œå› æ­¤æˆ‘ä»¬å°±éœ€è¦çŸ¥é“ä¸Šä¸€å±‚ç›®å½•æ˜¯ä»€ä¹ˆï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªå˜é‡è®°ä½ä¸Šä¸€å±‚ç›®å½•æ˜¯ä»€ä¹ˆã€‚ä»åˆšåˆšé‚£ä¸ªä¾‹å­æˆ‘ä»¬è¿˜å¯ä»¥çœ‹å‡ºï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ä¸Šä¸Šçº§ç›®å½•æ˜¯ä»€ä¹ˆï¼Œå› æ­¤ï¼Œè®°å½•ä¸Šçº§ç›®å½•ã€ä¸Šä¸Šçº§ç›®å½•çš„å˜é‡å°±åº”è¯¥æ˜¯ä¸€ä¸ªåˆ—è¡¨æˆ–è€…è¯´å®¹å™¨å¯¹è±¡ã€‚

è¿™å’Œæˆ‘ä»¬ä¹‹å‰è¯´æ ˆå’Œé˜Ÿåˆ—éƒ½æ˜¯å‚¨å­˜æ•°æ®çš„å®¹å™¨æ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¯»åˆ°çš„æ•°æ®æš‚æ—¶å­˜èµ·æ¥ï¼Œæ ˆå’Œé˜Ÿåˆ—å°±æ˜¯ä¸¤ç§å¸¸è§çš„å­˜å‚¨æ•°æ®çš„å®¹å™¨ã€‚

å› ä¸º `..` è¿™ä¸ªå­—ç¬¦å›é€€åˆ°ä¸Šä¸€çº§ç›®å½•ï¼Œä¸Šä¸€çº§ç›®å½•ç›¸å¯¹äºä¸Šä¸Šçº§ç›®å½•æ˜¯åè¯»å‡ºçš„ï¼Œåè¯»çš„æ•°æ®è¦å…ˆè¢«è¿”å›ï¼Œæ˜¾ç„¶æ ˆå°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„å‚¨å­˜è¯»å–ç›®å½•çš„å®¹å™¨å¯¹è±¡ã€‚

è€ƒè™‘æ¸…æ¥šè¿™ä¸ªé—®é¢˜ä»¥åï¼Œå®é™…ä¸Šæ€è·¯å°±å·²ç»æœ‰äº†ã€‚

4ã€ç®—æ³•æ˜¯ï¼šä»å·¦å‘å³éå†å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¦‚æœé‡åˆ°å­—æ¯å°±ç›´æ¥å…¥æ ˆï¼Œå¦‚æœé‡åˆ°ä¸€ä¸ªç‚¹ `.` æˆ–è€…ç©ºæ ¼çš„æ—¶å€™ï¼Œå°±ä»€ä¹ˆéƒ½ä¸åšã€‚å¦‚æœé‡åˆ°ä¸¤ä¸ªç‚¹ `..` ï¼Œå°±å°†æ ˆé¡¶å…ƒç´ ä»æ ˆä¸­å¼¹å‡ºã€‚

åœ¨è¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ä¸€ç‚¹ï¼Œæˆ‘ä»¬çœ‹ä¸€çœ¼é¢˜ç›®ä¸­ç»™å‡ºçš„ç¤ºä¾‹ 5ï¼š`"/a/../../b/../c//.//"`ï¼Œå…ˆè¯»åˆ°ç›®å½• `a`ï¼Œç„¶ååšäº†ä¸¤æ¬¡å›é€€æ“ä½œï¼Œç¬¬ 1 æ¬¡å›é€€çš„æ—¶å€™ï¼Œå°±é€€åˆ°äº†æ ¹ç›®å½•ï¼Œäº‹å®ä¸Šå·²ç»ä¸èƒ½å†å›é€€äº†ï¼Œæ­¤æ—¶ `..` è¿™ä¸ªæ“ä½œæ— æ•ˆã€‚

åœ¨ç¼–ç çš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„ï¼šåªæœ‰åœ¨æ ˆé¡¶å…ƒç´ éç©ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰èƒ½è¿›è¡Œå¼¹æ ˆçš„æ“ä½œã€‚

Java ä»£ç ï¼š

java

```java
import java.util.Stack;

public class Solution {

    public String simplifyPath(String path) {
        String[] dirs = path.split("/");
        if (dirs.length == 0) {
            return "/";
        }

        Stack<String> stack = new Stack<>();
        for (String dir : dirs) {
            if ("".equals(dir) || ".".equals(dir)) {
                continue;
            }

            if ("..".equals(dir)) {
                if (!stack.empty()) {
                    stack.pop();
                }
                continue;
            }

            stack.push(dir);
        }

        StringBuilder stringBuilder = new StringBuilder();
        if (stack.empty()) {
            stringBuilder.insert(0, "/");
        }

        while (!stack.empty()) {
            stringBuilder.insert(0, stack.pop());
            stringBuilder.insert(0, "/");
        }
        return stringBuilder.toString();
    }
}
```

**å¤æ‚åº¦åˆ†æ**ï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ï¼Œè¿™é‡Œ ğ‘N æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²è¿›æ ˆä¸€æ¬¡ï¼Œå‡ºæ ˆä¸€æ¬¡ï¼Œè¡¨ç¤ºæ“ä½œçš„å­—ç¬¦ä¸²è¿˜ä¸ç”¨è¿›æ ˆå‡ºæ ˆï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çš„ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N) ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œè¿™ä¸ªè·¯å¾„å­—ç¬¦ä¸²æœ¬èº«å°±æ˜¯åŒ–ç®€è¿‡çš„ï¼Œæ ˆä¸­å°±è¦å­˜å­—ç¬¦ä¸²é•¿åº¦è¿™ä¹ˆå¤šçš„å­—ç¬¦ä¸²ï¼ˆè¿‘ä¼¼ï¼Œä¸åŒ…æ‹¬é‚£äº›æ–œæ ï¼‰ã€‚

> 1ã€å…¶å®æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆéš¾ï¼Œå®Œå…¨å¯ä»¥ç‹¬ç«‹å®Œæˆï¼Œå…³é”®æ˜¯å¾ˆå¤šæƒ…å†µè¦è€ƒè™‘åˆ°ï¼›
>
> 2ã€ä½†æ˜¯ä»£ç å†™æˆè¿™æ ·ï¼Œè¿™ä¹ˆå¤š `if` ä¹Ÿæ˜¯è§‰å¾—çœ‹ç€å¾ˆä¸èˆ’æœï¼›
>
> 3ã€å‡ºæ ˆä¹‹å‰ä¸€å®šè¦åˆ¤æ–­ä¸€ä¸‹å½“å‰çš„æ ˆæ˜¯ä¸æ˜¯ç©ºï¼Œå¦åˆ™ä¼šæŠ› `java.util.EmptyStackException`ã€‚

Java ä»£ç ï¼š

java

```java
import java.util.Stack;

public class Solution {

    public String simplifyPath(String path) {
        String[] paths = path.split("/");
        Stack<String> stack = new Stack<>();
        for (String p : paths) {
            if (!stack.isEmpty() && "..".equals(p)) {
                stack.pop();
            }
            if (!"".equals(p) && !".".equals(p) && !"..".equals(p)) {
                stack.push(p);
            }
        }
        // è¾“å‡ºè·¯å¾„å­—ç¬¦ä¸²
        StringBuilder s = new StringBuilder();
        if (stack.isEmpty()) {
            return "/";
        }
        while (!stack.empty()) {
            s.insert(0, "/" + stack.pop());
        }
        return s.toString();
    }

    public static void main(String[] args) {
        // String s = "/a/.////b/../../c/";
        String s = "/../";
        String simplifyPath = new Solution().simplifyPath(s);
        System.out.println(simplifyPath);
    }
}
```

Java ä»£ç å®ç°ï¼š

java

```java
public class Solution {

    public String simplifyPath(String path) {
        String result = "";
        String[] pathList = path.split("/");
        if (pathList.length == 0) {
            return "/";
        }

        Stack<String> stack = new Stack<>();
        for (String p : pathList) {
            if ("".equals(p) || ".".equals(p)) {
                continue;
            }
            if ("..".equals(p)) {
                if (!stack.isEmpty()) {
                    stack.pop();
                }
            } else { // æ˜¯æ­£å¸¸çš„è·¯å¾„å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå…¥æ ˆ
                stack.push(p);
            }
        }


        // ç°åœ¨è€ƒè™‘è¾“å‡ºå­—ç¬¦ä¸²
        while (!stack.isEmpty()) {
            result = "/" + stack.pop() + result;
        }
        if ("".equals(result)) {
            result = "/";
        }
        return result;
    }

    public static void main(String[] args) {
        Solution solution = new Solution();

        String path1 = "/home/";
        String result1 = solution.simplifyPath(path1);
        System.out.println(result1);


        String path2 = "/a/./b/../../c/";
        String result2 = solution.simplifyPath(path2);
        System.out.println(result2);


        String path3 = "/..";
        String result3 = solution.simplifyPath(path3);
        System.out.println(result3);

        String path4 = "/..";
        String result4 = solution.simplifyPath(path4);
        System.out.println(result4);

        String path5 = "/abc/def/.";
        String result5 = solution.simplifyPath(path5);
        System.out.println(result5);
    }
}
```

------

### LeetCode ç¬¬ 71 é¢˜ï¼šSimplify Path

ä¼ é€é—¨ï¼šhttps://leetcode.com/problems/simplify-path/description/ã€‚

ç¬¬ 2 ç§æƒ…å†µä¸‹ï¼Œè¦æ±‚æˆ‘ä»¬çš„ç¨‹åºèƒ½å¤Ÿæœ‰ä¸€å®šçš„å®¹é”™å¤„ç†çš„èƒ½åŠ›ã€‚

æˆ‘çš„è§£ç­”å‚è€ƒäº†å¦‚ä¸‹çš„æ–‡ç« ï¼š
http://blog.csdn.net/u012249528/article/details/46705867

Java ä»£ç å®ç°ï¼š

java

```java
public class Solution {

    public String simplifyPath(String path) {
        String result = "";
        String[] pathList = path.split("/");
        if (pathList.length == 0) {
            return "/";
        }

        Stack<String> stack = new Stack<>();
        for (String p : pathList) {
            if ("".equals(p) || ".".equals(p)) {
                continue;
            }
            if ("..".equals(p)) {
                if (!stack.isEmpty()) {
                    stack.pop();
                }
            } else { // æ˜¯æ­£å¸¸çš„è·¯å¾„å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå…¥æ ˆ
                stack.push(p);
            }
        }


        // ç°åœ¨è€ƒè™‘è¾“å‡ºå­—ç¬¦ä¸²
        while (!stack.isEmpty()) {
            result = "/" + stack.pop() + result;
        }
        if ("".equals(result)) {
            result = "/";
        }
        return result;
    }

    public static void main(String[] args) {
        Solution solution = new Solution();

        String path1 = "/home/";
        String result1 = solution.simplifyPath(path1);
        System.out.println(result1);


        String path2 = "/a/./b/../../c/";
        String result2 = solution.simplifyPath(path2);
        System.out.println(result2);


        String path3 = "/..";
        String result3 = solution.simplifyPath(path3);
        System.out.println(result3);

        String path4 = "/..";
        String result4 = solution.simplifyPath(path4);
        System.out.println(result4);

        String path5 = "/abc/def/.";
        String result5 = solution.simplifyPath(path5);
        System.out.println(result5);
    }
}
```