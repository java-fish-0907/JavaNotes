## ã€ŒåŠ›æ‰£ã€ç¬¬ 295 é¢˜ï¼šæ•°æ®æµçš„ä¸­ä½æ•°ï¼ˆä¸­ç­‰ï¼‰

ä¼ é€é—¨ï¼š[295. æ•°æ®æµçš„ä¸­ä½æ•°](https://leetcode-cn.com/problems/find-median-from-data-stream/)ã€‚

é¢˜è§£åœ°å€ï¼š[ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰](https://leetcode-cn.com/problems/find-median-from-data-stream/solution/you-xian-dui-lie-python-dai-ma-java-dai-ma-by-liwe/)ã€‚

> ä¸­ä½æ•°æ˜¯æœ‰åºåˆ—è¡¨ä¸­é—´çš„æ•°ã€‚å¦‚æœåˆ—è¡¨é•¿åº¦æ˜¯å¶æ•°ï¼Œä¸­ä½æ•°åˆ™æ˜¯ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚
>
> ä¾‹å¦‚ï¼Œ
>
> `[2, 3, 4]` çš„ä¸­ä½æ•°æ˜¯ 3
>
> ```
> [2, 3]` çš„ä¸­ä½æ•°æ˜¯ `(2 + 3) / 2 = 2.5
> ```
>
> è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æ„ï¼š
>
> - `void addNum(int num)` - ä»æ•°æ®æµä¸­æ·»åŠ ä¸€ä¸ªæ•´æ•°åˆ°æ•°æ®ç»“æ„ä¸­ã€‚
>
> - `double findMedian()` - è¿”å›ç›®å‰æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚
>
>   ç¤ºä¾‹ï¼š
>
> ```
> addNum(1)
> addNum(2)
> findMedian() -> 1.5
> addNum(3) 
> findMedian() -> 2
> ```
>
> è¿›é˜¶ï¼š
>
> 1. å¦‚æœæ•°æ®æµä¸­æ‰€æœ‰æ•´æ•°éƒ½åœ¨ 00 åˆ° 100100 èŒƒå›´å†…ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Ÿ
> 2. å¦‚æœæ•°æ®æµä¸­ 9999 çš„æ•´æ•°éƒ½åœ¨ 00 åˆ° 100100 èŒƒå›´å†…ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Ÿ

**æ€è·¯åˆ†æ**ï¼š

ä¸€ç§æœ€å®¹æ˜“æƒ³åˆ°çš„æ€è·¯æ˜¯ï¼Œæ•°æ®æµæ–°è¿›æ¥ä¸€ä¸ªæ•°ï¼Œéƒ½æŠŠå®ƒä¸å·²ç»è¯»å‡ºæ¥çš„æ•°è¿›è¡Œä¸€æ¬¡æ’åºï¼Œè¿™æ ·ä¸­ä½æ•°å°±å¯ä»¥å¾ˆå®¹æ˜“å¾—åˆ°ã€‚è¿™æ ·åšâ€œä¸å¥½â€çš„åœ°æ–¹æ˜¯ï¼š

> æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º ğ‘‚(ğ‘logğ‘)O(Nlogâ¡N)ï¼Œä½†äº‹å®ä¸Šï¼Œæˆ‘å¯¹é™¤äº†ä¸­ä½æ•°ä»¥å¤–çš„å…¶å®ƒä½ç½®çš„å…ƒç´ å¹¶ä¸å…³å¿ƒã€‚

äº‹å®ä¸Šï¼Œæˆ‘ä»¬åªå…³å¿ƒåœ¨ä¸­é—´çš„é‚£ä¸¤ä¸ªæ•°ï¼ˆæˆ–è€…ä¸€ä¸ªæ•°ï¼‰ï¼Œå…¶å®ƒæ•°æ²¡æœ‰å¿…è¦è¿›è¡Œ â€œæ¯”è¾ƒâ€ å’Œ â€œäº¤æ¢â€ çš„æ“ä½œã€‚

åœ¨æˆ‘ä»¬å­¦ä¹ è¿‡çš„æ•°æ®ç»“æ„é‡Œï¼Œå †å°±æœ‰ç±»ä¼¼çš„æ€§è´¨ï¼Œæ¯æ¬¡éƒ½ä»å †é‡Œå¾—åˆ°ä¸€ä¸ª â€œæœ€å€¼â€ è€Œå…¶å®ƒå…ƒç´ æ— éœ€æ’åºï¼Œè¿™æ ·å°±å¯ä»¥ä»¥ ğ‘‚(logğ‘)O(logâ¡N) çš„å¤æ‚åº¦æ¯æ¬¡éƒ½ä»å †ä¸­å–å‡ºæœ€å€¼ã€‚



![295-1.png](https://pic.leetcode-cn.com/2cf3d6ff9a0cdb4c59bf147484f72b00171258b479ea67bf52eab21a98951a60-295-1.png)

**295-1.png**

),

![295-2.png](https://pic.leetcode-cn.com/097aa5c741baf38904d2caacf69df2d74a6c1a0cd8cb77015c7d255fc966f854-295-2.png)

**295-2.png**

),

![295-3.png](https://pic.leetcode-cn.com/cea320b4ada8684abc2db0ef24fec4d539a923ffcd8c756f4b2851cabf07e588-295-3.png)

**295-3.png**

),

![295-4.png](https://pic.leetcode-cn.com/94d648b40f1a72ed7984e6fc0828f52d8947761582071a2c1268d4e750006664-295-4.png)

**295-4.png**



**è¯·è¯»è€…åœ¨çœ‹å®Œä»¥ä¸Šæ€è·¯ä¹‹åæ€è€ƒ**ï¼š

1ã€æ•°æ®æ˜¯å¦‚ä½•åœ¨ä¸¤ä¸ªå †ä¹‹é—´æµåŠ¨çš„ï¼Œ**è„‘å­é‡Œè¦å»ºç«‹å¦‚ä¸‹åŠ¨æ€çš„è¿‡ç¨‹ï¼šä¸ºäº†æ‰¾åˆ°æ·»åŠ æ–°æ•°æ®ä»¥åï¼Œæ•°æ®æµçš„ä¸­ä½æ•°ï¼Œæˆ‘ä»¬è®©è¿™ä¸ªæ–°æ•°æ®åœ¨å¤§é¡¶å †å’Œå°é¡¶å †ä¸­éƒ½èµ°äº†ä¸€éã€‚è€Œä¸ºäº†è®©å¤§é¡¶å †çš„å…ƒç´ å¤š 11 ä¸ªï¼Œæˆ‘ä»¬è®©ä»å°é¡¶å †ä¸­åˆæ‹¿å‡ºä¸€ä¸ªå…ƒç´ â€œé€å›â€ç»™å¤§é¡¶å †**ï¼›

2ã€å°†å…ƒç´ æ”¾å…¥ä¼˜å…ˆé˜Ÿåˆ—ä»¥åï¼Œä¼˜å…ˆé˜Ÿåˆ—ä¼šä»¥å¯¹æ•°æ—¶é—´å¤æ‚åº¦è‡ªè¡Œè°ƒæ•´ï¼ŒæŠŠâ€œæœ€ä¼˜å€¼â€æ”¾å…¥å †é¡¶ï¼Œè¿™æ˜¯ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—è§£å†³è¿™ä¸ªé—®é¢˜çš„åŸå› ã€‚å¦‚æœä¸å¤ªç†Ÿæ‚‰ä¼˜å…ˆé˜Ÿåˆ—çš„æœ‹å‹ä»¬ï¼Œè¯·å¤ä¹ ä¸€ä¸‹ä¼˜å…ˆé˜Ÿåˆ—çš„ç›¸å…³çŸ¥è¯†ï¼ŒåŒ…æ‹¬åŸºæœ¬æ“ä½œï¼Œç†è§£ä¸Šæµ®å’Œä¸‹æ²‰ã€‚

**è¯´æ˜ï¼š** è¿™é“é¢˜ä½¿ç”¨ Java ç¼–ç çœ‹èµ·æ¥æ€è·¯æ›´æ¸…æ™°ä¸€äº›ï¼Œåœ¨ Python ä¸­çš„å †åªæœ‰å°é¡¶å †ï¼Œåœ¨æ„é€ å¤§é¡¶å †çš„æ—¶å€™ï¼Œè¦ç»•ä¸€ä¸ªå¼¯å­ï¼Œå…·ä½“è¯·çœ‹å¦‚ä¸‹å‚è€ƒä»£ç ã€‚

**å‚è€ƒä»£ç **ï¼š

Java ä»£ç ï¼š

Java

```Java
import java.util.PriorityQueue;

public class MedianFinder {

    /**
     * å½“å‰å¤§é¡¶å †å’Œå°é¡¶å †çš„å…ƒç´ ä¸ªæ•°ä¹‹å’Œ
     */
    private int count;
    private PriorityQueue maxheap;
    private PriorityQueue minheap;

    /**
     * initialize your data structure here.
     */
    public MedianFinder() {
        count = 0;
        maxheap = new PriorityQueue<>((x, y) -> y - x);
        minheap = new PriorityQueue<>();
    }

    public void addNum(int num) {
        count += 1;
        maxheap.offer(num);
        minheap.add(maxheap.poll());
        // å¦‚æœä¸¤ä¸ªå †åˆèµ·æ¥çš„å…ƒç´ ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œå°é¡¶å †è¦æ‹¿å‡ºå †é¡¶å…ƒç´ ç»™å¤§é¡¶å †
        if ((count & 1) != 0) {
            maxheap.add(minheap.poll());
        }
    }

    public double findMedian() {
        if ((count & 1) == 0) {
            // å¦‚æœä¸¤ä¸ªå †åˆèµ·æ¥çš„å…ƒç´ ä¸ªæ•°æ˜¯å¶æ•°ï¼Œæ•°æ®æµçš„ä¸­ä½æ•°å°±æ˜¯å„è‡ªå †é¡¶å…ƒç´ çš„å¹³å‡å€¼
            return (double) (maxheap.peek() + minheap.peek()) / 2;
        } else {
            // å¦‚æœä¸¤ä¸ªå †åˆèµ·æ¥çš„å…ƒç´ ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œæ•°æ®æµçš„ä¸­ä½æ•°å¤§é¡¶å †çš„å †é¡¶å…ƒç´ 
            return (double) maxheap.peek();
        }
    }
}
```

Python ä»£ç ï¼š





Python

```Python
import heapq


class MedianFinder:

    def __init__(self):
        # å½“å‰å¤§é¡¶å †å’Œå°é¡¶å †çš„å…ƒç´ ä¸ªæ•°ä¹‹å’Œ
        self.count = 0
        self.max_heap = []
        self.min_heap = []

    def addNum(self, num: int) -> None:
        self.count += 1
        # å› ä¸º Python ä¸­çš„å †é»˜è®¤æ˜¯å°é¡¶å †ï¼Œæ‰€ä»¥è¦ä¼ å…¥ä¸€ä¸ª tupleï¼Œç”¨äºæ¯”è¾ƒçš„å…ƒç´ éœ€æ˜¯ç›¸åæ•°ï¼Œ
        # æ‰èƒ½æ¨¡æ‹Ÿå‡ºå¤§é¡¶å †çš„æ•ˆæœ
        heapq.heappush(self.max_heap, (-num, num))
        _, max_heap_top = heapq.heappop(self.max_heap)
        heapq.heappush(self.min_heap, max_heap_top)
        if self.count & 1:
            min_heap_top = heapq.heappop(self.min_heap)
            heapq.heappush(self.max_heap, (-min_heap_top, min_heap_top))

    def findMedian(self) -> float:
        if self.count & 1:
            # å¦‚æœä¸¤ä¸ªå †åˆèµ·æ¥çš„å…ƒç´ ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œæ•°æ®æµçš„ä¸­ä½æ•°å¤§é¡¶å †çš„å †é¡¶å…ƒç´ 
            return self.max_heap[0][1]
        else:
            # å¦‚æœä¸¤ä¸ªå †åˆèµ·æ¥çš„å…ƒç´ ä¸ªæ•°æ˜¯å¶æ•°ï¼Œæ•°æ®æµçš„ä¸­ä½æ•°å°±æ˜¯å„è‡ªå †é¡¶å…ƒç´ çš„å¹³å‡å€¼
            return (self.min_heap[0] + self.max_heap[0][1]) / 2

# Your MedianFinder object will be instantiated and called as such:
# obj = MedianFinder()
# obj.addNum(num)
# param_2 = obj.findMedian()
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(logğ‘)O(logâ¡N)ï¼Œä¼˜å…ˆé˜Ÿåˆ—çš„å‡ºé˜Ÿå…¥é˜Ÿæ“ä½œéƒ½æ˜¯å¯¹æ•°çº§åˆ«çš„ï¼Œæ•°æ®åœ¨ä¸¤ä¸ªå †ä¸­é—´æ¥å›æ“ä½œæ˜¯å¸¸æ•°çº§åˆ«çš„ï¼Œç»¼ä¸Šæ—¶é—´å¤æ‚åº¦æ˜¯ ğ‘‚(logğ‘)O(logâ¡N) çº§åˆ«çš„ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘)O(N)ï¼Œä½¿ç”¨äº†ä¸‰ä¸ªè¾…åŠ©ç©ºé—´ï¼Œå…¶ä¸­ä¸¤ä¸ªå †çš„ç©ºé—´å¤æ‚åº¦æ˜¯ ğ‘‚(ğ‘2)O(N2)ï¼Œä¸€ä¸ªè¡¨ç¤ºæ•°æ®æµå…ƒç´ ä¸ªæ•°çš„è®¡æ•°å™¨ `count`ï¼Œå ç”¨ç©ºé—´ ğ‘‚(1)O(1)ï¼Œç»¼ä¸Šç©ºé—´å¤æ‚åº¦ä¸º ğ‘‚(ğ‘)O(N)ã€‚

------

### ä½¿ç”¨è‡ªå·±å®ç°çš„â€œå¤§é¡¶å †â€ å’Œ â€œå°é¡¶å †â€

ä»¥ä¸‹å†…å®¹ä»…ä¾›å‚è€ƒã€‚

ä¸‹é¢ç»™å‡ºä¸€ä¸ªä½¿ç”¨ Python ä»â€œä¸Šæµ®â€å’Œâ€œä¸‹æ²‰â€åº•å±‚æ“ä½œï¼Œâ€œå¤§é¡¶å †â€ å’Œ â€œå°é¡¶å †â€ çš„å®ç°çš„ç¤ºä¾‹ä»£ç ï¼Œç›®çš„æ˜¯ä¸ºäº†éªŒè¯è‡ªå·±å†™çš„ â€œå¤§é¡¶å †â€ å’Œ â€œå°é¡¶å †â€ æ˜¯å¦æ­£ç¡®ã€‚

ä»åº•å±‚ç¼–å†™â€œä¼˜å…ˆé˜Ÿåˆ—â€çš„æ­¥éª¤ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„ç¬”è®° [ã€Šã€ç®—æ³•æ—¥ç§¯æœˆç´¯ã€‘9-å †ä¸ä¼˜å…ˆé˜Ÿåˆ—ã€‹ ](https://www.liwei.party/2019/01/10/algorithms-and-data-structures/priority-queue/)ï¼Œç‰¹åˆ«æ¬¢è¿æ‚¨ç»™å‡ºæ„è§å’Œå»ºè®®ã€‚

> **ä¸ºäº†éªŒè¯è‡ªå·±å†™çš„åº•å±‚ä»£ç æ˜¯å¦æ­£ç¡®ï¼ŒæŠŠè‡ªå·±å†™çš„åº•å±‚æ•°æ®ç»“æ„ç”¨äºå®Œæˆ LeetCode çš„é—®é¢˜ï¼Œè®©è‡ªå·±çš„æ•°æ®ç»“æ„ç»è¿‡ LeetCode æµ‹è¯•ç”¨ä¾‹çš„æ£€æµ‹ï¼Œæ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„åŠæ³•ã€‚**

**å‚è€ƒä»£ç  2**ï¼š

Python ä»£ç ï¼š

Python

```Python
class MaxHeap:
    def __init__(self, capacity):
        # æˆ‘ä»¬è¿™ä¸ªç‰ˆæœ¬çš„å®ç°ä¸­ï¼Œ0 å·ç´¢å¼•æ˜¯ä¸å­˜æ•°æ®çš„ï¼Œè¿™ä¸€ç‚¹ä¸€å®šè¦æ³¨æ„
        # å› ä¸ºæ•°ç»„ä»ç´¢å¼• 1 å¼€å§‹å­˜æ”¾æ•°å€¼
        # æ‰€ä»¥å¼€è¾Ÿ capacity + 1 è¿™ä¹ˆå¤šå¤§å°çš„ç©ºé—´
        self.data = [None for _ in range(capacity + 1)]
        # å½“å‰å †ä¸­å­˜å‚¨çš„å…ƒç´ çš„ä¸ªæ•°
        self.count = 0
        # å †ä¸­èƒ½å¤Ÿå­˜å‚¨çš„å…ƒç´ çš„æœ€å¤§æ•°é‡ï¼ˆä¸ºç®€åŒ–é—®é¢˜ï¼Œä¸è€ƒè™‘åŠ¨æ€æ‰©å±•ï¼‰
        self.capacity = capacity

    def size(self):
        """
        è¿”å›æœ€å¤§å †ä¸­çš„å…ƒç´ çš„ä¸ªæ•°
        :return:
        """
        return self.count

    def is_empty(self):
        """
        è¿”å›æœ€å¤§å †ä¸­çš„å…ƒç´ æ˜¯å¦ä¸ºç©º
        :return:
        """
        return self.count == 0

    def insert(self, item):
        if self.count + 1 > self.capacity:
            raise Exception('å †çš„å®¹é‡ä¸å¤Ÿäº†')
        self.count += 1
        self.data[self.count] = item
        # è€ƒè™‘å°†å®ƒä¸Šç§»
        self.__swim(self.count)

    def __shift_up(self, k):
        # æœ‰ç´¢å¼•å°±è¦è€ƒè™‘ç´¢å¼•è¶Šç•Œçš„æƒ…å†µï¼Œå·²ç»åœ¨ç´¢å¼• 1 çš„ä½ç½®ï¼Œå°±æ²¡æœ‰å¿…è¦ä¸Šç§»äº†
        while k > 1 and self.data[k // 2] < self.data[k]:
            self.data[k // 2], self.data[k] = self.data[k], self.data[k // 2]
            k //= 2

    def __swim(self, k):
        # ä¸Šæµ®ï¼Œä¸çˆ¶ç»“ç‚¹è¿›è¡Œæ¯”è¾ƒ
        temp = self.data[k]
        # æœ‰ç´¢å¼•å°±è¦è€ƒè™‘ç´¢å¼•è¶Šç•Œçš„æƒ…å†µï¼Œå·²ç»åœ¨ç´¢å¼• 1 çš„ä½ç½®ï¼Œå°±æ²¡æœ‰å¿…è¦ä¸Šç§»äº†
        while k > 1 and self.data[k // 2] < temp:
            self.data[k] = self.data[k // 2]
            k //= 2
        self.data[k] = temp

    def extract_max(self):
        if self.count == 0:
            raise Exception('å †é‡Œæ²¡æœ‰å¯ä»¥å–å‡ºçš„å…ƒç´ ')
        ret = self.data[1]
        self.data[1], self.data[self.count] = self.data[self.count], self.data[1]
        self.count -= 1
        self.__sink(1)
        return ret

    def __shift_down(self, k):
        # åªè¦æœ‰å·¦å³å­©å­ï¼Œå·¦å³å­©å­åªè¦æ¯”è‡ªå·±å¤§ï¼Œå°±äº¤æ¢
        while 2 * k <= self.count:
            # å¦‚æœè¿™ä¸ªå…ƒç´ æœ‰å·¦è¾¹çš„å­©å­
            j = 2 * k
            # å¦‚æœæœ‰å³è¾¹çš„å­©å­ï¼Œå¤§äºå·¦è¾¹çš„å­©å­ï¼Œå°±å¥½åƒå·¦è¾¹çš„å­©å­ä¸å­˜åœ¨ä¸€æ ·
            if j + 1 <= self.count and self.data[j + 1] > self.data[j]:
                j = j + 1
            if self.data[k] >= self.data[j]:
                break
            self.data[k], self.data[j] = self.data[j], self.data[k]
            k = j

    def __sink(self, k):
        # ä¸‹æ²‰
        temp = self.data[k]
        # åªè¦å®ƒæœ‰å­©å­ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„ç­‰äºå·æ˜¯ååˆ†å…³é”®çš„
        while 2 * k <= self.count:
            j = 2 * k
            # å¦‚æœå®ƒæœ‰å³è¾¹çš„å­©å­ï¼Œå¹¶ä¸”å³è¾¹çš„å­©å­å¤§äºå·¦è¾¹çš„å­©å­
            if j + 1 <= self.count and self.data[j + 1] > self.data[j]:
                # å³è¾¹çš„å­©å­èƒœå‡ºï¼Œæ­¤æ—¶å¯ä»¥è®¤ä¸ºæ²¡æœ‰å·¦å­©å­
                j += 1
            # å¦‚æœå½“å‰çš„å…ƒç´ çš„å€¼ï¼Œæ¯”å³è¾¹çš„å­©å­èŠ‚ç‚¹è¦å¤§ï¼Œåˆ™é€æ¸ä¸‹è½çš„è¿‡ç¨‹åˆ°æ­¤ç»“æŸ
            if temp >= self.data[j]:
                break
            # å¦åˆ™ï¼Œäº¤æ¢ä½ç½®ï¼Œç»§ç»­å¾ªç¯
            self.data[k] = self.data[j]
            k = j
        self.data[k] = temp


class MinHeap:

    # æŠŠæœ€å¤§å †å®ç°ä¸­ä¸ç­‰å·çš„æ–¹å‘åå‘å°±å¯ä»¥äº†

    def __init__(self, capacity):
        # å› ä¸ºæ•°ç»„ä»ç´¢å¼• 1 å¼€å§‹å­˜æ”¾æ•°å€¼
        # æ‰€ä»¥å¼€è¾Ÿ capacity + 1 è¿™ä¹ˆå¤šå¤§å°çš„ç©ºé—´
        self.data = [0 for _ in range(capacity + 1)]
        self.count = 0
        self.capacity = capacity

    def size(self):
        return self.count

    def is_empty(self):
        return self.count == 0

    def insert(self, item):
        if self.count + 1 > self.capacity:
            raise Exception('å †çš„å®¹é‡ä¸å¤Ÿäº†')
        self.count += 1
        self.data[self.count] = item
        self.__swim(self.count)

    def __swim(self, k):
        # ä¸Šæµ®ï¼Œä¸çˆ¶èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒ
        temp = self.data[k]
        while k > 1 and self.data[k // 2] > temp:
            self.data[k] = self.data[k // 2]
            k //= 2
        self.data[k] = temp

    def extract_min(self):
        if self.count == 0:
            raise Exception('å †é‡Œæ²¡æœ‰å¯ä»¥å–å‡ºçš„å…ƒç´ ')
        ret = self.data[1]
        self.data[1] = self.data[self.count]
        self.count -= 1
        self.__sink(1)
        return ret

    def __sink(self, k):
        # ä¸‹æ²‰
        temp = self.data[k]
        while 2 * k <= self.count:
            j = 2 * k
            if j + 1 <= self.count and self.data[j + 1] < self.data[j]:
                j += 1
            if temp <= self.data[j]:
                break
            self.data[k] = self.data[j]
            k = j
        self.data[k] = temp


class MedianFinder:

    def __init__(self):
        """
        initialize your data structure here.
        """
        # å¦‚æœæµ‹è¯•ç”¨ä¾‹çš„å®¹é‡å¢åŠ ï¼Œä¸‹é¢ 10000 è¿™ä¸ªæ•°å€¼è¯·å¤§å®¶è‡ªè¡Œè°ƒæ•´
        self.max_heap = MaxHeap(10000)
        self.min_heap = MinHeap(10000)

    def addNum(self, num: 'int') -> 'None':
        # å¤§é¡¶å †å…ˆè¿›ä¸€ä¸ªå…ƒç´ 
        self.max_heap.insert(num);
        # ç„¶åä»å¤§é¡¶å †é‡Œå‡ºä¸€ä¸ªå…ƒç´ åˆ°å°é¡¶å †
        self.min_heap.insert(self.max_heap.extract_max())
        if self.max_heap.size() < self.min_heap.size():
            # å¦‚æœå¤§é¡¶å †çš„å…ƒç´ å°‘äºå°é¡¶å †
            # å°±è¦ä»å°é¡¶å †å‡ºä¸€ä¸ªå…ƒç´ åˆ°å¤§é¡¶å †
            self.max_heap.insert(self.min_heap.extract_min())

    def findMedian(self) -> 'float':
        if self.max_heap.size() == self.min_heap.size():
            return (self.max_heap.data[1] + self.min_heap.data[1]) / 2
        else:
            return self.max_heap.data[1]




# Your MedianFinder object will be instantiated and called as such:
# obj = MedianFinder()
# obj.addNum(num)
# param_2 = obj.findMedian()
```