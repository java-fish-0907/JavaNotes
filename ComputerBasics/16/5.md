## „ÄåÂäõÊâ£„ÄçÁ¨¨ 354 È¢òÔºö‰øÑÁΩóÊñØÂ•óÂ®É‰ø°Â∞ÅÈóÆÈ¢ò

È¢òËß£Âú∞ÂùÄÔºö[Ë¥™ÂøÉÁÆóÊ≥ï„ÄÅ‰∫åÂàÜÊü•ÊâæÔºàPython ‰ª£Á†Å„ÄÅJava ‰ª£Á†ÅÔºâ](https://leetcode-cn.com/problems/russian-doll-envelopes/solution/tan-xin-suan-fa-er-fen-cha-zhao-python-dai-ma-java/)„ÄÇ

ËØ¥ÊòéÔºöÊñáÊú¨È¶ñÂèëÂú®ÂäõÊâ£ÁöÑÈ¢òËß£ÁâàÂùóÔºåÊõ¥Êñ∞‰πü‰ºöÂú®Á¨¨ 1 Êó∂Èó¥Âú®‰∏äÈù¢ÁöÑÁΩëÁ´ô‰∏≠Êõ¥Êñ∞ÔºåËøôÁØáÊñáÁ´†Âè™ÊòØ‰∏äÈù¢ÁöÑÊñáÁ´†ÁöÑ‰∏Ä‰∏™Âø´ÁÖßÔºåÊÇ®ÂèØ‰ª•ÁÇπÂáª‰∏äÈù¢ÁöÑÈìæÊé•ÁúãÂà∞ÂÖ∂‰ªñÁΩëÂèãÂØπÊú¨ÊñáÁöÑËØÑËÆ∫„ÄÇ

‰º†ÈÄÅÈó®Ôºö[354. ‰øÑÁΩóÊñØÂ•óÂ®É‰ø°Â∞ÅÈóÆÈ¢ò](https://leetcode-cn.com/problems/russian-doll-envelopes/)„ÄÇ

> ÁªôÂÆö‰∏Ä‰∫õÊ†áËÆ∞‰∫ÜÂÆΩÂ∫¶ÂíåÈ´òÂ∫¶ÁöÑ‰ø°Â∞ÅÔºåÂÆΩÂ∫¶ÂíåÈ´òÂ∫¶‰ª•Êï¥Êï∞ÂØπÂΩ¢Âºè ùë§,‚Ñéw,h Âá∫Áé∞„ÄÇÂΩìÂè¶‰∏Ä‰∏™‰ø°Â∞ÅÁöÑÂÆΩÂ∫¶ÂíåÈ´òÂ∫¶ÈÉΩÊØîËøô‰∏™‰ø°Â∞ÅÂ§ßÁöÑÊó∂ÂÄôÔºåËøô‰∏™‰ø°Â∞ÅÂ∞±ÂèØ‰ª•ÊîæËøõÂè¶‰∏Ä‰∏™‰ø°Â∞ÅÈáåÔºåÂ¶ÇÂêå‰øÑÁΩóÊñØÂ•óÂ®É‰∏ÄÊ†∑„ÄÇ
>
> ËØ∑ËÆ°ÁÆóÊúÄÂ§öËÉΩÊúâÂ§öÂ∞ë‰∏™‰ø°Â∞ÅËÉΩÁªÑÊàê‰∏ÄÁªÑ‚Äú‰øÑÁΩóÊñØÂ•óÂ®É‚Äù‰ø°Â∞ÅÔºàÂç≥ÂèØ‰ª•Êää‰∏Ä‰∏™‰ø°Â∞ÅÊîæÂà∞Âè¶‰∏Ä‰∏™‰ø°Â∞ÅÈáåÈù¢Ôºâ„ÄÇ
>
> ËØ¥Êòé:
> ‰∏çÂÖÅËÆ∏ÊóãËΩ¨‰ø°Â∞Å„ÄÇ
>
> Á§∫‰æã:
>
> ËæìÂÖ•: envelopes = [[5,4],[6,4],[6,7],[2,3]]
> ËæìÂá∫: 3
> Ëß£Èáä: ÊúÄÂ§ö‰ø°Â∞ÅÁöÑ‰∏™Êï∞‰∏∫ 3, ÁªÑÂêà‰∏∫: [2,3] => [5,4] => [6,7]„ÄÇ

## Ë¥™ÂøÉÁÆóÊ≥ï„ÄÅ‰∫åÂàÜÊü•ÊâæÔºàPython ‰ª£Á†Å„ÄÅJava ‰ª£Á†ÅÔºâ

**ÊÄùË∑ØÂàÜÊûê**Ôºö

Êú¨È¢òÊòØ[„ÄåÂäõÊâ£„ÄçÁ¨¨ 300 È¢òÔºö‚ÄúÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó‚Äù](https://leetcode-cn.com/problems/longest-increasing-subsequence/)ÁöÑÊâ©Â±ïÈ¢ò„ÄÇ

ÂæàÂÆπÊòìÊÉ≥Âà∞ÁöÑÊÄùË∑ØÊòØÔºöÂ∞Ü‰ø°Â∞ÅÊï∞ÁªÑÊåâÁÖßÂÆΩ‚ÄúÂçáÂ∫è‚ÄùÊéíÂ∫è‰ª•ÂêéÔºå‰ø°Â∞ÅÊï∞ÁªÑÁöÑÈ´òÁöÑ‚ÄúÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó‚ÄùÁöÑÈïøÂ∫¶Â∞±ÊòØÈ¢òÁõÆÊâÄÊ±Ç„ÄÇ

ËØ¥ÊòéÔºö

1„ÄÅ‰∫ãÂÆû‰∏äÔºåËøô‰∏™ÊèèËø∞Âè™Êúâ‰∏ÄÂçäÊ≠£Á°ÆÔºåÊàë‰ª¨ÊöÇ‰∏îËÆ§‰∏∫ÊÄùË∑Ø‚ÄúÊ≤°ÊúâÂ§öÂ§ßÈóÆÈ¢ò‚ÄùÔºõ

2„ÄÅËøôÈáåÁöÑ‚ÄúÂÆΩ‚ÄùÂíå‚ÄúÈ´ò‚ÄùÂØπÁ≠âÔºåÂç≥Â∞Ü‚ÄúÂÆΩ‚ÄùÂíå‚ÄúÈ´ò‚ÄùÂêåÊó∂‰∫§Êç¢ÔºåÂú®ÈÄªËæë‰∏äÊòØÁ≠â‰ª∑ÁöÑ„ÄÇ

ÂÅöËøá‚ÄúÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó‚ÄùÁöÑÊúãÂèãÔºåÂ∞±Áü•ÈÅìËøôÈÅìÈ¢òÊúâ 2 ÁßçÊÄùË∑ØÔºö1„ÄÅÂä®ÊÄÅËßÑÂàíÔºõ2„ÄÅË¥™ÂøÉÁÆóÊ≥ï + ‰∫åÂàÜÊü•Êâæ„ÄÇ

Êú¨È¢òÂü∫‰∫éÊàë‰∏∫„ÄåÂäõÊâ£„ÄçÁ¨¨ 300 È¢òÔºö‚ÄúÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó‚ÄùÂÜôÁöÑÈ¢òËß£[„ÄäÂä®ÊÄÅËßÑÂàí + Ë¥™ÂøÉÁÆóÊ≥ïÔºà‰∫åÂàÜÊ≥ïÔºâÔºàPython ‰ª£Á†Å„ÄÅJava ‰ª£Á†ÅÔºâ„Äã](https://leetcode-cn.com/problems/longest-increasing-subsequence/solution/dong-tai-gui-hua-er-fen-cha-zhao-tan-xin-suan-fa-p/)Â±ïÂºÄÂèôËø∞ÔºåÈáçÂ§çÁöÑÈÉ®ÂàÜÂ∞±‰∏çÂú®Êú¨È¢òËß£‰∏≠‰ªãÁªç‰∫Ü„ÄÇ

ÂÖàÂ∞ùËØï‚ÄúÂä®ÊÄÅËßÑÂàí‚ÄùÔºåÂÖ∑‰ΩìÁºñÁ†ÅÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÂèëÁé∞ÔºåÂõ†‰∏∫È¢òÁõÆË¶ÅÊ±ÇÂ∞è‰ø°Â∞ÅÂèØ‰ª•Ë£ÖÂÖ•Â§ß‰ø°Â∞ÅÁöÑÊù°‰ª∂ÊòØ‚ÄúÂ∞è‰ø°Â∞ÅÂÆΩÂíåÈ´òÂàÜÂà´‰∏•Ê†ºÂ∞è‰∫éÂ§ß‰ø°Â∞ÅÁöÑÂÆΩÂíåÈ´ò‚ÄùÔºåÈÇ£‰πàÂú®ËøõË°åÁä∂ÊÄÅËΩ¨ÁßªÁöÑÊó∂ÂÄôÔºåÂ∞±ÂæóÊääÊï∞ÁªÑÁöÑ‚ÄúÂÆΩ‚ÄùËÄÉËôëËøõÂéªÔºåÂ¶Ç‰∏ãÔºö

Python ‰ª£Á†ÅÔºö

```python
from typing import List

# ËØ•ÁÆóÊ≥ïË∂ÖÊó∂Ôºå‰∏çÈááÁî®

class Solution:
    def maxEnvelopes(self, envelopes: List[List[int]]) -> int:
        size = len(envelopes)
        # ÁâπÂà§
        if size < 2:
            return size

        # ÂØπÁ¨¨‰∏ÄÂàóÊéíÂ∫èÔºåÊåâÁÖßÂÆΩÂ∫¶ÊéíÂ∫èÔºàÊåâÁÖßÈ´òÂ∫¶ÊéíÂ∫è‰∫¶ÂèØÔºåÂè™‰∏çËøáÂêéÈù¢ÂÆö‰πâÁä∂ÊÄÅÁöÑÊó∂ÂÄôÂ∞±ÂæóÂÆö‰πâÂÆΩÂ∫¶Ôºâ
        envelopes.sort(key=lambda x: x[0])
        # print(envelopes)
        # ‰ª• envelopes[i][1] ÁªìÂ∞æÁöÑ‰∏äÂçáÂ≠êÂ∫èÂàóÁöÑÈïøÂ∫¶
        dp = [1 for _ in range(size)]
        for i in range(1, size):
            for j in range(i):
                # Ê≥®ÊÑèÂÆΩÂ∫¶‰πüË¶Å‰∏•Ê†ºÂ∞è‰∫é
                if envelopes[j][0] < envelopes[i][0] and envelopes[j][1] < envelopes[i][1]:
                    dp[i] = max(dp[i], dp[j] + 1)
        return max(dp)
```

ÂæàÂèØÊÉúÔºåÊèê‰∫§Âà∞Âú®Á∫øÊµãËØÑÁ≥ªÁªü‰ª•ÂêéË∂ÖÊó∂„ÄÇ



![image.png](https://pic.leetcode-cn.com/0d0fd254021b7295c89f1f8059a6690a2ff4d934c61cf45e4d4da3238594e244-image.png)

**image.png**



ËøôÊòØÂõ†‰∏∫Âä®ÊÄÅËßÑÂàíÁöÑÂ§çÊùÇÂ∫¶Â§™È´òÔºàùëÇ(ùëÅ2)O(N2)ÔºåËøôÈáå ùëÅN ÊòØÊï∞ÁªÑÁöÑÈïøÂ∫¶ÔºâÔºåÂõ†Ê≠§Êàë‰ª¨ÂæóËÄÉËôë‚ÄúË¥™ÂøÉÊ≥ï + ‰∫åÂàÜÊü•Êâæ‚ÄùÁöÑÊÄùË∑Ø„ÄÇ

### Ë¥™ÂøÉÊ≥ï + ‰∫åÂàÜÊü•Êâæ

Â¶ÇÊûúÊåâÁÖß‰πãÂâçÁöÑÂàÜÊûêÔºåÂéüÈóÆÈ¢òÁ≠â‰ª∑‰∫é‚ÄúÂ∞Ü‰ø°Â∞ÅÊï∞ÁªÑÊåâÁÖßÂÆΩ‚ÄúÂçáÂ∫è‚ÄùÊéíÂ∫è‰ª•ÂêéÔºå‰ø°Â∞ÅÊï∞ÁªÑÁöÑÈ´òÁöÑ‚ÄúÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó‚ÄùÁöÑÈïøÂ∫¶Â∞±ÊòØÈ¢òÁõÆÊâÄÊ±Ç‚ÄùÔºåÂú®Êèê‰∫§ÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÂèëÁé∞Âá∫Èîô‰∫Ü„ÄÇÊü•ÁúãÈîôËØØÁöÑÊµãËØïÁî®‰æã‰∏çÈöæÂèëÁé∞ÈóÆÈ¢òÊâÄÂú®ÔºåËøôÈáåÊàë‰ª¨‰∏æ‰æãËØ¥ÊòéÈóÆÈ¢òÂá∫Âú®Âì™Èáå„ÄÇ

‰∫ãÂÆû‰∏äÔºå‰πãÂâçÊàë‰ª¨‰πüÂ∑≤ÁªèÊèêÂà∞Ëøá‰∫ÜÔºöÈ¢òÁõÆË¶ÅÊ±ÇÂ∞è‰ø°Â∞ÅÂèØ‰ª•Ë£ÖÂÖ•Â§ß‰ø°Â∞ÅÁöÑÊù°‰ª∂ÊòØ‚ÄúÂ∞è‰ø°Â∞ÅÂÆΩÂíåÈ´òÂàÜÂà´‰∏•Ê†ºÂ∞è‰∫éÂ§ß‰ø°Â∞ÅÁöÑÂÆΩÂíåÈ´ò‚Äù„ÄÇ

ÂΩì‚ÄúÂÆΩ‚ÄùÁõ∏Á≠âÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûú‚ÄúÈ´òÂ∫¶‚ÄùÂá∫Áé∞‚Äú‰∏äÂçáÂ≠êÂ∫èÂàó‚ÄùÂ∞±ÊúâÂèØËÉΩÂºïÂÖ•ÈîôËØØÁöÑÁªìÊûú„ÄÇ‰æãÂ¶ÇÔºö



![image.png](https://pic.leetcode-cn.com/253bead84dbd1558b89dcbe254fcb5f0b5e1040ce6491794f6f4b6708c0e137c-image.png)

**image.png**



Ê≠§Êó∂ÔºåÂ∑¶ËæπÁ≤âÁ∫¢Ëâ≤ÂÆΩÂ∫¶ÊåâÁÖßÂçáÂ∫èÊéíÂ∫èÔºå‰ΩÜÊòØÁ¨¨ 3 ‰∏™ÂíåÁ¨¨ 4 ‰∏™ÔºåÂú®ÂÆΩÁõ∏Á≠âÁöÑÊó∂ÂÄôÔºå`[6, 7] Âíå [6, 8]` ‰ºöË¢´ÁÆóÊ≥ïÂêåÊó∂ÈÄâÂèñÔºåÂ∞±ËøùËÉå‰∫ÜÈ¢òÊÑèÔºàÂ∞è‰ø°Â∞ÅÁöÑÂÆΩÂ∫¶ÂíåÈ´òÂ∫¶ÂàÜÂà´‚Äú‰∏•Ê†º‚ÄùÂ∞è‰∫éÂ§ß‰ø°Â∞ÅÁöÑÂÆΩÂ∫¶ÂíåÈ´òÂ∫¶Ôºâ„ÄÇ

Ëß£ÂÜ≥ÁöÑÂäûÊ≥ïÂæàÂÆπÊòìÊÉ≥Âà∞ÔºåÈÇ£Â∞±ÊòØÔºö**Âú®ÂÆΩÂ∫¶Áõ∏Á≠âÁöÑÊó∂ÂÄôÔºåÈ´òÂ∫¶‰∏çËÉΩÂá∫Áé∞‚Äú‰∏äÂçáÁöÑÂ≠êÂ∫èÂàó‚ÄùÔºåÈ¶ñÂÖàÊåâÁÖßÂÆΩÂ∫¶‚ÄúÂçáÂ∫èÊéíÂ∫è‚ÄùÔºåÂú®ÂÆΩÂ∫¶Áõ∏Á≠âÁöÑÊâãÔºåÈ´òÂ∫¶‚ÄúÈôçÂ∫èÊéíÂ∫è‚Äù**ÔºåÂÆΩÂ∫¶Áõ∏Á≠âÁöÑ‰ø°Â∞ÅÔºåÊúÄÂ§öÂè™ËÉΩÈÄâ‰∏Ä‰∏™ÔºåËøôÁßçÁ≠ñÁï•‰øùËØÅ‰∫ÜÁªìÊûúÁöÑÊ≠£Á°ÆÊÄß„ÄÇËøôÂ∞±ÊòØÊúÄÂºÄÂßãÁöÑËØ¥Êòé‰∏≠ÁöÑÁ¨¨ 1 ÁÇπÁº∫Â∞ëÁöÑÊ≠£Á°ÆÊÄßÁöÑÂè¶‰∏ÄÂçä„ÄÇ

**ÂèÇËÄÉ‰ª£Á†Å**Ôºö

Python ‰ª£Á†ÅÔºö

```Python
from typing import List


class Solution:
    def maxEnvelopes(self, envelopes: List[List[int]]) -> int:
        size = len(envelopes)
        # ÁâπÂà§
        if size < 2:
            return size

        # ÂØπÁ¨¨‰∏ÄÂàóÊéíÂ∫èÔºåÊåâÁÖßÂÆΩÂ∫¶ÊéíÂ∫è
        # „ÄêÁâπÂà´Ê≥®ÊÑè„ÄëÂΩìÂÆΩÂ∫¶Áõ∏Á≠âÁöÑÊó∂ÂÄôÔºåÊåâÁÖßÈ´òÂ∫¶ÈôçÂ∫èÊéíÂ∫è
        # ‰ª•ÈÅøÂÖç [[11, 3], [12, 4], [12, 5], [12, 6], [14, 6]] ËøôÁßçÊÉÖÂÜµÂèëÁîü
        # Ê≠£Á°ÆÊéíÂ∫è [[11, 3], [12, 6], [12, 5], [12, 4], [14, 6]]
        envelopes.sort(key=lambda x: (x[0], -x[1]))

        # print(envelopes)
        tail = [envelopes[0][1]]

        for i in range(1, size):
            target = envelopes[i][1]
            if target > tail[-1]:
                tail.append(target)
                continue

            left = 0
            right = len(tail) - 1

            while left < right:
                mid = (left + right) >> 1
                if tail[mid] > target:
                    left = mid + 1
                else:
                    right = mid
            tail[left] = target
        # print(tail)
        return len(tail)


if __name__ == '__main__':
    envelopes = [[4, 5], [4, 6], [6, 7], [2, 3], [1, 1]]
    envelopes = [[30, 50], [12, 2], [3, 4], [12, 15]]
    envelopes = [[1, 3], [3, 5], [6, 7], [6, 8], [8, 4], [9, 5]]
    solution = Solution()
    res = solution.maxEnvelopes(envelopes)
    print(res)
```

Java ‰ª£Á†ÅÔºö

```Java
import java.util.Arrays;
import java.util.Comparator;

public class Solution {

    public int maxEnvelopes(int[][] envelopes) {

        int len = envelopes.length;
        if (len < 2) {
            return len;
        }

        Arrays.sort(envelopes, new Comparator() {
            @Override
            public int compare(int[] envelope1, int[] envelope2) {
                if (envelope1[0] != envelope2[0]) {
                    return envelope1[0] - envelope2[0];
                }
                return envelope2[1] - envelope1[1];
            }
        });


        int[] tail = new int[len];
        tail[0] = envelopes[0][1];

        // end Ë°®Á§∫ÊúâÂ∫èÊï∞ÁªÑ tail ÁöÑÊúÄÂêé‰∏Ä‰∏™Â∑≤ÁªèËµãÂÄºÂÖÉÁ¥†ÁöÑÁ¥¢Âºï
        int end = 0;

        for (int i = 1; i < len; i++) {
            int target = envelopes[i][1];

            if (target > tail[end]) {
                end++;
                tail[end] = target;
            } else {
                int left = 0;
                int right = end;

                while (left < right) {
                    int mid = (left + right) >>> 1;
                    if (tail[mid] < target) {
                        left = mid + 1;
                    } else {
                        right = mid;
                    }
                }
                tail[left] = target;
            }
        }
        return end + 1;
    }

}
```

**Â§çÊùÇÂ∫¶ÂàÜÊûê**Ôºö

- Êó∂Èó¥Â§çÊùÇÂ∫¶ÔºöùëÇ(ùëÅlogùëÅ)O(Nlog‚Å°N)ÔºåÈÅçÂéÜÊï∞ÁªÑ‰ΩøÁî®‰∫Ü ùëÇ(ùëÅ)O(N)Ôºå‰∫åÂàÜÊü•ÊâæÊ≥ï‰ΩøÁî®‰∫Ü ùëÇ(logùëÅ)O(log‚Å°N)„ÄÇ
- Á©∫Èó¥Â§çÊùÇÂ∫¶ÔºöùëÇ(ùëÅ)O(N)ÔºåÂºÄËæüÊúâÂ∫èÊï∞ÁªÑ `tail` ÁöÑÁ©∫Èó¥Ëá≥Â§öÂíåÂéüÂßãÊï∞ÁªÑ‰∏ÄÊ†∑„ÄÇ