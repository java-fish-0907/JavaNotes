## ã€Œæ’åºç®—æ³•ã€ä¸“é¢˜ 9ï¼šå †æ’åºï¼ˆç¬¬ 3 èŠ‚ï¼‰

è¯´æ˜ï¼šå †å¾ˆé‡è¦ï¼Œå †æ’åºæ ¹æ®ä¸ªäººæƒ…å†µæŒæ¡ã€‚è¿™ä¸€èŠ‚å†…å®¹å¯ä»¥åœ¨å­¦ä¹ å®Œå †ä»¥åæŒæ¡ã€‚

å †è®²çš„æœ€å¥½çš„èµ„æ–™å°±æ˜¯ã€Šç®—æ³• 4ã€‹ï¼Œå †çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä¸å¤šå±•å¼€äº†ï¼Œå»ºè®®å¤§å®¶ç›´æ¥çœ‹ä¹¦è·å¾—ç›¸å…³çŸ¥è¯†ã€‚

- å †æ’åºæ˜¯é€‰æ‹©æ’åºçš„ä¼˜åŒ–ï¼Œé€‰æ‹©æ’åºéœ€è¦åœ¨æœªæ’å®šçš„éƒ¨åˆ†é‡Œé€šè¿‡ã€Œæ‰“æ“‚å°ã€çš„æ–¹å¼é€‰å‡ºæœ€å¤§çš„å…ƒç´ ï¼ˆå¤æ‚åº¦ ğ‘‚(ğ‘)O(N)ï¼‰ï¼Œè€Œã€Œå †æ’åºã€å°±æŠŠæœªæ’å®šçš„éƒ¨åˆ†æ„å»ºæˆä¸€ä¸ªã€Œå †ã€ï¼Œè¿™æ ·å°±èƒ½ä»¥ ğ‘‚(logğ‘)O(logâ¡N) çš„æ–¹å¼é€‰å‡ºæœ€å¤§å…ƒç´ ï¼›
- å †æ˜¯ä¸€ç§ç›¸å½“æœ‰æ„æ€çš„æ•°æ®ç»“æ„ï¼Œå®ƒåœ¨å¾ˆå¤šè¯­è¨€é‡Œä¹Ÿè¢«å‘½åä¸ºã€Œä¼˜å…ˆé˜Ÿåˆ—ã€ã€‚å®ƒæ˜¯å»ºç«‹åœ¨æ•°ç»„ä¸Šçš„ã€Œæ ‘ã€ç»“æ„ï¼Œç±»ä¼¼çš„æ•°æ®ç»“æ„è¿˜æœ‰ã€Œå¹¶æŸ¥é›†ã€ã€Œçº¿æ®µæ ‘ã€ç­‰ã€‚

æˆ‘ä¸ªäººæ˜¯è¿™æ ·çœ‹å¾…è¿™äº›å®šä¹‰çš„ï¼šã€Œä¼˜å…ˆé˜Ÿåˆ—ã€æ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºå‡ºé˜Ÿï¼Œä»è¿™ä¸€ç‚¹ä¸Šè¯´ï¼Œä¸ã€Œæ™®é€šé˜Ÿåˆ—ã€æ— å·®åˆ«ã€‚ã€Œä¼˜å…ˆé˜Ÿåˆ—ã€å¯ä»¥ç”¨æ•°ç»„å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨æœ‰åºæ•°ç»„å®ç°ï¼Œä½†åªè¦æ˜¯çº¿æ€§ç»“æ„ï¼Œå¤æ‚åº¦å°±ä¼šé«˜ï¼Œå› æ­¤ï¼Œã€Œæ ‘ã€ç»“æ„å°±æœ‰ä¼˜åŠ¿ï¼Œã€Œä¼˜å…ˆé˜Ÿåˆ—ã€çš„æœ€å¥½å®ç°å°±æ˜¯ã€Œå †ã€ã€‚

ã€Œå †ã€è¿˜æœ‰å¾ˆå¤šæ‰©å±•çš„çŸ¥è¯†ï¼šã€Œç´¢å¼•å †ã€ã€ã€Œå¤šå‰å †ã€ï¼Œå·²ç»ä¸åœ¨æˆ‘èƒ½ä»‹ç»çš„èŒƒå›´äº†ï¼Œæˆ‘ä¸ªäººè§‰å¾—ä¸€èˆ¬çš„é¢è¯•é—®é¢˜ä¹Ÿä¸ä¼šæ¶‰åŠã€‚ä½†æ˜¯åŸºç¡€çš„å †çš„ç›¸å…³çŸ¥è¯†æ˜¯æœ‰å¿…è¦æŒæ¡çš„ï¼Œè¦çŸ¥é“å †çš„åº•å±‚æ˜¯æ•°ç»„ï¼Œå¯èƒ½æ¶‰åŠæ‰©å®¹çš„é—®é¢˜ï¼Œä¸Šæµ®å’Œä¸‹æ²‰æ“ä½œã€‚

ã€ŒåŠ›æ‰£ã€ä¸Šæœ‰å¾ˆå¤šä½¿ç”¨ã€Œä¼˜å…ˆé˜Ÿåˆ—ã€å®Œæˆçš„é—®é¢˜ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹ä¸å¦¨åšä¸€ä¸‹ã€‚

è‡³äºç°åœ¨ç¬”è¯•è€ƒä¸è€ƒã€Œæ‰‹å†™ä¸€ä¸ªå †ã€ï¼Œæˆ‘ä¸ªäººè§‰å¾—æ„ä¹‰ä¸å¤§ã€‚å¦‚æœçœŸçš„è€ƒåˆ°äº†ï¼Œèƒ½å†™å°½é‡å†™ï¼Œä¸èƒ½ä¸€æ¬¡å†™å¯¹å°±å’Œé¢è¯•å®˜è¯´æ˜è‡ªå·±å¯¹äºã€Œå †ã€æ‰€æŒæ¡çš„çŸ¥è¯†æˆ‘æ„Ÿè§‰å°±å¯ä»¥äº†ã€‚é¢è¯•çš„æ—¶å€™ï¼Œæœ¬æ¥ç²¾ç¥å°±æ¯”å¹³å¸¸ç´§å¼ ã€‚æˆ‘ä»¬éƒ½ä¸æ˜¯ã€Œå †ã€çš„å‘æ˜äººï¼Œäº†è§£å’Œç†Ÿæ‚‰ã€Œå †ã€çš„åŸç†å’Œä½¿ç”¨åœºæ™¯ï¼Œè‡ªå·±å­¦ä¹ çš„æ—¶å€™ï¼Œæ‰‹å†™è¿‡å †ï¼Œé€šè¿‡äº†æµ‹è¯•ç”¨ä¾‹å°±å¯ä»¥äº†ã€‚

Java ä»£ç ï¼š

java

```java
public class Solution {

    public int[] sortArray(int[] nums) {
        int len = nums.length;
        // å°†æ•°ç»„æ•´ç†æˆå †
        heapify(nums);

        // å¾ªç¯ä¸å˜é‡ï¼šåŒºé—´ [0, i] å †æœ‰åº
        for (int i = len - 1; i >= 1; ) {
            // æŠŠå †é¡¶å…ƒç´ ï¼ˆå½“å‰æœ€å¤§ï¼‰äº¤æ¢åˆ°æ•°ç»„æœ«å°¾
            swap(nums, 0, i);
            // é€æ­¥å‡å°‘å †æœ‰åºçš„éƒ¨åˆ†
            i--;
            // ä¸‹æ ‡ 0 ä½ç½®ä¸‹æ²‰æ“ä½œï¼Œä½¿å¾—åŒºé—´ [0, i] å †æœ‰åº
            siftDown(nums, 0, i);
        }
        return nums;
    }

    /**
     * å°†æ•°ç»„æ•´ç†æˆå †ï¼ˆå †æœ‰åºï¼‰
     *
     * @param nums
     */
    private void heapify(int[] nums) {
        int len = nums.length;
        // åªéœ€è¦ä» i = (len - 1) / 2 è¿™ä¸ªä½ç½®å¼€å§‹é€å±‚ä¸‹ç§»
        for (int i = (len - 1) / 2; i >= 0; i--) {
            siftDown(nums, i, len - 1);
        }
    }

    /**
     * @param nums
     * @param k    å½“å‰ä¸‹æ²‰å…ƒç´ çš„ä¸‹æ ‡
     * @param end  [0, end] æ˜¯ nums çš„æœ‰æ•ˆéƒ¨åˆ†
     */
    private void siftDown(int[] nums, int k, int end) {
        while (2 * k + 1 <= end) {
            int j = 2 * k + 1;
            if (j + 1 <= end && nums[j + 1] > nums[j]) {
                j++;
            }
            if (nums[j] > nums[k]) {
                swap(nums, j, k);
            } else {
                break;
            }
            k = j;
        }
    }

    private void swap(int[] nums, int index1, int index2) {
        int temp = nums[index1];
        nums[index1] = nums[index2];
        nums[index2] = temp;
    }
}
```

Python ä»£ç ï¼š

python

```python
# è¿™é‡Œå®ç°çš„ä¸‹æ²‰æ–¹æ³•å¯ä»¥é™åˆ¶åœ¨ä¸€ä¸ªæ•°ç»„çš„å‰ç¼€ä¸­ä¸‹æ²‰ï¼Œé€šè¿‡ end ç´¢å¼•æ§åˆ¶
def __sift_down(nums, end, k):
    # end ï¼šæ•°ç»„ nums çš„å°¾ç´¢å¼•ï¼Œ
    # __sink æ–¹æ³•ç»´æŒ nums[0:end]ï¼ŒåŒ…æ‹¬ nums[end] åœ¨å†…å †æœ‰åº
    assert k <= end
    temp = nums[k]
    while 2 * k + 1 <= end:
        # åªè¦æœ‰å­©å­ç»“ç‚¹ï¼šæœ‰å·¦å­©å­ï¼Œå°±è¦å­©å­ç»“ç‚¹
        t = 2 * k + 1
        if t + 1 <= end and nums[t] < nums[t + 1]:
            # å¦‚æœæœ‰å³è¾¹çš„ç»“ç‚¹ï¼Œå¹¶ä¸”å³ç»“ç‚¹è¿˜æ¯”å·¦ç»“ç‚¹å¤§
            t += 1
        if nums[t] <= temp:
            break
        nums[k] = nums[t]
        k = t
    nums[k] = temp


def __heapify(nums):
    size = len(nums)
    for i in range((size - 1) // 2, -1, -1):
        __sift_down(nums, size - 1, i)


def heap_sort(nums):
    size = len(nums)
    __heapify(nums)

    for i in range(size - 1, 0, -1):
        nums[0], nums[i] = nums[i], nums[0]
        __sift_down(nums, i - 1, 0)


def judge_max_heap(nums):
    l = len(nums)
    for i in range((l - 2) // 2 + 1):
        if 2 * i + 1 < l and nums[2 * i + 1] > nums[i]:
            print('ä¸æ˜¯å †æœ‰åº')
        if 2 * i + 2 < l and nums[2 * i + 2] > nums[i]:
            print('ä¸æ˜¯å †æœ‰åº')
    print('å †æœ‰åº')


if __name__ == '__main__':
    nums = [184, 168, 110, 63, 121, 65, 108, 4, 25, 2]

    import random

    random.shuffle(nums)
    print('åŸå§‹æ•°ç»„', nums)
    heap_sort(nums)
    print('æ’åºç»“æœ', nums)
```

**å¤æ‚åº¦åˆ†æ**ï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘logğ‘)O(Nlogâ¡N)ï¼Œè¿™é‡Œ ğ‘N æ˜¯æ•°ç»„çš„é•¿åº¦ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(1)O(1)ã€‚

ï¼ˆæœ¬èŠ‚å®Œï¼‰