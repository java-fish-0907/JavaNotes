## ã€ŒåŠ›æ‰£ã€ç¬¬ 148 é¢˜ï¼šæ’åºé“¾è¡¨

ä¼ é€é—¨ï¼š[148. æ’åºé“¾è¡¨](https://leetcode-cn.com/problems/sort-list/)ï¼›

é¢˜è§£åœ°å€ï¼š[è‡ªåº•å‘ä¸Šçš„â€œå½’å¹¶æ’åºâ€ï¼ˆJava ä»£ç ï¼‰](https://leetcode-cn.com/problems/sort-list/solution/zi-di-xiang-shang-de-gui-bing-pai-xu-java-dai-ma-b/)ã€‚

> åœ¨ ğ‘‚(ğ‘›ğ‘™ğ‘œğ‘”ğ‘›)O(nlogn) æ—¶é—´å¤æ‚åº¦å’Œå¸¸æ•°çº§ç©ºé—´å¤æ‚åº¦ä¸‹ï¼Œå¯¹é“¾è¡¨è¿›è¡Œæ’åºã€‚
>
> ç¤ºä¾‹ 1:
>
> è¾“å…¥: 4->2->1->3
> è¾“å‡º: 1->2->3->4
> ç¤ºä¾‹ 2:
>
> è¾“å…¥: -1->5->3->4->0
> è¾“å‡º: -1->0->3->4->5

## è‡ªåº•å‘ä¸Šçš„â€œå½’å¹¶æ’åºâ€ï¼ˆJava ä»£ç ï¼‰

è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒ trickyï¼Œå¯èƒ½ç¼–ç ä¸Šè¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Œå¤§å®¶çœ‹ä¸€çœ‹å°±å¥½äº†ã€‚

ï¼ˆæ¸©é¦¨æç¤ºï¼šä¸‹é¢çš„å¹»ç¯ç‰‡ä¸­ï¼Œæœ‰å‡ é¡µä¸Šæœ‰è¾ƒå¤šçš„æ–‡å­—ï¼Œå¯èƒ½éœ€è¦æ‚¨åœç•™ä¸€ä¸‹ï¼Œå¯ä»¥ç‚¹å‡»å³ä¸‹è§’çš„åé€€ â€œ|â—€â€ æˆ–è€…å‰è¿› â€œâ–¶|â€ æŒ‰é’®æ§åˆ¶å¹»ç¯ç‰‡çš„æ’­æ”¾ã€‚ï¼‰



![148-1.png](https://pic.leetcode-cn.com/5dde7ef2dbf5dfc6ba492967ad90ae47c8b69912c933c6ff7fdd1b193df79a3a-148-1.png)

**148-1.png**

),

![148-2.png](https://pic.leetcode-cn.com/c346cb3c15ca1573ad84812ebc7414ea15f603a77eaec8da8e65b49406d57c9b-148-2.png)

**148-2.png**

),

![148-3.png](https://pic.leetcode-cn.com/6cba91ad06d27ba535ab7f5479ded87728ab6a443dbc6180aa999ca7205d2398-148-3.png)

**148-3.png**

),

![148-4.png](https://pic.leetcode-cn.com/191596efb354dc1a20d5c2cc074a5849afd30a4524e2ebdc1f52453657cb5f8f-148-4.png)

**148-4.png**

),

![148-5.png](https://pic.leetcode-cn.com/c31c4944662863515d3c8b2ba480c6d3d66edb1250514aa918afbf538a69bfc1-148-5.png)

**148-5.png**

),

![148-6.png](https://pic.leetcode-cn.com/41707f28feeec83b718eb3402135d4184f90f4069372dbf54f6da5b86ad3376f-148-6.png)

**148-6.png**

),

![148-7.png](https://pic.leetcode-cn.com/855652a477f968df5f59eaf66d6c61388d0e36abd5298d96d6bb02f1b0f49707-148-7.png)

**148-7.png**

),

![148-8.png](https://pic.leetcode-cn.com/177b1e7f1e186062f06eb54abaa1a9a0c89899901d25f6ae851cb2cb47a15f19-148-8.png)

**148-8.png**

),

![148-9.png](https://pic.leetcode-cn.com/261d0c730ba13d41aed5ea6b690c8b44a6d05d0de6f219f000c5df68ae5b43d6-148-9.png)

**148-9.png**

),

![148-10.png](https://pic.leetcode-cn.com/d6eefcc333bd3362c60f32808b7fab93eec20c1c65cee6930d2c7cf0cae38748-148-10.png)

**148-10.png**

),

![148-11.png](https://pic.leetcode-cn.com/c65fa18c769b01844170815abb245dc85a8d348924466cd301ce75b3dc888b09-148-11.png)

**148-11.png**

),

![148-12.png](https://pic.leetcode-cn.com/05cfa4d484aabc6b57598602b5d0653784646b9c928b48fd5f19b36ea62b20d6-148-12.png)

**148-12.png**

),

![148-13.png](https://pic.leetcode-cn.com/5ab524c4b1cdd9eded4c53d25c50b6dbd17c7ae9d070ec99eaed95afa12d0b39-148-13.png)

**148-13.png**

),

![148-14.png](https://pic.leetcode-cn.com/849c0c08926d27356efd734be87f73e7a8dd86d8b4e74d6962962228652a685f-148-14.png)

**148-14.png**

),

![148-15.png](https://pic.leetcode-cn.com/92858f3f9669b8c2f278029b715e2d467307a8a4fec93f67733d17b2676442c8-148-15.png)

**148-15.png**

),

![148-16.png](https://pic.leetcode-cn.com/75ab2a5b498b86c2d99d753d3da59d324c4b183edadbea6f93e7af100da427b0-148-16.png)

**148-16.png**

),

![148-17.png](https://pic.leetcode-cn.com/26a88cb6fab5285cc5e9b06d32e3e73e8b2b0b6eeadbb45b50d86a406701cf5c-148-17.png)

**148-17.png**

),

![148-18.png](https://pic.leetcode-cn.com/6291f1d052621a96ef6d5ce0b4cb9a8c8f8cb48c766bcb7d0ffa9c0836a9ac6f-148-18.png)

**148-18.png**

),

![148-19.png](https://pic.leetcode-cn.com/61fcc46a226ec29242dc14238e4a6495b48c5e9f4def7aafa79527dc6235f518-148-19.png)

**148-19.png**

),

![148-20.png](https://pic.leetcode-cn.com/c965e5623aa846259a16dfb32a6eeb7be72412568efcc8791e49d26bd470ef66-148-20.png)

**148-20.png**

),

![148-21.png](https://pic.leetcode-cn.com/af5ea17697e91188bb270ad6e1112a80f7fa92ad9e9fa7aaaef6055696ad77b7-148-21.png)

**148-21.png**

),

![148-22.png](https://pic.leetcode-cn.com/58c1457d8f202fd3010b2761482645da71ac98b30d60844fcd1f596d2c470d7e-148-22.png)

**148-22.png**

),

![148-23.png](https://pic.leetcode-cn.com/cd5b0ceec9624717db1290db4d1c426e7ba1e86ad1c24134a813dcc5221f9e08-148-23.png)

**148-23.png**

),

![148-24.png](https://pic.leetcode-cn.com/a2dc861706e5193ecfa52a5c28dc8032b1d0a48c8ad065d362e130bd2b9cc65e-148-24.png)

**148-24.png**



**å‚è€ƒä»£ç **ï¼š

Java ä»£ç ï¼š

Java

```Java
/**
 * è‡ªä¸‹è€Œä¸Šè¿›è¡Œå½’å¹¶
 *
 * @author liwei
 */
public class Solution2 {

    public ListNode sortList(ListNode head) {
        if (head == null || head.next == null) {
            return head;
        }
        // è¿™é‡Œè®¾ç½® 64 ï¼Œæ˜¯ä¸€ä¸ªç»°ç»°æœ‰ä½™çš„æ•°å­—ï¼Œå¯ä»¥æ»¡è¶³ç»“ç‚¹æ•°é‡ä¸º 2^64 è¿™ä¹ˆå¤šçš„å•é“¾è¡¨çš„æ’åº
        ListNode[] counter = new ListNode[64];
        ListNode curNode = head;
        // éå†åˆ°çš„æœ€å¤§çš„ counter æ•°ç»„çš„ç´¢å¼•
        int maxIndex = 0;
        while (curNode != null) {
            // å…ˆæŠŠå½“å‰å…ƒç´ æš‚å­˜èµ·æ¥ï¼Œé©¬ä¸Šæˆ‘ä»¬å°±è¦æŠŠå®ƒæ”¾åˆ° counter æ•°ç»„åˆé€‚çš„ä½ç½®ä¸Š
            ListNode carryNode = curNode;
            // curNode æŒ‡é’ˆé©¬ä¸Šåç§»ï¼Œæ–¹ä¾¿ä¸‹æ¬¡å¤„ç†
            curNode = curNode.next;
            // æ‹¿å‡ºçš„èŠ‚ç‚¹å°±å’ŒåŸæ¥çš„é“¾è¡¨æ²¡æœ‰å…³ç³»äº†ï¼Œæˆ‘ä»¬åœ¨ counter æ•°ç»„ä¸­å®Œæˆæ’åºï¼Œæ‰€ä»¥è¦åˆ‡æ–­å®ƒå’ŒåŸé“¾è¡¨çš„å…³ç³»
            carryNode.next = null;
            // å°è¯•ä» counter æ•°ç»„ 0 å·ç´¢å¼•å¼€å§‹æ”¾ç½®
            int i = 0;
            // åªè¦éç©ºå½“å‰ä½ç½®éç©ºï¼Œå°±è¿›è¡Œä¸€æ¬¡ mergeï¼Œmerge ä»¥åå°è¯•æ”¾åˆ°ä¸‹ä¸€æ ¼ï¼Œå¦‚æœä¸‹ä¸€æ ¼éç©ºå°±ç»§ç»­åˆå¹¶
            // åˆå¹¶ä»¥åå†å°è¯•æ”¾åˆ°ä¸‹ä¸€æ ¼ï¼Œç›´åˆ°ä¸‹ä¸€æ ¼ä¸ºç©ºï¼Œç›´æ¥æ”¾åœ¨é‚£ä¸ªä¸ºç©ºçš„ä¸‹ä¸€æ ¼å°±å¥½
            while (counter[i] != null) {
                ListNode newMergeNode = mergeOfTwoSortedListNode(carryNode, counter[i]);
                counter[i] = null;
                i++;
                carryNode = newMergeNode;
            }
            // é‡åˆ°äº†ç©ºï¼Œå°±æŠŠ carryNode æ”¾åœ¨æ•°ç»„çš„è¿™ä¸ªä½ç½®ä¸Š
            counter[i] = carryNode;
            // è®°å½•æœ€å¤šä½¿ç”¨åˆ° counter æ•°ç»„çš„ç¬¬å‡ ä½ï¼Œæœ€ååˆå¹¶çš„æ—¶å€™è¦ç”¨ä¸Š
            if (i > maxIndex) {
                maxIndex = i;
            }
        }
        // éå†æ•´ä¸ª count æ•°ç»„ï¼Œå°†å®ƒä»¬å…¨éƒ¨å½’å¹¶ï¼Œè¿™ä¸ªæ“ä½œå°±å’Œå½’å¹¶ n ä¸ªæœ‰åºå•é“¾è¡¨æ˜¯ä¸€æ ·çš„äº†ï¼Œæˆ‘ä»¬è¿™é‡Œé‡‡ç”¨ä¸¤ä¸¤å½’å¹¶
        // è¿˜å¯ä»¥é‡‡ç”¨ LeetCode ç¬¬ 23 é¢˜çš„åŠæ³•å®Œæˆè¿™ä¸€æ­¥
        // å‚è€ƒï¼šhttps://liweiwei1419.github.io/leetcode-solution/leetcode-0023-merge-k-sorted-lists/
        ListNode res = null;
        for (int i = 0; i <= maxIndex; i++) {
            if (counter[i] != null) {
                res = mergeOfTwoSortedListNode(res, counter[i]);
            }
        }
        return res;
    }

    /**
     * å½’å¹¶ä¸¤ä¸ªå·²ç»æ’å¥½åºçš„å•é“¾è¡¨ï¼Œæ˜¯æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„æ“ä½œäº†ï¼Œå¯ä»¥é€’å½’å®Œæˆï¼Œä¹Ÿå¯ä»¥ç©¿é’ˆå¼•çº¿ï¼Œè¿™é‡Œæˆ‘ä»¬é€’å½’å®Œæˆ
     *
     * @param l1 é¡ºåºå­˜æ”¾çš„å•é“¾è¡¨1
     * @param l2 é¡ºåºå­˜æ”¾çš„å•é“¾è¡¨2
     * @return åˆå¹¶ä»¥åçš„å•é“¾è¡¨
     */
    private ListNode mergeOfTwoSortedListNode(ListNode l1, ListNode l2) {
        if (l1 == null) {
            return l2;
        }
        if (l2 == null) {
            return l1;
        }
        if (l1.val < l2.val) {
            l1.next = mergeOfTwoSortedListNode(l1.next, l2);
            return l1;
        } else {
            l2.next = mergeOfTwoSortedListNode(l1, l2.next);
            return l2;
        }
    }

    public static void main(String[] args) {
        int[] nums = new int[]{9, 8, 2, 7, 6, 5, 4, 3, 1};
        ListNode head = new ListNode(nums);
        Solution2 solution2 = new Solution2();
        ListNode sortList = solution2.sortList(head);
        System.out.println(sortList);
    }
}
```

ä¸‹é¢è¡¥å……â€œè‡ªé¡¶å‘ä¸‹â€çš„â€œå½’å¹¶æ’åºâ€çš„å†™æ³•ï¼Œæ³¨æ„ 3 ç§å†™æ³•çš„ä¸åŒä¹‹å¤„ã€‚

Python ä»£ç  1ï¼š

Python

```Python
class ListNode:
    def __init__(self, x):
        self.val = x
        self.next = None


class Solution:
    def sortList(self, head: ListNode) -> ListNode:
        if head is None or head.next is None:
            return head

        # æ‰¾åˆ°ä¸­ç‚¹
        slow = head
        fast = head
        # ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå½“ç»“ç‚¹ä¸ªæ•°ä¸º 2 ä¸ªæ—¶å€™ï¼Œslow åœ¨å·¦ç»“ç‚¹
        # ä¸ä¼šå¯¼è‡´æ­»å¾ªç¯
        while fast.next and fast.next.next:
            slow = slow.next
            fast = fast.next.next
        head2 = slow.next
        slow.next = None

        lnode = self.sortList(head)
        rnode = self.sortList(head2)

        return self.__merge_two_sorted_list(lnode, rnode)

    def __merge_two_sorted_list(self, head1, head2):
        if head1 is None:
            return head2
        if head2 is None:
            return head1

        if head1.val < head2.val:
            head1.next = self.__merge_two_sorted_list(head1.next, head2)
            return head1
        else:
            head2.next = self.__merge_two_sorted_list(head1, head2.next)
            return head2
```

Python ä»£ç  2ï¼š

Python

```Python
class ListNode:
    def __init__(self, x):
        self.val = x
        self.next = None


# è¿™é‡Œæœ‰ä¸ªå°é™·é˜±ï¼Œå¦‚æœé‡åˆ°é—®é¢˜ï¼Œä¸è¦ç€æ€¥ï¼Œä»£ç è°ƒè¯•å°±å¥½äº†

class Solution:
    def sortList(self, head: ListNode) -> ListNode:
        if head is None or head.next is None:
            return head
        # æ‰¾åˆ°ä¸­ç‚¹
        slow = head
        fast = head
        while fast and fast.next:
            # è¿™é‡Œè¦ä¿å­˜ä¸€ä¸‹å‰ä¸€ä¸ªæŒ‡é’ˆ
            p = slow
            slow = slow.next
            fast = fast.next.next

        p.next = None
        # print_node_list(head)
        # print_node_list(head2)
        lnode = self.sortList(head)
        rnode = self.sortList(slow)
        return self.__merge_two_sorted_list(lnode, rnode)

    def __merge_two_sorted_list(self, head1, head2):
        if head1 is None:
            return head2
        if head2 is None:
            return head1

        if head1.val < head2.val:
            head1.next = self.__merge_two_sorted_list(head1.next, head2)
            return head1
        else:
            head2.next = self.__merge_two_sorted_list(head1, head2.next)
            return head2


def create_node_list(arr):
    head = ListNode(arr[0])
    cur = head
    for i in range(1, len(arr)):
        cur.next = ListNode(arr[i])
        cur = cur.next
    return head


def print_node_list(head):
    while head:
        print(head.val, '->', end=' ')
        head = head.next
    print('NULL')


if __name__ == '__main__':
    arr = [4, 2, 1, 3]
    head = create_node_list(arr)
    print_node_list(head)

    solution = Solution()
    result = solution.sortList(head)
    print_node_list(result)
```

Python ä»£ç  3ï¼š

Python

```Python
class ListNode:
    def __init__(self, x):
        self.val = x
        self.next = None


# è¿™é‡Œæœ‰ä¸ªå°é™·é˜±ï¼Œå¦‚æœé‡åˆ°é—®é¢˜ï¼Œä¸è¦ç€æ€¥ï¼Œä»£ç è°ƒè¯•å°±å¥½äº†

class Solution:
    def sortList(self, head: ListNode) -> ListNode:
        if head is None or head.next is None:
            return head
        # ç„æœºåœ¨è¿™é‡Œï¼Œå¦‚æœéè¦ç”¨ while fast and fast.next:
        # è®©å¿«æŒ‡é’ˆå…ˆèµ°ä¸€æ­¥ï¼Œä»¥é¿å…æ­»å¾ªç¯
        slow = head
        fast = head.next
        while fast and fast.next:
            slow = slow.next
            fast = fast.next.next

        new_head = slow.next
        slow.next = None

        lnode = self.sortList(head)
        rnode = self.sortList(new_head)
        return self.__merge_two_sorted_list(lnode, rnode)

    def __merge_two_sorted_list(self, head1, head2):
        if head1 is None:
            return head2
        if head2 is None:
            return head1

        if head1.val < head2.val:
            head1.next = self.__merge_two_sorted_list(head1.next, head2)
            return head1
        else:
            head2.next = self.__merge_two_sorted_list(head1, head2.next)
            return head2


def create_node_list(arr):
    head = ListNode(arr[0])
    cur = head
    for i in range(1, len(arr)):
        cur.next = ListNode(arr[i])
        cur = cur.next
    return head


def print_node_list(head):
    while head:
        print(head.val, '->', end=' ')
        head = head.next
    print('NULL')


if __name__ == '__main__':
    arr = [4, 2, 1, 3]
    head = create_node_list(arr)
    print_node_list(head)

    solution = Solution()
    result = solution.sortList(head)
    print_node_list(result)
```



```
class ListNode {
    int val;
    ListNode next;

    ListNode(int x) {
        val = x;
    }

    ListNode(int[] nums) {
        ListNode currNode = this;
        currNode.val = nums[0];
        for (int i = 1; i < nums.length; i++) {
            currNode.next = new ListNode(nums[i]);
            currNode = currNode.next;
        }
    }

    @Override
    public String toString() {
        ListNode currNode = this;
        StringBuilder s = new StringBuilder();
        while (currNode != null) {
            s.append(currNode.val);
            s.append(" -> ");
            currNode = currNode.next;
        }
        s.append("NULL");
        return s.toString();
    }
}
```

ä¼ªä»£ç 

```
current = dummy.next;
tail = dummy;
for (step = 1; step < length; step *= 2) {
    while (current) {
        // left->@->@->@->@->@->@->null
        left = current;

        // left->@->@->null   right->@->@->@->@->null
        right = cut(current, step); // å°† current åˆ‡æ‰å‰ step ä¸ªå¤´åˆ‡ä¸‹æ¥ã€‚

        // left->@->@->null   right->@->@->null   current->@->@->null
        current = cut(right, step); // å°† right åˆ‡æ‰å‰ step ä¸ªå¤´åˆ‡ä¸‹æ¥ã€‚

        // dummy.next -> @->@->@->@->nullï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹æ˜¯ tailï¼Œå§‹ç»ˆè®°å½•
        //                        ^
        //                        tail
        tail.next = merge(left, right);
        while (tail->next) tail = tail->next; // ä¿æŒ tail ä¸ºå°¾éƒ¨
    }
}
```

ä½œè€…ï¼šivan_allen
é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/two-sum/solution/148-pai-xu-lian-biao-bottom-to-up-o1-kong-jian-by-/
æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

å¥½äº†ï¼Œä¸‹é¢æ˜¯æ¯”è¾ƒæ­£å¼çš„ä»£ç ã€‚

```
class Solution {
public:
    ListNode* sortList(ListNode* head) {
        ListNode dummyHead(0);
        dummyHead.next = head;
        auto p = head;
        int length = 0;
        while (p) {
            ++length;
            p = p->next;
        }

        for (int size = 1; size < length; size <<= 1) {
            auto cur = dummyHead.next;
            auto tail = &dummyHead;

            while (cur) {
                auto left = cur;
                auto right = cut(left, size); // left->@->@ right->@->@->@...
                cur = cut(right, size); // left->@->@ right->@->@  cur->@->...

                tail->next = merge(left, right);
                while (tail->next) {
                    tail = tail->next;
                }
            }
        }
        return dummyHead.next;
    }

    ListNode* cut(ListNode* head, int n) {
        auto p = head;
        while (--n && p) {
            p = p->next;
        }

        if (!p) return nullptr;

        auto next = p->next;
        p->next = nullptr;
        return next;
    }

    ListNode* merge(ListNode* l1, ListNode* l2) {
        ListNode dummyHead(0);
        auto p = &dummyHead;
        while (l1 && l2) {
            if (l1->val < l2->val) {
                p->next = l1;
                p = l1;
                l1 = l1->next;       
            } else {
                p->next = l2;
                p = l2;
                l2 = l2->next;
            }
        }
        p->next = l1 ? l1 : l2;
        return dummyHead.next;
    }
};
```

ä½œè€…ï¼šivan_allen
é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/two-sum/solution/148-pai-xu-lian-biao-bottom-to-up-o1-kong-jian-by-/
æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

### ç»ƒä¹ 3ï¼šLeetCode ç¬¬ 148 é¢˜ï¼šå•é“¾è¡¨çš„æ’åºï¼Œä½¿ç”¨å½’å¹¶æ’åº

ä¼ é€é—¨ï¼šè‹±æ–‡ç½‘å€ï¼š[148. Sort List](https://leetcode.com/problems/sort-list/description/) ï¼Œä¸­æ–‡ç½‘å€ï¼š[148. æ’åºé“¾è¡¨](https://leetcode-cn.com/problems/sort-list/description/) ã€‚

> åœ¨ *O*(*n* log *n*) æ—¶é—´å¤æ‚åº¦å’Œå¸¸æ•°çº§ç©ºé—´å¤æ‚åº¦ä¸‹ï¼Œå¯¹é“¾è¡¨è¿›è¡Œæ’åºã€‚
>
> **ç¤ºä¾‹ 1:**
>
> ```
> è¾“å…¥: 4->2->1->3
> è¾“å‡º: 1->2->3->4
> ```
>
> **ç¤ºä¾‹ 2:**
>
> ```
> è¾“å…¥: -1->5->3->4->0
> è¾“å‡º: -1->0->3->4->5
> ```

å†™ä¸€ä¸ªæ’åºç®—æ³•ï¼Œç”¨ ğ‘‚(ğ‘›logğ‘›)O(nlogâ¡n) çš„æ—¶é—´å¤æ‚åº¦ä¸ºä¸€ä¸ªé“¾è¡¨è¿›è¡Œæ’åºã€‚

å¯¹äºå•é“¾è¡¨è€Œè¨€ï¼Œå½’å¹¶æ’åºæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚

æ€è·¯1ï¼šè‡ªé¡¶å‘ä¸‹çš„å½’å¹¶æ’åºã€‚

æ³¨æ„1ï¼šç‰¹åˆ«æ³¨æ„ä¸‹é¢è¿™ä¹ˆä¸€æ®µï¼š

python

```python
while fast.next and fast.next.next:
    slow = slow.next
    fast = fast.next.next
```

è¯´æ˜ï¼š

- è¿™ä¸ªæ–¹æ³•èµ°åˆ°è¿™é‡Œï¼Œå› ä¸ºæœ‰å‰é¢çš„ç‰¹åˆ¤ï¼Œæ‰€ä»¥è‡³å°‘å¾—æœ‰ 22 ä¸ªç»“ç‚¹ï¼Œæ‰å¯ä»¥æ’åºã€‚è€Œ**å–ä¸­ç‚¹çš„æ“ä½œï¼Œåªæœ‰åœ¨â€œä¸‹ä¸ªç»“ç‚¹â€å’Œâ€œä¸‹ä¸‹ç»“ç‚¹â€**éƒ½å­˜åœ¨çš„æ—¶å€™ï¼Œæ‰èƒ½è¿™ä¹ˆåšï¼›
- çœ‹çœ‹è¿™ä¸ªå¾ªç¯çš„å¾ªç¯ä½“å°±æ˜ç™½äº†ã€‚

æ³¨æ„2ï¼šæ‰¾åˆ°ä¸­é—´ç»“ç‚¹ä»¥åï¼Œè®°å¾—æŠŠé“¾è¡¨â€œä»ä¸­åˆ‡æ–­â€ï¼Œè¿™æ˜¯ç¬¦åˆé€»è¾‘çš„ã€‚

Python ä»£ç ï¼š

python

```python
class Solution:
    def sortList(self, head):
        """
        :type head: ListNode
        :rtype: ListNode
        """

        if head is None or head.next is None:
            return head

        # æ‰¾åˆ°ä¸­ç‚¹

        slow = head
        fast = head
        while fast.next and fast.next.next:
            slow = slow.next
            fast = fast.next.next
        head2 = slow.next
        slow.next = None

        lnode = self.sortList(head)
        rnode = self.sortList(head2)

        return self.__merge_two_sorted_list(lnode, rnode)

    def __merge_two_sorted_list(self, head1, head2):
        if head1 is None:
            return head2
        if head2 is None:
            return head1

        if head1.val < head2.val:
            head1.next = self.__merge_two_sorted_list(head1.next, head2)
            return head1
        else:
            head2.next = self.__merge_two_sorted_list(head1, head2.next)
            return head2
```

å¦ä¸€ç§å†™æ³•ï¼š

ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœæ˜¯

python

```python
while fast and fast.next:
    p = slow
    slow = slow.next
    fast = fast.next.next
```

è¿™ç§å–æ³•ï¼Œ**é‡åˆ°ä¸¤ä¸ªç»“ç‚¹çš„æ—¶å€™ï¼Œslow ä¼šå‘å‰èµ°ä¸€æ­¥ï¼Œä½†æ˜¯æˆªæ–­å¾—åœ¨ slow ç»“ç‚¹ä¹‹å‰ï¼Œå¦åˆ™ä¼šè¿›å…¥æ­»å¾ªç¯ï¼ŒæŒ‰ç…§æˆ‘è¯´çš„ï¼Œç”»ä¸€ä¸ªä¸¤ä¸ªç»“ç‚¹çš„é“¾è¡¨å°±å¾ˆæ¸…æ¥šäº†**ã€‚

é‡åˆ°æ­»å¾ªç¯çš„æ—¶å€™ï¼Œä¸è¦ç€æ€¥ï¼Œè¿˜æœ‰è€å¿ƒ debugï¼Œåˆ†æä»£ç è¿è¡Œæµç¨‹ï¼Œå¾ˆå¤šæ—¶å€™é—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚

Python ä»£ç ï¼š

python

```python
# Definition for singly-linked list.
class ListNode:
    def __init__(self, x):
        self.val = x
        self.next = None


# è¿™é‡Œæœ‰ä¸ªå°é™·é˜±ï¼Œå¦‚æœé‡åˆ°é—®é¢˜ï¼Œä¸è¦ç€æ€¥ï¼Œä»£ç è°ƒè¯•å°±å¥½äº†

class Solution:
    def sortList(self, head):
        """
        :type head: ListNode
        :rtype: ListNode
        """

        if head is None or head.next is None:
            return head

        # æ‰¾åˆ°ä¸­ç‚¹

        slow = head
        fast = head
        while fast and fast.next:
            p = slow
            slow = slow.next
            fast = fast.next.next

        p.next = None

        # print_node_list(head)
        # print_node_list(head2)

        lnode = self.sortList(head)
        rnode = self.sortList(slow)

        return self.__merge_two_sorted_list(lnode, rnode)

    def __merge_two_sorted_list(self, head1, head2):
        if head1 is None:
            return head2
        if head2 is None:
            return head1

        if head1.val < head2.val:
            head1.next = self.__merge_two_sorted_list(head1.next, head2)
            return head1
        else:
            head2.next = self.__merge_two_sorted_list(head1, head2.next)
            return head2


def create_node_list(arr):
    head = ListNode(arr[0])
    cur = head
    for i in range(1, len(arr)):
        cur.next = ListNode(arr[i])
        cur = cur.next
    return head


def print_node_list(head):
    while head:
        print(head.val, '->', end=' ')
        head = head.next
    print('NULL')


if __name__ == '__main__':
    arr = [4, 2, 1, 3]
    head = create_node_list(arr)
    print_node_list(head)

    solution = Solution()
    result = solution.sortList(head)
    print_node_list(result)
```

æ€è·¯2ï¼šè‡ªåº•å‘ä¸Šçš„å½’å¹¶æ’åºã€‚

æˆ‘ä»¥å‰å†™äº†ä¸€ä¸ªç¤ºæ„å›¾ï¼Œå¯ä»¥ç‚¹[è¿™é‡Œ](https://liweiwei1419.github.io/leetcode-solution/leetcode-0148-sort-list/)çœ‹ï¼Œæ€æƒ³è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚

ï¼ˆæœ¬èŠ‚å®Œï¼‰