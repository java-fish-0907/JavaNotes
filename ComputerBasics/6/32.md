## ã€ŒåŠ›æ‰£ã€ç¬¬ 460 é¢˜ï¼šLFU ç¼“å­˜

- [é“¾æ¥](https://leetcode-cn.com/problems/lfu-cache)
- [é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/lfu-cache/solution/ha-xi-biao-shuang-xiang-lian-biao-java-by-liweiwei/)

> è®¾è®¡å¹¶å®ç°æœ€ä¸ç»å¸¸ä½¿ç”¨ï¼ˆLFUï¼‰ç¼“å­˜çš„æ•°æ®ç»“æ„ã€‚å®ƒåº”è¯¥æ”¯æŒä»¥ä¸‹æ“ä½œï¼šget å’Œ putã€‚
>
> getğ‘˜ğ‘’ğ‘¦key - å¦‚æœé”®å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è·å–é”®çš„å€¼ï¼ˆæ€»æ˜¯æ­£æ•°ï¼‰ï¼Œå¦åˆ™è¿”å› -1ã€‚
> putğ‘˜ğ‘’ğ‘¦,ğ‘£ğ‘ğ‘™ğ‘¢ğ‘’key,value - å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¯·è®¾ç½®æˆ–æ’å…¥å€¼ã€‚å½“ç¼“å­˜è¾¾åˆ°å…¶å®¹é‡æ—¶ï¼Œå®ƒåº”è¯¥åœ¨æ’å…¥æ–°é¡¹ç›®ä¹‹å‰ï¼Œä½¿æœ€ä¸ç»å¸¸ä½¿ç”¨çš„é¡¹ç›®æ— æ•ˆã€‚åœ¨æ­¤é—®é¢˜ä¸­ï¼Œå½“å­˜åœ¨å¹³å±€ï¼ˆå³ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªé”®å…·æœ‰ç›¸åŒä½¿ç”¨é¢‘ç‡ï¼‰æ—¶ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®å°†è¢«å»é™¤ã€‚
>
> è¿›é˜¶ï¼š
> ä½ æ˜¯å¦å¯ä»¥åœ¨ O11 æ—¶é—´å¤æ‚åº¦å†…æ‰§è¡Œä¸¤é¡¹æ“ä½œï¼Ÿ
>
> ç¤ºä¾‹ï¼š
>
> ```
> LFUCache cache = new LFUCache( 2 /* capacity (ç¼“å­˜å®¹é‡) */ );
> 
> cache.put(1, 1);
> cache.put(2, 2);
> cache.get(1);       // è¿”å› 1
> cache.put(3, 3);    // å»é™¤ key 2
> cache.get(2);       // è¿”å› -1 (æœªæ‰¾åˆ°key 2)
> cache.get(3);       // è¿”å› 3
> cache.put(4, 4);    // å»é™¤ key 1
> cache.get(1);       // è¿”å› -1 (æœªæ‰¾åˆ° key 1)
> cache.get(3);       // è¿”å› 3
> cache.get(4);       // è¿”å› 4
> ```

é¢˜ç›®æ„æ€ï¼šç¼“å­˜æ˜¯æœ‰é™çš„ï¼Œåœ¨ç¼“å­˜æ»¡çš„æ—¶å€™ï¼Œåˆ é™¤å“ªäº›å…ƒç´ ï¼Œå°±æœ‰ä¸åŒçš„ç¼“å­˜åˆ é™¤ç­–ç•¥ã€‚

è¯´æ˜ï¼šå¦‚æœç¼“å­˜ä¸é™åˆ¶å¤§å°ï¼Œå°±æ²¡æœ‰ä¸‹é¢çš„è¿™ä¸¤é“é—®é¢˜äº†ã€‚å³ä¸‹é¢è¿™ä¸¤ç§ç­–ç•¥æ˜¯åœ¨ç¼“å­˜æ»¡çš„æƒ…å†µä¸‹ï¼Œä¸¤ç§ä¸åŒçš„ç¼“å­˜åˆ é™¤è§„åˆ™ã€‚

### LRU ï¼ˆLeast Recently Usedï¼‰ç¼“å­˜æœºåˆ¶ï¼ˆçœ‹æ—¶é—´ï¼‰

ã€ŒåŠ›æ‰£ã€ç¬¬ 146 é¢˜ï¼š[LRUç¼“å­˜æœºåˆ¶](https://leetcode-cn.com/problems/lru-cache/)

- åœ¨ç¼“å­˜æ»¡çš„æ—¶å€™ï¼Œåˆ é™¤ç¼“å­˜é‡Œæœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ï¼Œç„¶åå†æ”¾å…¥æ–°å…ƒç´ ï¼›
- æ•°æ®çš„è®¿é—®æ—¶é—´å¾ˆé‡è¦ï¼Œ**è®¿é—®æ—¶é—´è·ç¦»ç°åœ¨è¶Šè¿‘**ï¼Œå°±è¶Šä¸å®¹æ˜“è¢«åˆ é™¤ï¼›

å°±æ˜¯å–œæ–°åŒæ—§ï¼Œæ·˜æ±°åœ¨ç¼“å­˜é‡Œå‘†çš„æ—¶é—´æœ€ä¹…çš„å…ƒç´ ã€‚åœ¨åˆ é™¤å…ƒç´ çš„æ—¶å€™ï¼Œåªçœ‹ã€Œæ—¶é—´ã€è¿™ä¸€ä¸ªç»´åº¦ã€‚

### LFU ï¼ˆLeast Frequently Usedï¼‰ç¼“å­˜æœºåˆ¶ï¼ˆçœ‹è®¿é—®æ¬¡æ•°ï¼‰

- åœ¨ç¼“å­˜æ»¡çš„æ—¶å€™ï¼Œåˆ é™¤ç¼“å­˜é‡Œä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„å…ƒç´ ï¼Œç„¶ååœ¨ç¼“å­˜ä¸­æ”¾å…¥æ–°å…ƒç´ ï¼›
- æ•°æ®çš„è®¿é—®æ¬¡æ•°å¾ˆé‡è¦ï¼Œ**è®¿é—®æ¬¡æ•°è¶Šå¤š**ï¼Œå°±è¶Šä¸å®¹æ˜“è¢«åˆ é™¤ï¼›
- æ ¹æ®é¢˜æ„ï¼Œã€Œå½“å­˜åœ¨å¹³å±€ï¼ˆå³ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªé”®å…·æœ‰ç›¸åŒä½¿ç”¨é¢‘ç‡ï¼‰æ—¶ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®å°†è¢«å»é™¤ã€ï¼Œå³åœ¨ã€Œè®¿é—®æ¬¡æ•°ã€ç›¸åŒçš„æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§æ—¶é—´é¡ºåºï¼Œå…ˆåˆ é™¤åœ¨ç¼“å­˜é‡Œæ—¶é—´æœ€ä¹…çš„æ•°æ®ã€‚

è¯´æ˜ï¼šæœ¬é¢˜å…¶å®å°±æ˜¯åœ¨ã€ŒåŠ›æ‰£ã€ç¬¬ 146 é¢˜ï¼š[LRUç¼“å­˜æœºåˆ¶](https://leetcode-cn.com/problems/lru-cache/) çš„åŸºç¡€ä¸Šï¼Œåœ¨åˆ é™¤ç­–ç•¥é‡Œå¤šè€ƒè™‘äº†ä¸€ä¸ªç»´åº¦ï¼ˆã€Œè®¿é—®æ¬¡æ•°ã€ï¼‰çš„ä¿¡æ¯ã€‚

æ ¸å¿ƒæ€æƒ³ï¼šå…ˆè€ƒè™‘è®¿é—®æ¬¡æ•°ï¼Œåœ¨è®¿é—®æ¬¡æ•°ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå†è€ƒè™‘ç¼“å­˜çš„æ—¶é—´ã€‚

## æ€è·¯

- ç”±äºé¢˜ç›®çš„æ—¶é—´å¤æ‚åº¦è¦æ±‚ ğ‘‚(1)O(1)ï¼Œç©ºé—´è‚¯å®šä¸èƒ½çœï¼Œå­˜å–æ•°æ®æ—¶é—´æ€§èƒ½æœ€å¥½çš„å°±æ˜¯å“ˆå¸Œè¡¨ï¼Œå› æ­¤åº•å±‚çš„æ•°æ®ç»“æ„ä¸€å®šæ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼›
- åˆç”±äºç¼“å­˜å¤§å°æœ‰é™åˆ¶ï¼Œåˆ é™¤ç­–ç•¥æ˜¯ã€Œå…ˆçœ‹è®¿é—®é¢‘æ¬¡ï¼Œå†çœ‹è®¿é—®æ—¶é—´ã€ï¼Œæ‰€ä»¥éœ€è¦è®°å½•æ¯ä¸ªæ•°æ®è®¿é—®çš„é¢‘æ¬¡ï¼›
- ã€Œåˆ é™¤æŸä¸ªæ•°æ®ã€å¾— ğ‘‚(1)O(1)ï¼Œè®¿é—®æŸä¸ªæ•°æ®ï¼Œæ—¶é—´ä¼˜å…ˆçº§å¾—æå‰ï¼ˆæå‰åˆ°å½“å‰é¢‘æ¬¡æœ€é«˜ï¼‰ï¼Œ**è¿™æ ·çš„æ•°æ®ç»“æ„ç¬¦åˆåœ¨å¤´å°¾è®¿é—®æ•°æ®æœ€å¿«ï¼Œå¹¶ä¸”åˆ é™¤å…¶ä¸­ä¸€ä¸ªç»“ç‚¹ä¹Ÿå¾—æ˜¯ ğ‘‚(1)O(1)ï¼Œè¿™ç§æ•°æ®ç»“æ„æ˜¯ã€ŒåŒå‘é“¾è¡¨ã€**ï¼›
- ã€Œé“¾è¡¨ã€ç»“ç‚¹å¾—è®°å½•ï¼š1ã€valueï¼Œ2ã€keyï¼ˆåœ¨å“ˆå¸Œè¡¨é‡Œåˆ é™¤çš„æ—¶å€™ç”¨å¾—ä¸Šï¼‰ï¼Œ3ã€è®¿é—®æ¬¡æ•°ä¿¡æ¯ï¼Œä»¥ä¾¿çŸ¥é“ä¸‹ä¸€ä¸ªè®¿é—®æ¬¡æ•°æ˜¯å¤šå°‘ï¼›4ã€å‰é©±ç»“ç‚¹å¼•ç”¨ï¼Œ5ã€åç»§ç»“ç‚¹å¼•ç”¨ï¼›
- å“ˆå¸Œè¡¨å­˜å‚¨çš„ key å°±æ˜¯é¢˜ç›®çš„ keyï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥è¯¢å’Œåˆ é™¤ï¼Œvalue æ˜¯ç»“ç‚¹çš„å¼•ç”¨ï¼Œæ–¹ä¾¿å¯¹ç»“ç‚¹è¿›è¡Œæ“ä½œã€‚

è¿™æ ·ä¸€å¥—è®¾è®¡ä¸‹æ¥ï¼Œé¢˜ç›®ä¸­è¦æ±‚çš„æ“ä½œå°±æ˜¯ ğ‘‚(1)O(1) äº†ã€‚

ä¸‹é¢æ˜¯å†…å­˜ç»“æ„ç¤ºæ„å›¾ï¼š



![image.png](https://pic.leetcode-cn.com/909ea661e76e600e49763d06d2fa72b7897e36ebf47d966292636bce1b241734-image.png)

**image.png**



ï¼ˆå›¾æ˜¯ç”¨è½¯ä»¶ OmniGraffle ç”»çš„ã€‚ä¸å¤ªå¤æ‚çš„è§„åˆ™å›¾å½¢ï¼Œç”¨ PPT ä¹Ÿå¯ä»¥ç”»å‡ºæ¥ã€‚ï¼‰

- æ¯æ¬¡è®¿é—®ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å…ƒç´ çš„æ—¶å€™ï¼šåº”è¯¥å…ˆæŠŠç»“ç‚¹ç±»ä»å½“å‰æ‰€å±çš„è®¿é—®æ¬¡æ•°åŒé“¾è¡¨é‡Œåˆ é™¤ï¼Œç„¶åå†æ·»åŠ åˆ°å®ƒã€Œä¸‹ä¸€ä¸ªè®¿é—®æ¬¡æ•°ã€çš„åŒå‘é“¾è¡¨çš„å¤´éƒ¨ã€‚

ç¼–ç è¯´æ˜ï¼š

- åº”è¯¥å…ˆå¼„æ¸…æ¥šæ€è·¯ï¼Œå†ç¼–ç ï¼›
- å¯ä»¥è®¾è®¡æˆã€ŒåŒå‘é“¾è¡¨ã€çš„å°¾éƒ¨å­˜å‚¨è¾ƒæ–°è®¿é—®çš„ç»“ç‚¹ï¼Œå¤´éƒ¨æ˜¯å½“å‰é¢‘æ¬¡æœ€æ—§çš„ç»“ç‚¹ã€‚åŒå‘é“¾è¡¨åœ¨ç»“æ„ä¸Šæ˜¯å¯¹ç§°çš„ï¼Œç¼–ç çš„æ—¶å€™æ³¨æ„ä¿æŒè¯­ä¹‰ä¸€è‡´ï¼›
- ã€ŒåŒå‘é“¾è¡¨ã€çš„å¸¸è§æ“ä½œæ˜¯ä½¿ç”¨ä¸¤ä¸ªè™šæ‹Ÿç»“ç‚¹ï¼Œä¸€ä¸ªè®¿é—®å¤´éƒ¨æœ€å¿«ï¼Œå¦ä¸€ä¸ªè®¿é—®å°¾éƒ¨æœ€å¿«ï¼Œè¿™ä¸ªæŠ€å·§å…¶å®åœ¨ã€Œå•é“¾è¡¨ã€ä¸­æˆ‘ä»¬å·²ç»è§è¿‡ï¼Œå«ã€Œå“¨å…µç»“ç‚¹ã€ï¼›
- é“¾è¡¨ä¸­çš„ç›¸å…³æ“ä½œå»ºè®®ç”»å›¾å»æ€è€ƒå®ç°ï¼Œå¦åˆ™å‡­ç©ºæƒ³è±¡ä¸€äº›æŒ‡é’ˆå˜é‡çš„æŒ‡å‘æ“ä½œå®¹æ˜“å‡ºé”™ï¼›
- å¦‚æœåœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ä¸€äº›æ•°æ®éœ€è¦ç»´æŠ¤ï¼Œå¯ä»¥é€‚å½“å¢åŠ å±æ€§ï¼›
- åœ¨ä¸€äº›æ“ä½œä¸­ç›¸åŒçš„æ“ä½œï¼Œåº”è¯¥è€ƒè™‘æŠ½å–æˆå…¬ç”¨çš„æ–¹æ³•ï¼›
- åœ¨ç¼–ç å®Œæˆä»¥åï¼Œéœ€è¦æ³¨æ„è°ƒè¯•ï¼Œè¿™ä¸€æ­¥æ˜¯å¾ˆèŠ±æ—¶é—´çš„ï¼Œä¹Ÿæ²¡æœ‰è¿‡å¤šçš„æŠ€å·§ï¼Œæ·»åŠ æ‰“å°è¾“å‡ºè¯­å¥ã€‚

æ³¨æ„ï¼š

1. ä»¥ä¸‹ä»£ç ç”±äºæœ¬äººæ°´å¹³æœ‰é™ï¼Œå°è£…è¿˜ä¸å¤Ÿå¥½ï¼Œä»…ä¾›å‚è€ƒï¼›
2. ä¸‹é¢çš„ä»£ç ç»†èŠ‚ç‰¹åˆ«å¤šï¼Œè¯»è€…**æµè§ˆå³å¯ï¼Œä¸å»ºè®®æ¨¡ä»¿ï¼Œåº”è¯¥å°è¯•è‡ªå·±ç¼–å†™å®Œæˆï¼Œç›¸ä¿¡æ˜¯ä¸€ä¸ªä¸é”™çš„ç¼–ç¨‹ç»ƒä¹ **ï¼›
3. `ListNode` ç»“ç‚¹ç±»ï¼Œå“ˆå¸Œè¡¨è¦ç”¨åˆ°ï¼ŒåŒå‘é“¾è¡¨ä¹Ÿä¼šç”¨åˆ°ï¼Œå› æ­¤è®¾è®¡åœ¨å¤–é¢ï¼›
4. Java é‡Œçš„ `LinkedList` å°±æ˜¯åŒå‘é“¾è¡¨ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†ç»ƒä¹ ï¼Œå®šåˆ¶åŒ–ä¸€äº›æ“ä½œï¼Œå› æ­¤æ‰‹å†™ã€‚

**å‚è€ƒä»£ç **ï¼š

æ„Ÿè°¢ [@zhangkyou](https://www.liwei.party/u/zhangkyou/) å’Œ [@lzhlyle](https://www.liwei.party/u/lzhlyle/) æœ‹å‹çš„æé†’ï¼ŒåŸæ¥æˆ‘çš„ä»£ç ç»´æŠ¤çš„æ˜¯ `maxFrequent`ï¼Œæ—¶é—´å¤æ‚åº¦æ²¡æœ‰åˆ° ğ‘‚(1)O(1)ï¼Œåº”è¯¥ç»´æŠ¤çš„æ˜¯ `minFrequent`ã€‚éœ€è¦åœ¨ä»¥ä¸‹ä¸¤å¤„ç»´æŠ¤è¿™ä¸ªå˜é‡ï¼š

- æ’å…¥ä¸€ä¸ªæ–°ç»“ç‚¹çš„æ—¶å€™ï¼Œå› ä¸ºè¿™ä¸ªç»“ç‚¹ä¹‹å‰è‚¯å®šæ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œæ­¤æ—¶è®¾ç½® `minFrequent = 1`ï¼Œç›¸å½“äºå½’ä½äº†ï¼›
- å½“ `put` å’Œ `get` çš„æ—¶å€™ï¼Œéƒ½æœ‰æŠŠå½“å‰é“¾è¡¨é‡Œçš„ç»“ç‚¹ç§»åˆ°å¦ä¸€ä¸ªé“¾è¡¨ç»“ç‚¹çš„æ“ä½œã€‚å¦‚æœç§»é™¤çš„é‚£ä¸ªé“¾è¡¨æ°å¥½æ˜¯è®¿é—®æ¬¡æ•°æœ€å°é“¾è¡¨ï¼Œå¹¶ä¸”ç§»é™¤ä»¥åé“¾è¡¨çš„ç»“ç‚¹ä¸ªæ•°ä¸º `0`ï¼Œ`minFrequent` éœ€è¦åŠ  1 ã€‚



Java

```Java
import java.util.HashMap;
import java.util.Map;

public class LFUCache {

    /**
     * key å°±æ˜¯é¢˜ç›®ä¸­çš„ key
     * value æ˜¯ç»“ç‚¹ç±»
     */
    private Map map;

    /**
     * è®¿é—®æ¬¡æ•°å“ˆå¸Œè¡¨ï¼Œä½¿ç”¨ ListNode[] ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡è¦å ç”¨å¾ˆå¤šç©ºé—´
     */
    private Map frequentMap;

    /**
     * å¤–éƒ¨ä¼ å…¥çš„å®¹é‡å¤§å°
     */
    private Integer capacity;

    /**
     * å…¨å±€æœ€é«˜è®¿é—®æ¬¡æ•°ï¼Œåˆ é™¤æœ€å°‘ä½¿ç”¨è®¿é—®æ¬¡æ•°çš„ç»“ç‚¹æ—¶ä¼šç”¨åˆ°
     */
    private Integer minFrequent = 1;


    public LFUCache(int capacity) {
        map = new HashMap<>(capacity);
        frequentMap = new HashMap<>();
        this.capacity = capacity;
    }

    /**
     * get ä¸€æ¬¡æ“ä½œï¼Œè®¿é—®æ¬¡æ•°å°±å¢åŠ  1ï¼›
     * ä»åŸæ¥çš„é“¾è¡¨è°ƒæ•´åˆ°è®¿é—®æ¬¡æ•°æ›´é«˜çš„é“¾è¡¨çš„è¡¨å¤´
     *
     * @param key
     * @return
     */
    public int get(int key) {
        // æµ‹è¯•æµ‹å‡ºæ¥çš„ï¼Œcapacity å¯èƒ½ä¼  0
        if (capacity == 0) {
            return -1;
        }

        if (map.containsKey(key)) {
            // è·å¾—ç»“ç‚¹ç±»
            ListNode listNode = removeListNode(key);

            // æŒ‚æ¥åˆ°æ–°çš„è®¿é—®æ¬¡æ•°çš„åŒå‘é“¾è¡¨çš„å¤´éƒ¨
            int frequent = listNode.frequent;
            addListNode2Head(frequent, listNode);
            return listNode.value;
        } else {
            return -1;
        }
    }

    /**
     * @param key
     * @param value
     */
    public void put(int key, int value) {
        if (capacity == 0) {
            return;
        }

        // å¦‚æœ key å­˜åœ¨ï¼Œå°±æ›´æ–°è®¿é—®æ¬¡æ•° + 1ï¼Œæ›´æ–°å€¼
        if (map.containsKey(key)) {
            ListNode listNode = removeListNode(key);

            // æ›´æ–° value
            listNode.value = value;
            int frequent = listNode.frequent;
            addListNode2Head(frequent, listNode);
            return;
        }

        // å¦‚æœ key ä¸å­˜åœ¨
        // 1ã€å¦‚æœæ»¡äº†ï¼Œå…ˆåˆ é™¤è®¿é—®æ¬¡æ•°æœ€å°çš„çš„æœ«å°¾ç»“ç‚¹ï¼Œå†åˆ é™¤ map é‡Œå¯¹åº”çš„ key
        if (map.size() == capacity) {
            // 1ã€ä»åŒé“¾è¡¨é‡Œåˆ é™¤ç»“ç‚¹
            DoubleLinkedList doubleLinkedList = frequentMap.get(minFrequent);
            ListNode removeNode = doubleLinkedList.removeTail();

            // 2ã€åˆ é™¤ map é‡Œå¯¹åº”çš„ key
            map.remove(removeNode.key);
        }

        // 2ã€å†åˆ›å»ºæ–°ç»“ç‚¹æ”¾åœ¨è®¿é—®æ¬¡æ•°ä¸º 1 çš„åŒå‘é“¾è¡¨çš„å‰é¢
        ListNode newListNode = new ListNode(key, value);
        addListNode2Head(1, newListNode);
        map.put(key, newListNode);

        // ã€æ³¨æ„ã€‘å› ä¸ºè¿™ä¸ªç»“ç‚¹æ˜¯åˆšåˆšåˆ›å»ºçš„ï¼Œæœ€å°‘è®¿é—®æ¬¡æ•°ä¸€å®šä¸º 1
        this.minFrequent = 1;
    }

    // ä»¥ä¸‹éƒ¨åˆ†ä¸»è¦æ˜¯ç»“ç‚¹ç±»å’ŒåŒå‘é“¾è¡¨çš„æ“ä½œ

    /**
     * ç»“ç‚¹ç±»ï¼Œæ˜¯åŒå‘é“¾è¡¨çš„ç»„æˆéƒ¨åˆ†
     */
    private class ListNode {
        private int key;
        private int value;
        private int frequent = 1;
        private ListNode pre;
        private ListNode next;

        public ListNode() {
        }

        public ListNode(int key, int value) {
            this.key = key;
            this.value = value;
        }
    }

    /**
     * åŒå‘é“¾è¡¨
     */
    private class DoubleLinkedList {
        /**
         * è™šæ‹Ÿå¤´ç»“ç‚¹ï¼Œå®ƒæ— å‰é©±ç»“ç‚¹
         */
        private ListNode dummyHead;
        /**
         * è™šæ‹Ÿå°¾ç»“ç‚¹ï¼Œå®ƒæ— åç»§ç»“ç‚¹
         */
        private ListNode dummyTail;

        /**
         * å½“å‰åŒå‘é“¾è¡¨çš„æœ‰æ•ˆç»“ç‚¹æ•°
         */
        private int count;

        public DoubleLinkedList() {
            // è™šæ‹Ÿå¤´å°¾ç»“ç‚¹èµ‹å€¼å¤šå°‘æ— æ‰€è°“
            this.dummyHead = new ListNode(-1, -1);
            this.dummyTail = new ListNode(-2, -2);

            dummyHead.next = dummyTail;
            dummyTail.pre = dummyHead;
            count = 0;
        }

        /**
         * æŠŠä¸€ä¸ªç»“ç‚¹ç±»æ·»åŠ åˆ°åŒå‘é“¾è¡¨çš„å¼€å¤´ï¼ˆå¤´éƒ¨æ˜¯æœ€æ–°ä½¿ç”¨æ•°æ®ï¼‰
         *
         * @param addNode
         */
        public void addNode2Head(ListNode addNode) {
            ListNode oldHead = dummyHead.next;
            // ä¸¤ä¾§ç»“ç‚¹æŒ‡å‘å®ƒ
            dummyHead.next = addNode;
            oldHead.pre = addNode;
            // å®ƒçš„å‰é©±å’Œåç»§æŒ‡å‘ä¸¤ä¾§ç»“ç‚¹
            addNode.pre = dummyHead;
            addNode.next = oldHead;
            count++;
        }

        /**
         * æŠŠåŒå‘é“¾è¡¨çš„æœ«å°¾ç»“ç‚¹åˆ é™¤ï¼ˆå°¾éƒ¨æ˜¯æœ€æ—§çš„æ•°æ®ï¼Œåœ¨ç¼“å­˜æ»¡çš„æ—¶å€™æ·˜æ±°ï¼‰
         *
         * @return
         */
        public ListNode removeTail() {
            ListNode oldTail = dummyTail.pre;
            ListNode newTail = oldTail.pre;

            // ä¸¤ä¾§ç»“ç‚¹å»ºç«‹è¿æ¥
            newTail.next = dummyTail;
            dummyTail.pre = newTail;

            // å®ƒçš„ä¸¤ä¸ªå±æ€§åˆ‡æ–­è¿æ¥
            oldTail.pre = null;
            oldTail.next = null;

            // é‡è¦ï¼šåˆ é™¤ä¸€ä¸ªç»“ç‚¹ï¼Œå½“å‰åŒå‘é“¾è¡¨çš„ç»“ç‚¹ä¸ªæ•°å°‘ 1
            count--;
            return oldTail;
        }
    }


    /**
     * å°†åŸæ¥è®¿é—®æ¬¡æ•°çš„ç»“ç‚¹ï¼Œä»åŒå‘é“¾è¡¨é‡Œè„±ç¦»å‡ºæ¥
     *
     * @param key
     * @return
     */
    private ListNode removeListNode(int key) {
        // è·å¾—ç»“ç‚¹ç±»
        ListNode deleteNode = map.get(key);

        ListNode preNode = deleteNode.pre;
        ListNode nextNode = deleteNode.next;
        // ä¸¤ä¾§ç»“ç‚¹å»ºç«‹è¿æ¥
        preNode.next = nextNode;
        nextNode.pre = preNode;
        // åˆ é™¤å»åŸæ¥ä¸¤ä¾§ç»“ç‚¹çš„è¿æ¥
        deleteNode.pre = null;
        deleteNode.next = null;

        // ç»´æŠ¤åŒé“¾è¡¨ç»“ç‚¹æ•°
        frequentMap.get(deleteNode.frequent).count--;

        // ã€æ³¨æ„ã€‘ç»´æŠ¤ minFrequent
        // å¦‚æœå½“å‰ç»“ç‚¹æ­£å¥½åœ¨æœ€å°è®¿é—®æ¬¡æ•°çš„é“¾è¡¨ä¸Šï¼Œå¹¶ä¸”ç§»é™¤ä»¥åç»“ç‚¹æ•°ä¸º 0ï¼Œæœ€å°è®¿é—®æ¬¡æ•°éœ€è¦åŠ  1
        if (deleteNode.frequent == minFrequent && frequentMap.get(deleteNode.frequent).count == 0) {
            minFrequent++;
        }

        // è®¿é—®æ¬¡æ•°åŠ  1
        deleteNode.frequent++;
        return deleteNode;
    }


    /**
     * æŠŠç»“ç‚¹æ”¾åœ¨å¯¹åº”è®¿é—®æ¬¡æ•°çš„åŒå‘é“¾è¡¨çš„å¤´éƒ¨
     *
     * @param frequent
     * @param addNode
     */
    private void addListNode2Head(int frequent, ListNode addNode) {
        DoubleLinkedList doubleLinkedList;

        // å¦‚æœä¸å­˜åœ¨ï¼Œå°±åˆå§‹åŒ–
        if (frequentMap.containsKey(frequent)) {
            doubleLinkedList = frequentMap.get(frequent);
        } else {
            doubleLinkedList = new DoubleLinkedList();
        }

        // æ·»åŠ åˆ° DoubleLinkedList çš„è¡¨å¤´
        doubleLinkedList.addNode2Head(addNode);
        frequentMap.put(frequent, doubleLinkedList);
    }

    public static void main(String[] args) {
        LFUCache cache = new LFUCache(2);

        cache.put(1, 1);
        cache.put(2, 2);

        System.out.println(cache.map.keySet());

        int res1 = cache.get(1);
        System.out.println(res1);

        cache.put(3, 3);
        System.out.println(cache.map.keySet());

        int res2 = cache.get(2);
        System.out.println(res2);

        int res3 = cache.get(3);
        System.out.println(res3);

        cache.put(4, 4);
        System.out.println(cache.map.keySet());

        int res4 = cache.get(1);
        System.out.println(res4);

        int res5 = cache.get(3);
        System.out.println(res5);

        int res6 = cache.get(4);
        System.out.println(res6);
    }
}
```

ï¼ˆæœ¬èŠ‚å®Œï¼‰