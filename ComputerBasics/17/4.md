## ã€ŒåŠ›æ‰£ã€ç¬¬ 207 é¢˜ï¼šè¯¾ç¨‹è¡¨

- é“¾æ¥ï¼š[207. è¯¾ç¨‹è¡¨](https://leetcode-cn.com/problems/course-schedule/)ï¼›
- é¢˜è§£åœ°å€ï¼š[æ‹“æ‰‘æ’åº + æ·±åº¦ä¼˜å…ˆéå†ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰](https://leetcode-cn.com/problems/course-schedule/solution/tuo-bu-pai-xu-by-liweiwei1419/)ã€‚

> ç°åœ¨ä½ æ€»å…±æœ‰ n é—¨è¯¾éœ€è¦é€‰ï¼Œè®°ä¸º 0 åˆ° n-1ã€‚
>
> åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚ ä¾‹å¦‚ï¼Œæƒ³è¦å­¦ä¹ è¯¾ç¨‹ 0 ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 1 ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¹é…æ¥è¡¨ç¤ºä»–ä»¬: [0,1]
>
> ç»™å®šè¯¾ç¨‹æ€»é‡ä»¥åŠå®ƒä»¬çš„å…ˆå†³æ¡ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿ
>
> ç¤ºä¾‹ 1:
>
> è¾“å…¥: 2, [[1,0]]
> è¾“å‡º: true
> è§£é‡Š: æ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ 0ã€‚æ‰€ä»¥è¿™æ˜¯å¯èƒ½çš„ã€‚
> ç¤ºä¾‹ 2:
>
> è¾“å…¥: 2, [[1,0],[0,1]]
> è¾“å‡º: false
> è§£é‡Š: æ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0ï¼›å¹¶ä¸”å­¦ä¹ è¯¾ç¨‹ 0 ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ 1ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚
> è¯´æ˜:
>
> è¾“å…¥çš„å…ˆå†³æ¡ä»¶æ˜¯ç”±è¾¹ç¼˜åˆ—è¡¨è¡¨ç¤ºçš„å›¾å½¢ï¼Œè€Œä¸æ˜¯é‚»æ¥çŸ©é˜µã€‚è¯¦æƒ…è¯·å‚è§å›¾çš„è¡¨ç¤ºæ³•ã€‚
> ä½ å¯ä»¥å‡å®šè¾“å…¥çš„å…ˆå†³æ¡ä»¶ä¸­æ²¡æœ‰é‡å¤çš„è¾¹ã€‚
> æç¤º:
>
> è¿™ä¸ªé—®é¢˜ç›¸å½“äºæŸ¥æ‰¾ä¸€ä¸ªå¾ªç¯æ˜¯å¦å­˜åœ¨äºæœ‰å‘å›¾ä¸­ã€‚å¦‚æœå­˜åœ¨å¾ªç¯ï¼Œåˆ™ä¸å­˜åœ¨æ‹“æ‰‘æ’åºï¼Œå› æ­¤ä¸å¯èƒ½é€‰å–æ‰€æœ‰è¯¾ç¨‹è¿›è¡Œå­¦ä¹ ã€‚
> é€šè¿‡ DFS è¿›è¡Œæ‹“æ‰‘æ’åº - ä¸€ä¸ªå…³äºCourseraçš„ç²¾å½©è§†é¢‘æ•™ç¨‹ï¼ˆ21åˆ†é’Ÿï¼‰ï¼Œä»‹ç»æ‹“æ‰‘æ’åºçš„åŸºæœ¬æ¦‚å¿µã€‚
> æ‹“æ‰‘æ’åºä¹Ÿå¯ä»¥é€šè¿‡ BFS å®Œæˆã€‚

## æ‹“æ‰‘æ’åº + æ·±åº¦ä¼˜å…ˆéå†ï¼ˆPython ä»£ç ã€Java ä»£ç ï¼‰

è¿™é“é¢˜çš„åšæ³•åŒæ ·é€‚ç”¨äºç¬¬ 210 é¢˜ã€‚

### æ–¹æ³•ä¸€ï¼šæ‹“æ‰‘æ’åºï¼ˆKahn ç®—æ³•ï¼‰



![0210.gif](https://pic.leetcode-cn.com/ca22fa351d5278e95c4c8c94aba6da42ae45d465ff3e8e82149777274293e194-0210.gif)

**0210.gif**



æ‹“æ‰‘æ’åºå®é™…ä¸Šåº”ç”¨çš„æ˜¯**è´ªå¿ƒç®—æ³•**ã€‚è´ªå¿ƒç®—æ³•ç®€è€Œè¨€ä¹‹ï¼šæ¯ä¸€æ­¥æœ€ä¼˜ï¼Œå…¨å±€å°±æœ€ä¼˜ã€‚

å…·ä½“åˆ°æ‹“æ‰‘æ’åºï¼Œæ¯ä¸€æ¬¡éƒ½è¾“å‡ºå…¥åº¦ä¸º 00 çš„ç»“ç‚¹ï¼Œå¹¶ç§»é™¤å®ƒã€ä¿®æ”¹å®ƒæŒ‡å‘çš„ç»“ç‚¹çš„å…¥åº¦ï¼Œä¾æ¬¡å¾—åˆ°çš„ç»“ç‚¹åºåˆ—å°±æ˜¯æ‹“æ‰‘æ’åºçš„ç»“ç‚¹åºåˆ—ã€‚å¦‚æœå›¾ä¸­è¿˜æœ‰ç»“ç‚¹æ²¡æœ‰è¢«ç§»é™¤ï¼Œåˆ™è¯´æ˜â€œä¸èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ â€ã€‚

æ‹“æ‰‘æ’åºä¿è¯äº†æ¯ä¸ªæ´»åŠ¨ï¼ˆåœ¨è¿™é¢˜ä¸­æ˜¯â€œè¯¾ç¨‹â€ï¼‰çš„æ‰€æœ‰å‰é©±æ´»åŠ¨éƒ½æ’åœ¨è¯¥æ´»åŠ¨çš„å‰é¢ï¼Œå¹¶ä¸”å¯ä»¥å®Œæˆæ‰€æœ‰æ´»åŠ¨ã€‚æ‹“æ‰‘æ’åºçš„ç»“æœä¸å”¯ä¸€ã€‚æ‹“æ‰‘æ’åºè¿˜å¯ä»¥ç”¨äºæ£€æµ‹ä¸€ä¸ªæœ‰å‘å›¾æ˜¯å¦æœ‰ç¯ã€‚ç›¸å…³çš„æ¦‚å¿µè¿˜æœ‰ AOV ç½‘ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚

**ç®—æ³•æµç¨‹**ï¼š

1ã€åœ¨å¼€å§‹æ’åºå‰ï¼Œæ‰«æå¯¹åº”çš„å­˜å‚¨ç©ºé—´ï¼ˆä½¿ç”¨é‚»æ¥è¡¨ï¼‰ï¼Œå°†å…¥åº¦ä¸º 00 çš„ç»“ç‚¹æ”¾å…¥é˜Ÿåˆ—ã€‚

2ã€åªè¦é˜Ÿåˆ—éç©ºï¼Œå°±ä»é˜Ÿé¦–å–å‡ºå…¥åº¦ä¸º 00 çš„ç»“ç‚¹ï¼Œå°†è¿™ä¸ªç»“ç‚¹è¾“å‡ºåˆ°ç»“æœé›†ä¸­ï¼Œå¹¶ä¸”å°†è¿™ä¸ªç»“ç‚¹çš„æ‰€æœ‰é‚»æ¥ç»“ç‚¹ï¼ˆå®ƒæŒ‡å‘çš„ç»“ç‚¹ï¼‰çš„å…¥åº¦å‡ 11ï¼Œåœ¨å‡ 11 ä»¥åï¼Œå¦‚æœè¿™ä¸ªè¢«å‡ 11 çš„ç»“ç‚¹çš„å…¥åº¦ä¸º 00 ï¼Œå°±ç»§ç»­å…¥é˜Ÿã€‚

3ã€å½“é˜Ÿåˆ—ä¸ºç©ºçš„æ—¶å€™ï¼Œæ£€æŸ¥ç»“æœé›†ä¸­çš„é¡¶ç‚¹ä¸ªæ•°æ˜¯å¦å’Œè¯¾ç¨‹æ•°ç›¸ç­‰å³å¯ã€‚

æ€è€ƒè¿™é‡Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨é˜Ÿåˆ—ï¼Ÿï¼ˆé©¬ä¸Šå°±ä¼šç»™å‡ºç­”æ¡ˆã€‚ï¼‰

åœ¨ä»£ç å…·ä½“å®ç°çš„æ—¶å€™ï¼Œé™¤äº†ä¿å­˜å…¥åº¦ä¸º 0 çš„é˜Ÿåˆ—ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸¤ä¸ªè¾…åŠ©çš„æ•°æ®ç»“æ„ï¼š

1ã€é‚»æ¥è¡¨ï¼šé€šè¿‡ç»“ç‚¹çš„ç´¢å¼•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°è¿™ä¸ªç»“ç‚¹çš„åç»§ç»“ç‚¹ï¼›

2ã€å…¥åº¦æ•°ç»„ï¼šé€šè¿‡ç»“ç‚¹çš„ç´¢å¼•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°æŒ‡å‘è¿™ä¸ªç»“ç‚¹çš„ç»“ç‚¹ä¸ªæ•°ã€‚

è¿™ä¸ªä¸¤ä¸ªæ•°æ®ç»“æ„åœ¨éå†é¢˜ç›®ç»™å‡ºçš„é‚»è¾¹ä»¥åå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¾—åˆ°ã€‚

**å‚è€ƒä»£ç  1**ï¼š

Python ä»£ç ï¼š

```Python
class Solution(object):

    # æ€æƒ³ï¼šè¯¥æ–¹æ³•çš„æ¯ä¸€æ­¥æ€»æ˜¯è¾“å‡ºå½“å‰æ— å‰è¶‹ï¼ˆå³å…¥åº¦ä¸ºé›¶ï¼‰çš„é¡¶ç‚¹

    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        """
        :type numCourses: int è¯¾ç¨‹é—¨æ•°
        :type prerequisites: List[List[int]] è¯¾ç¨‹ä¸è¯¾ç¨‹ä¹‹é—´çš„å…³ç³»
        :rtype: bool
        """
        # è¯¾ç¨‹çš„é•¿åº¦
        clen = len(prerequisites)
        if clen == 0:
            # æ²¡æœ‰è¯¾ç¨‹ï¼Œå½“ç„¶å¯ä»¥å®Œæˆè¯¾ç¨‹çš„å­¦ä¹ 
            return True

        # æ­¥éª¤1ï¼šç»Ÿè®¡æ¯ä¸ªé¡¶ç‚¹çš„å…¥åº¦
        # å…¥åº¦æ•°ç»„ï¼Œè®°å½•äº†æŒ‡å‘å®ƒçš„ç»“ç‚¹çš„ä¸ªæ•°ï¼Œä¸€å¼€å§‹å…¨éƒ¨ä¸º 0
        in_degrees = [0 for _ in range(numCourses)]
        # é‚»æ¥è¡¨ï¼Œä½¿ç”¨æ•£åˆ—è¡¨æ˜¯ä¸ºäº†å»é‡
        adj = [set() for _ in range(numCourses)]

        # æƒ³è¦å­¦ä¹ è¯¾ç¨‹ 0 ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 1 ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¹é…æ¥è¡¨ç¤ºä»–ä»¬: [0,1]
        # [0, 1] è¡¨ç¤º 1 åœ¨å…ˆï¼Œ0 åœ¨å
        # æ³¨æ„ï¼šé‚»æ¥è¡¨å­˜æ”¾çš„æ˜¯åç»§ successor ç»“ç‚¹çš„é›†åˆ
        for second, first in prerequisites:
            in_degrees[second] += 1
            adj[first].add(second)

        # æ­¥éª¤2ï¼šæ‹“æ‰‘æ’åºå¼€å§‹ä¹‹å‰ï¼Œå…ˆæŠŠæ‰€æœ‰å…¥åº¦ä¸º 0 çš„ç»“ç‚¹åŠ å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­
        # é¦–å…ˆéå†ä¸€éï¼ŒæŠŠæ‰€æœ‰å…¥åº¦ä¸º 0 çš„ç»“ç‚¹éƒ½åŠ å…¥é˜Ÿåˆ—
        queue = []
        for i in range(numCourses):
            if in_degrees[i] == 0:
                queue.append(i)

        counter = 0
        while queue:
            top = queue.pop(0)
            counter += 1
            # æ­¥éª¤3ï¼šæŠŠè¿™ä¸ªç»“ç‚¹çš„æ‰€æœ‰åç»§ç»“ç‚¹çš„å…¥åº¦å‡å» 1ï¼Œå¦‚æœå‘ç°å…¥åº¦ä¸º 0 ï¼Œå°±é©¬ä¸Šæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­
            for successor in adj[top]:
                in_degrees[successor] -= 1
                if in_degrees[successor] == 0:
                    queue.append(successor)

        return counter == numCourses
```

Java ä»£ç ï¼š

```Java
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

/**
 * è¯¥æ–¹æ³•è¿˜å­˜å‚¨äº†æ‹“æ‰‘æ’åºçš„ç»“æœï¼Œä¸ªäººè§‰å¾—è¿™ç§å†™æ³•å¾ˆå¥½ç†è§£ï¼Œæ ¹æ®è¿™ä¸ªå†™æ³•å¯ä»¥é©¬ä¸Šå†™å‡º LeetCode ç¬¬ 210 é¢˜ è¯¾ç¨‹è¡¨ II
 *
 * @author liwei
 * @date 18/6/24 ä¸‹åˆ12:20
 */
public class Solution {

    /**
     * @param numCourses
     * @param prerequisites
     * @return
     */
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        if (numCourses <= 0) {
            return false;
        }
        int plen = prerequisites.length;
        if (plen == 0) {
            return true;
        }
        int[] inDegree = new int[numCourses];
        for (int[] p : prerequisites) {
            inDegree[p[0]]++;
        }
        LinkedList queue = new LinkedList<>();
        // é¦–å…ˆåŠ å…¥å…¥åº¦ä¸º 0 çš„ç»“ç‚¹
        for (int i = 0; i < numCourses; i++) {
            if (inDegree[i] == 0) {
                queue.addLast(i);
            }
        }
        // æ‹“æ‰‘æ’åºçš„ç»“æœ
        List res = new ArrayList<>();
        while (!queue.isEmpty()) {
            Integer num = queue.removeFirst();
            res.add(num);
            // æŠŠé‚»è¾¹å…¨éƒ¨éå†ä¸€ä¸‹
            for (int[] p : prerequisites) {
                if (p[1] == num) {
                    inDegree[p[0]]--;
                    if (inDegree[p[0]] == 0) {
                        queue.addLast(p[0]);
                    }
                }
            }
        }
        // System.out.println("æ‹“æ‰‘æ’åºç»“æœï¼š");
        // System.out.println(res);
        return res.size() == numCourses;
    }
}
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ¸+ğ‘‰)O(E+V)ã€‚è¿™é‡Œ ğ¸E è¡¨ç¤ºé‚»è¾¹çš„æ¡æ•°ï¼Œğ‘‰V è¡¨ç¤ºç»“ç‚¹çš„ä¸ªæ•°ã€‚åˆå§‹åŒ–å…¥åº¦ä¸º 00 çš„é›†åˆéœ€è¦éå†æ•´å¼ å›¾ï¼Œå…·ä½“åšæ³•æ˜¯æ£€æŸ¥æ¯ä¸ªç»“ç‚¹å’Œæ¯æ¡è¾¹ï¼Œå› æ­¤å¤æ‚åº¦ä¸º ğ‘‚(ğ¸+ğ‘‰)O(E+V)ï¼Œç„¶åå¯¹è¯¥é›†åˆè¿›è¡Œæ“ä½œï¼Œåˆéœ€è¦éå†æ•´å¼ å›¾ä¸­çš„æ¯ä¸ªç»“ç‚¹å’Œæ¯æ¡è¾¹ï¼Œå¤æ‚åº¦ä¹Ÿä¸º ğ‘‚(ğ¸+ğ‘‰)O(E+V)ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘‰)O(V)ï¼šå…¥åº¦æ•°ç»„ã€é‚»æ¥è¡¨çš„é•¿åº¦éƒ½æ˜¯ç»“ç‚¹çš„ä¸ªæ•° ğ‘‰Vï¼Œå³ä½¿ä½¿ç”¨é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—æœ€é•¿çš„æ—¶å€™ä¹Ÿä¸ä¼šè¶…è¿‡ ğ‘‰Vï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦æ˜¯ ğ‘‚(ğ‘‰)O(V)ã€‚

è¿™é‡Œå›ç­”ä¸€ä¸‹ä½¿ç”¨é˜Ÿåˆ—çš„é—®é¢˜ï¼Œå¦‚æœä¸ä½¿ç”¨é˜Ÿåˆ—ï¼Œè¦æƒ³å¾—åˆ°å½“å‰å…¥åº¦ä¸º 00 çš„ç»“ç‚¹ï¼Œå°±å¾—éå†ä¸€éå…¥åº¦æ•°ç»„ã€‚ä½¿ç”¨é˜Ÿåˆ—å³ç”¨ç©ºé—´æ¢æ—¶é—´ã€‚

### æ–¹æ³•äºŒï¼šæ·±åº¦ä¼˜å…ˆéå†

è¿™é‡Œè¦ä½¿ç”¨é€†é‚»æ¥è¡¨ã€‚å…¶å®å°±æ˜¯æ£€æµ‹è¿™ä¸ªæœ‰å‘å›¾ä¸­æœ‰æ²¡æœ‰ç¯ï¼Œåªè¦å­˜åœ¨ç¯ï¼Œè¿™äº›è¯¾ç¨‹å°±ä¸èƒ½æŒ‰è¦æ±‚å­¦å®Œã€‚

å…·ä½“æ–¹æ³•æ˜¯ï¼š

ç¬¬ 1 æ­¥ï¼šæ„å»ºé€†é‚»æ¥è¡¨ï¼›

ç¬¬ 2 æ­¥ï¼šé€’å½’å¤„ç†æ¯ä¸€ä¸ªè¿˜æ²¡æœ‰è¢«è®¿é—®çš„ç»“ç‚¹ï¼Œå…·ä½“åšæ³•å¾ˆç®€å•ï¼šå¯¹äºä¸€ä¸ªç»“ç‚¹æ¥è¯´ï¼Œ**å…ˆè¾“å‡ºæŒ‡å‘å®ƒçš„æ‰€æœ‰é¡¶ç‚¹ï¼Œå†è¾“å‡ºè‡ªå·±**ã€‚

ç¬¬ 3 æ­¥ï¼šå¦‚æœè¿™ä¸ªé¡¶ç‚¹è¿˜æ²¡æœ‰è¢«éå†è¿‡ï¼Œå°±é€’å½’éå†å®ƒï¼ŒæŠŠæ‰€æœ‰æŒ‡å‘å®ƒçš„ç»“ç‚¹éƒ½è¾“å‡ºäº†ï¼Œå†è¾“å‡ºè‡ªå·±ã€‚æ³¨æ„ï¼š**å½“è®¿é—®ä¸€ä¸ªç»“ç‚¹çš„æ—¶å€™ï¼Œåº”å½“å…ˆé€’å½’è®¿é—®å®ƒçš„å‰é©±ç»“ç‚¹ï¼Œç›´è‡³å‰é©±ç»“ç‚¹æ²¡æœ‰å‰é©±ç»“ç‚¹ä¸ºæ­¢**ã€‚

**å‚è€ƒä»£ç  2**ï¼š

Java ä»£ç ï¼š

```Python
class Solution(object):

    # è¿™é‡Œä½¿ç”¨é€†é‚»æ¥è¡¨

    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        """
        :type numCourses: int è¯¾ç¨‹é—¨æ•°
        :type prerequisites: List[List[int]] è¯¾ç¨‹ä¸è¯¾ç¨‹ä¹‹é—´çš„å…³ç³»
        :rtype: bool
        """
        # è¯¾ç¨‹çš„é•¿åº¦
        clen = len(prerequisites)
        if clen == 0:
            # æ²¡æœ‰è¯¾ç¨‹ï¼Œå½“ç„¶å¯ä»¥å®Œæˆè¯¾ç¨‹çš„å­¦ä¹ 
            return True
        # æ·±åº¦ä¼˜å…ˆéå†ï¼Œåˆ¤æ–­ç»“ç‚¹æ˜¯å¦è®¿é—®è¿‡
        # è¿™é‡Œè¦è®¾ç½® 3 ä¸ªçŠ¶æ€
        # 0 å°±å¯¹åº” False ï¼Œè¡¨ç¤ºç»“ç‚¹æ²¡æœ‰è®¿é—®è¿‡
        # 1 å°±å¯¹åº” True ï¼Œè¡¨ç¤ºç»“ç‚¹å·²ç»è®¿é—®è¿‡ï¼Œåœ¨æ·±åº¦ä¼˜å…ˆéå†ç»“æŸä»¥åæ‰ç½®ä¸º 1
        # 2 è¡¨ç¤ºå½“å‰æ­£åœ¨éå†çš„ç»“ç‚¹ï¼Œå¦‚æœåœ¨æ·±åº¦ä¼˜å…ˆéå†çš„è¿‡ç¨‹ä¸­ï¼Œ
        # æœ‰é‡åˆ°çŠ¶æ€ä¸º 2 çš„ç»“ç‚¹ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªå›¾ä¸­å­˜åœ¨ç¯
        visited = [0 for _ in range(numCourses)]

        # é€†é‚»æ¥è¡¨ï¼Œå­˜çš„æ˜¯æ¯ä¸ªç»“ç‚¹çš„å‰é©±ç»“ç‚¹çš„é›†åˆ
        # æƒ³è¦å­¦ä¹ è¯¾ç¨‹ 0 ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 1 ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¹é…æ¥è¡¨ç¤ºä»–ä»¬: [0,1]
        # 1 åœ¨å‰ï¼Œ0 åœ¨å
        inverse_adj = [set() for _ in range(numCourses)]
        for second, first in prerequisites:
            inverse_adj[second].add(first)

        for i in range(numCourses):
            # åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°æœ‰ç¯ï¼Œå°±é€€å‡º
            if self.__dfs(i, inverse_adj, visited):
                return False
        return True

    def __dfs(self, vertex, inverse_adj, visited):
        """
        æ³¨æ„ï¼šè¿™ä¸ªé€’å½’æ–¹æ³•çš„è¿”å›å€¼æ˜¯è¿”å›æ˜¯å¦æœ‰ç¯
        :param vertex: ç»“ç‚¹çš„ç´¢å¼•
        :param inverse_adj: é€†é‚»æ¥è¡¨ï¼Œè®°å½•çš„æ˜¯å½“å‰ç»“ç‚¹çš„å‰é©±ç»“ç‚¹çš„é›†åˆ
        :param visited: è®°å½•äº†ç»“ç‚¹æ˜¯å¦è¢«è®¿é—®è¿‡ï¼Œ2 è¡¨ç¤ºå½“å‰æ­£åœ¨ DFS è¿™ä¸ªç»“ç‚¹
        :return: æ˜¯å¦æœ‰ç¯ï¼Œè¿”å› True è¡¨ç¤ºè¿™ä¸ªæœ‰å‘å›¾æœ‰ç¯
        """
        # 2 è¡¨ç¤ºè¿™ä¸ªç»“ç‚¹æ­£åœ¨è®¿é—®
        if visited[vertex] == 2:
            # è¡¨ç¤ºé‡åˆ°ç¯
            return True
        if visited[vertex] == 1:
            return False

        visited[vertex] = 2
        for precursor in inverse_adj[vertex]:
            # å¦‚æœæœ‰ç¯ï¼Œå°±è¿”å› True è¡¨ç¤ºæœ‰ç¯
            if self.__dfs(precursor, inverse_adj, visited):
                return True

        # 1 è¡¨ç¤ºè®¿é—®ç»“æŸ
        # å…ˆæŠŠ vertex è¿™ä¸ªç»“ç‚¹çš„æ‰€æœ‰å‰é©±ç»“ç‚¹éƒ½è¾“å‡ºä¹‹åï¼Œå†è¾“å‡ºè‡ªå·±
        visited[vertex] = 1
        return False
```

Python ä»£ç ï¼š

```Java
import java.util.HashSet;

/**
 * æ ¹æ® Solution5 åšçš„ä¿®æ”¹
 *
 * @author liwei
 * @date 18/6/24 ä¸‹åˆ12:42
 */
public class Solution6 {

    /**
     * @param numCourses
     * @param prerequisites
     * @return
     */
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        if (numCourses <= 0) {
            return false;
        }
        int plen = prerequisites.length;
        if (plen == 0) {
            return true;
        }
        int[] marked = new int[numCourses];

        // åˆå§‹åŒ–æœ‰å‘å›¾ begin
        HashSet[] graph = new HashSet[numCourses];
        for (int i = 0; i < numCourses; i++) {
            graph[i] = new HashSet<>();
        }
        // åˆå§‹åŒ–æœ‰å‘å›¾ end
        // æœ‰å‘å›¾çš„ key æ˜¯å‰é©±ç»“ç‚¹ï¼Œvalue æ˜¯åç»§ç»“ç‚¹çš„é›†åˆ
        for (int[] p : prerequisites) {
            graph[p[1]].add(p[0]);
        }

        for (int i = 0; i < numCourses; i++) {
            if (dfs(i, graph, marked)) {
                // æ³¨æ„æ–¹æ³•çš„è¯­ä¹‰ï¼Œå¦‚æœå›¾ä¸­å­˜åœ¨ç¯ï¼Œè¡¨ç¤ºè¯¾ç¨‹ä»»åŠ¡ä¸èƒ½å®Œæˆï¼Œåº”è¯¥è¿”å› false
                return false;
            }
        }
        // åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ç›´ dfs éƒ½æ²¡æœ‰é‡åˆ°å·²ç»é‡å¤è®¿é—®çš„ç»“ç‚¹ï¼Œå°±è¡¨ç¤ºæœ‰å‘å›¾ä¸­æ²¡æœ‰ç¯
        // æ‰€æœ‰è¯¾ç¨‹ä»»åŠ¡å¯ä»¥å®Œæˆï¼Œåº”è¯¥è¿”å› true
        return true;
    }

    /**
     * æ³¨æ„è¿™ä¸ª dfs æ–¹æ³•çš„è¯­ä¹‰
     * @param i      å½“å‰è®¿é—®çš„è¯¾ç¨‹ç»“ç‚¹
     * @param graph
     * @param marked å¦‚æœ == 1 è¡¨ç¤ºæ­£åœ¨è®¿é—®ä¸­ï¼Œå¦‚æœ == 2 è¡¨ç¤ºå·²ç»è®¿é—®å®Œäº†
     * @return true è¡¨ç¤ºå›¾ä¸­å­˜åœ¨ç¯ï¼Œfalse è¡¨ç¤ºè®¿é—®è¿‡äº†ï¼Œä¸ç”¨å†è®¿é—®äº†
     */
    private boolean dfs(int i,
                        HashSet[] graph,
                        int[] marked) {
        // å¦‚æœè®¿é—®è¿‡äº†ï¼Œå°±ä¸ç”¨å†è®¿é—®äº†
        if (marked[i] == 1) {
            // ä»æ­£åœ¨è®¿é—®ä¸­ï¼Œåˆ°æ­£åœ¨è®¿é—®ä¸­ï¼Œè¡¨ç¤ºé‡åˆ°äº†ç¯
            return true;
        }

        if (marked[i] == 2) {
            // è¡¨ç¤ºåœ¨è®¿é—®çš„è¿‡ç¨‹ä¸­æ²¡æœ‰é‡åˆ°ç¯ï¼Œè¿™ä¸ªèŠ‚ç‚¹è®¿é—®è¿‡äº†
            return false;
        }
        // èµ°åˆ°è¿™é‡Œï¼Œæ˜¯å› ä¸ºåˆå§‹åŒ–å‘¢ï¼Œæ­¤æ—¶ marked[i] == 0
        // è¡¨ç¤ºæ­£åœ¨è®¿é—®ä¸­
        marked[i] = 1;
        // åç»§ç»“ç‚¹çš„é›†åˆ
        HashSet successorNodes = graph[i];

        for (Integer successor : successorNodes) {
            if (dfs(successor, graph, marked)) {
                // å±‚å±‚é€’å½’è¿”å› true ï¼Œè¡¨ç¤ºå›¾ä¸­å­˜åœ¨ç¯
                return true;
            }
        }
        // i çš„æ‰€æœ‰åç»§ç»“ç‚¹éƒ½è®¿é—®å®Œäº†ï¼Œéƒ½æ²¡æœ‰å­˜åœ¨ç¯ï¼Œåˆ™è¿™ä¸ªç»“ç‚¹å°±å¯ä»¥è¢«æ ‡è®°ä¸ºå·²ç»è®¿é—®ç»“æŸ
        // çŠ¶æ€è®¾ç½®ä¸º 2
        marked[i] = 2;
        // false è¡¨ç¤ºå›¾ä¸­ä¸å­˜åœ¨ç¯
        return false;
    }
}
```

**å¤æ‚åº¦åˆ†æï¼š**

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ¸+ğ‘‰)O(E+V)ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘‰)O(V)ã€‚

### LeetCode ç¬¬ 207 é¢˜ï¼šè¯¾ç¨‹è¡¨

ä¼ é€é—¨ï¼š[207. è¯¾ç¨‹è¡¨](https://leetcode-cn.com/problems/course-schedule/)ã€‚

> ç°åœ¨ä½ æ€»å…±æœ‰ *n* é—¨è¯¾éœ€è¦é€‰ï¼Œè®°ä¸º `0` åˆ° `n-1`ã€‚
>
> åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚ ä¾‹å¦‚ï¼Œæƒ³è¦å­¦ä¹ è¯¾ç¨‹ 0 ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 1 ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¹é…æ¥è¡¨ç¤ºä»–ä»¬: `[0,1]`
>
> ç»™å®šè¯¾ç¨‹æ€»é‡ä»¥åŠå®ƒä»¬çš„å…ˆå†³æ¡ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿ
>
> **ç¤ºä¾‹ 1:**
>
> ```
> è¾“å…¥: 2, [[1,0]] 
> è¾“å‡º: true
> è§£é‡Š: æ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ 0ã€‚æ‰€ä»¥è¿™æ˜¯å¯èƒ½çš„ã€‚
> ```
>
> **ç¤ºä¾‹ 2:**
>
> ```
> è¾“å…¥: 2, [[1,0],[0,1]]
> è¾“å‡º: false
> è§£é‡Š: æ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0ï¼›å¹¶ä¸”å­¦ä¹ è¯¾ç¨‹ 0 ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ 1ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚
> ```
>
> **è¯´æ˜:**
>
> 1. è¾“å…¥çš„å…ˆå†³æ¡ä»¶æ˜¯ç”±**è¾¹ç¼˜åˆ—è¡¨**è¡¨ç¤ºçš„å›¾å½¢ï¼Œè€Œä¸æ˜¯é‚»æ¥çŸ©é˜µã€‚è¯¦æƒ…è¯·å‚è§[å›¾çš„è¡¨ç¤ºæ³•](http://blog.csdn.net/woaidapaopao/article/details/51732947)ã€‚
> 2. ä½ å¯ä»¥å‡å®šè¾“å…¥çš„å…ˆå†³æ¡ä»¶ä¸­æ²¡æœ‰é‡å¤çš„è¾¹ã€‚
>
> **æç¤º:**
>
> 1. è¿™ä¸ªé—®é¢˜ç›¸å½“äºæŸ¥æ‰¾ä¸€ä¸ªå¾ªç¯æ˜¯å¦å­˜åœ¨äºæœ‰å‘å›¾ä¸­ã€‚å¦‚æœå­˜åœ¨å¾ªç¯ï¼Œåˆ™ä¸å­˜åœ¨æ‹“æ‰‘æ’åºï¼Œå› æ­¤ä¸å¯èƒ½é€‰å–æ‰€æœ‰è¯¾ç¨‹è¿›è¡Œå­¦ä¹ ã€‚
> 2. [é€šè¿‡ DFS è¿›è¡Œæ‹“æ‰‘æ’åº](https://www.coursera.org/specializations/algorithms) - ä¸€ä¸ªå…³äºCourseraçš„ç²¾å½©è§†é¢‘æ•™ç¨‹ï¼ˆ21åˆ†é’Ÿï¼‰ï¼Œä»‹ç»æ‹“æ‰‘æ’åºçš„åŸºæœ¬æ¦‚å¿µã€‚
> 3. æ‹“æ‰‘æ’åºä¹Ÿå¯ä»¥é€šè¿‡ [BFS](https://baike.baidu.com/item/å®½åº¦ä¼˜å…ˆæœç´¢/5224802?fr=aladdin&fromid=2148012&fromtitle=å¹¿åº¦ä¼˜å…ˆæœç´¢) å®Œæˆã€‚

#### æ–¹æ³•ä¸€ï¼šæ‹“æ‰‘æ’åºï¼ˆKahn ç®—æ³•ï¼‰

æ‹“æ‰‘æ’åºå®é™…ä¸Šåº”ç”¨çš„æ˜¯è´ªå¿ƒç®—æ³•ï¼Œè´ªå¿ƒç®—æ³•ç®€è€Œè¨€ä¹‹ï¼šæ¯ä¸€æ­¥æœ€ä¼˜ï¼Œå…¨å±€å°±æœ€ä¼˜ï¼‰ã€‚å…·ä½“åˆ°æ‹“æ‰‘æ’åºï¼Œæ¯ä¸€æ¬¡éƒ½è¾“å‡ºå…¥åº¦ä¸º 00 çš„ç»“ç‚¹ï¼Œå¹¶ç§»é™¤å®ƒã€ä¿®æ”¹å®ƒæŒ‡å‘çš„ç»“ç‚¹çš„å…¥åº¦ï¼Œä¾æ¬¡å¾—åˆ°çš„ç»“ç‚¹åºåˆ—å°±æ˜¯æ‹“æ‰‘æ’åºçš„ç»“ç‚¹åºåˆ—ã€‚å¦‚æœå›¾ä¸­è¿˜æœ‰ç»“ç‚¹æ²¡æœ‰è¢«ç§»é™¤ï¼Œåˆ™è¯´æ˜â€œä¸èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ â€ã€‚

æ‹“æ‰‘æ’åºä¿è¯äº†æ¯ä¸ªæ´»åŠ¨ï¼ˆåœ¨è¿™é¢˜ä¸­æ˜¯â€œè¯¾ç¨‹â€ï¼‰çš„æ‰€æœ‰å‰é©±æ´»åŠ¨éƒ½æ’åœ¨è¯¥æ´»åŠ¨çš„å‰é¢ï¼Œå¹¶ä¸”å¯ä»¥å®Œæˆæ‰€æœ‰æ´»åŠ¨ã€‚æ‹“æ‰‘æ’åºçš„ç»“æœä¸å”¯ä¸€ã€‚æ‹“æ‰‘æ’åºè¿˜å¯ä»¥ç”¨äºæ£€æµ‹ä¸€ä¸ªæœ‰å‘å›¾æ˜¯å¦æœ‰ç¯ã€‚ç›¸å…³çš„æ¦‚å¿µè¿˜æœ‰ AOV ç½‘ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚

å…·ä½“åšå¦‚ä¸‹ï¼š

1ã€åœ¨å¼€å§‹æ’åºå‰ï¼Œæ‰«æå¯¹åº”çš„å­˜å‚¨ç©ºé—´ï¼ˆä½¿ç”¨é‚»æ¥è¡¨ï¼‰ï¼Œå°†å…¥åº¦ä¸º 00 çš„ç»“ç‚¹æ”¾å…¥é˜Ÿåˆ—ã€‚

2ã€åªè¦é˜Ÿåˆ—éç©ºï¼Œå°±ä»é˜Ÿé¦–å–å‡ºå…¥åº¦ä¸º 00 çš„ç»“ç‚¹ï¼Œå°†è¿™ä¸ªç»“ç‚¹è¾“å‡ºåˆ°ç»“æœé›†ä¸­ï¼Œå¹¶ä¸”å°†è¿™ä¸ªç»“ç‚¹çš„æ‰€æœ‰é‚»æ¥ç»“ç‚¹ï¼ˆå®ƒæŒ‡å‘çš„ç»“ç‚¹ï¼‰çš„å…¥åº¦å‡ 11ï¼Œåœ¨å‡ 11 ä»¥åï¼Œå¦‚æœè¿™ä¸ªè¢«å‡ 11 çš„ç»“ç‚¹çš„å…¥åº¦ä¸º 00 ï¼Œå°±ç»§ç»­å…¥é˜Ÿã€‚

3ã€å½“é˜Ÿåˆ—ä¸ºç©ºçš„æ—¶å€™ï¼Œæ£€æŸ¥ç»“æœé›†ä¸­çš„é¡¶ç‚¹ä¸ªæ•°æ˜¯å¦å’Œè¯¾ç¨‹æ•°ç›¸ç­‰å³å¯ã€‚

ï¼ˆæ€è€ƒè¿™é‡Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨é˜Ÿåˆ—ï¼Ÿå¦‚æœä¸ç”¨é˜Ÿåˆ—ï¼Œè¿˜å¯ä»¥æ€ä¹ˆåšï¼Œä¼šæ¯”ç”¨é˜Ÿåˆ—çš„æ•ˆæœå·®è¿˜æ˜¯æ›´å¥½ï¼Ÿï¼‰

åœ¨ä»£ç å…·ä½“å®ç°çš„æ—¶å€™ï¼Œé™¤äº†ä¿å­˜å…¥åº¦ä¸º 00 çš„é˜Ÿåˆ—ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸¤ä¸ªè¾…åŠ©çš„æ•°æ®ç»“æ„ï¼š

1ã€é‚»æ¥è¡¨ï¼šé€šè¿‡ç»“ç‚¹çš„ç´¢å¼•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°è¿™ä¸ªç»“ç‚¹çš„åç»§ç»“ç‚¹ï¼›

2ã€å…¥åº¦æ•°ç»„ï¼šé€šè¿‡ç»“ç‚¹çš„ç´¢å¼•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°æŒ‡å‘è¿™ä¸ªç»“ç‚¹çš„ç»“ç‚¹ä¸ªæ•°ã€‚

è¿™ä¸ªä¸¤ä¸ªæ•°æ®ç»“æ„åœ¨éå†é¢˜ç›®ç»™å‡ºçš„é‚»è¾¹ä»¥åå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¾—åˆ°ã€‚

Python ä»£ç ï¼š

```python
class Solution(object):

    # æ€æƒ³ï¼šè¯¥æ–¹æ³•çš„æ¯ä¸€æ­¥æ€»æ˜¯è¾“å‡ºå½“å‰æ— å‰è¶‹ï¼ˆå³å…¥åº¦ä¸ºé›¶ï¼‰çš„é¡¶ç‚¹

    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        """
        :type numCourses: int è¯¾ç¨‹é—¨æ•°
        :type prerequisites: List[List[int]] è¯¾ç¨‹ä¸è¯¾ç¨‹ä¹‹é—´çš„å…³ç³»
        :rtype: bool
        """
        # è¯¾ç¨‹çš„é•¿åº¦
        clen = len(prerequisites)
        if clen == 0:
            # æ²¡æœ‰è¯¾ç¨‹ï¼Œå½“ç„¶å¯ä»¥å®Œæˆè¯¾ç¨‹çš„å­¦ä¹ 
            return True

        # æ­¥éª¤1ï¼šç»Ÿè®¡æ¯ä¸ªé¡¶ç‚¹çš„å…¥åº¦
        # å…¥åº¦æ•°ç»„ï¼Œè®°å½•äº†æŒ‡å‘å®ƒçš„ç»“ç‚¹çš„ä¸ªæ•°ï¼Œä¸€å¼€å§‹å…¨éƒ¨ä¸º 0
        in_degrees = [0 for _ in range(numCourses)]
        # é‚»æ¥è¡¨ï¼Œä½¿ç”¨æ•£åˆ—è¡¨æ˜¯ä¸ºäº†å»é‡
        adj = [set() for _ in range(numCourses)]

        # æƒ³è¦å­¦ä¹ è¯¾ç¨‹ 0 ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 1 ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¹é…æ¥è¡¨ç¤ºä»–ä»¬: [0,1]
        # [0, 1] è¡¨ç¤º 1 åœ¨å…ˆï¼Œ0 åœ¨å
        # æ³¨æ„ï¼šé‚»æ¥è¡¨å­˜æ”¾çš„æ˜¯åç»§ successor ç»“ç‚¹çš„é›†åˆ
        for second, first in prerequisites:
            in_degrees[second] += 1
            adj[first].add(second)

        # æ­¥éª¤2ï¼šæ‹“æ‰‘æ’åºå¼€å§‹ä¹‹å‰ï¼Œå…ˆæŠŠæ‰€æœ‰å…¥åº¦ä¸º 0 çš„ç»“ç‚¹åŠ å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­
        # é¦–å…ˆéå†ä¸€éï¼ŒæŠŠæ‰€æœ‰å…¥åº¦ä¸º 0 çš„ç»“ç‚¹éƒ½åŠ å…¥é˜Ÿåˆ—
        queue = []
        for i in range(numCourses):
            if in_degrees[i] == 0:
                queue.append(i)

        counter = 0
        while queue:
            top = queue.pop(0)
            counter += 1
            # æ­¥éª¤3ï¼šæŠŠè¿™ä¸ªç»“ç‚¹çš„æ‰€æœ‰åç»§ç»“ç‚¹çš„å…¥åº¦å‡å» 1ï¼Œå¦‚æœå‘ç°å…¥åº¦ä¸º 0 ï¼Œå°±é©¬ä¸Šæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­
            for successor in adj[top]:
                in_degrees[successor] -= 1
                if in_degrees[successor] == 0:
                    queue.append(successor)

        return counter == numCourses
```

Java ä»£ç ï¼š

```java
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

/**
 * è¯¥æ–¹æ³•è¿˜å­˜å‚¨äº†æ‹“æ‰‘æ’åºçš„ç»“æœï¼Œä¸ªäººè§‰å¾—è¿™ç§å†™æ³•å¾ˆå¥½ç†è§£ï¼Œæ ¹æ®è¿™ä¸ªå†™æ³•å¯ä»¥é©¬ä¸Šå†™å‡º LeetCode ç¬¬ 210 é¢˜ è¯¾ç¨‹è¡¨ II
 *
 * @author liwei
 * @date 18/6/24 ä¸‹åˆ12:20
 */
public class Solution {

    /**
     * @param numCourses
     * @param prerequisites
     * @return
     */
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        if (numCourses <= 0) {
            return false;
        }
        int plen = prerequisites.length;
        if (plen == 0) {
            return true;
        }
        int[] inDegree = new int[numCourses];
        for (int[] p : prerequisites) {
            inDegree[p[0]]++;
        }
        LinkedList<Integer> queue = new LinkedList<>();
        // é¦–å…ˆåŠ å…¥å…¥åº¦ä¸º 0 çš„ç»“ç‚¹
        for (int i = 0; i < numCourses; i++) {
            if (inDegree[i] == 0) {
                queue.addLast(i);
            }
        }
        // æ‹“æ‰‘æ’åºçš„ç»“æœ
        List<Integer> res = new ArrayList<>();
        while (!queue.isEmpty()) {
            Integer num = queue.removeFirst();
            res.add(num);
            // æŠŠé‚»è¾¹å…¨éƒ¨éå†ä¸€ä¸‹
            for (int[] p : prerequisites) {
                if (p[1] == num) {
                    inDegree[p[0]]--;
                    if (inDegree[p[0]] == 0) {
                        queue.addLast(p[0]);
                    }
                }
            }
        }
        // System.out.println("æ‹“æ‰‘æ’åºç»“æœï¼š");
        // System.out.println(res);
        return res.size() == numCourses;
    }
}
```

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ¸+ğ‘‰)O(E+V)ã€‚è¿™é‡Œ ğ¸E è¡¨ç¤ºé‚»è¾¹çš„æ¡æ•°ï¼Œğ‘‰V è¡¨ç¤ºç»“ç‚¹çš„ä¸ªæ•°ã€‚åˆå§‹åŒ–å…¥åº¦ä¸º 00 çš„é›†åˆéœ€è¦éå†æ•´å¼ å›¾ï¼Œå…·ä½“åšæ³•æ˜¯æ£€æŸ¥æ¯ä¸ªç»“ç‚¹å’Œæ¯æ¡è¾¹ï¼Œå› æ­¤å¤æ‚åº¦ä¸º ğ‘‚(ğ¸+ğ‘‰)O(E+V)ï¼Œç„¶åå¯¹è¯¥é›†åˆè¿›è¡Œæ“ä½œï¼Œåˆéœ€è¦éå†æ•´å¼ å›¾ä¸­çš„æ¯ä¸ªç»“ç‚¹å’Œæ¯æ¡è¾¹ï¼Œå¤æ‚åº¦ä¹Ÿä¸º ğ‘‚(ğ¸+ğ‘‰)O(E+V)ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘‰)O(V)ï¼šå…¥åº¦æ•°ç»„ã€é‚»æ¥è¡¨çš„é•¿åº¦éƒ½æ˜¯ç»“ç‚¹çš„ä¸ªæ•° ğ‘‰Vï¼Œå³ä½¿ä½¿ç”¨é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—æœ€é•¿çš„æ—¶å€™ä¹Ÿä¸ä¼šè¶…è¿‡ ğ‘‰Vï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦æ˜¯ ğ‘‚(ğ‘‰)O(V)ã€‚

#### æ–¹æ³•äºŒï¼šæ·±åº¦ä¼˜å…ˆéå†

è¿™é‡Œè¦ä½¿ç”¨é€†é‚»æ¥è¡¨ã€‚å…¶å®å°±æ˜¯æ£€æµ‹è¿™ä¸ªæœ‰å‘å›¾ä¸­æœ‰æ²¡æœ‰ç¯ï¼Œåªè¦å­˜åœ¨ç¯ï¼Œè¿™äº›è¯¾ç¨‹å°±ä¸èƒ½æŒ‰è¦æ±‚å­¦å®Œã€‚

å…·ä½“æ–¹æ³•æ˜¯ï¼š

ç¬¬ 1 æ­¥ï¼šæ„å»ºé€†é‚»æ¥è¡¨ï¼›

ç¬¬ 2 æ­¥ï¼šé€’å½’å¤„ç†æ¯ä¸€ä¸ªè¿˜æ²¡æœ‰è¢«è®¿é—®çš„ç»“ç‚¹ï¼Œå…·ä½“åšæ³•å¾ˆç®€å•ï¼šå¯¹äºä¸€ä¸ªç»“ç‚¹æ¥è¯´ï¼Œ**å…ˆè¾“å‡ºæŒ‡å‘å®ƒçš„æ‰€æœ‰é¡¶ç‚¹ï¼Œå†è¾“å‡ºè‡ªå·±**ã€‚

ç¬¬ 3 æ­¥ï¼šå¦‚æœè¿™ä¸ªé¡¶ç‚¹è¿˜æ²¡æœ‰è¢«éå†è¿‡ï¼Œå°±é€’å½’éå†å®ƒï¼ŒæŠŠæ‰€æœ‰æŒ‡å‘å®ƒçš„ç»“ç‚¹éƒ½è¾“å‡ºäº†ï¼Œå†è¾“å‡ºè‡ªå·±ã€‚æ³¨æ„ï¼š**å½“è®¿é—®ä¸€ä¸ªç»“ç‚¹çš„æ—¶å€™ï¼Œåº”å½“å…ˆé€’å½’è®¿é—®å®ƒçš„å‰é©±ç»“ç‚¹ï¼Œç›´è‡³å‰é©±ç»“ç‚¹æ²¡æœ‰å‰é©±ç»“ç‚¹ä¸ºæ­¢**ã€‚

Python ä»£ç ï¼š

```python
class Solution(object):

    # è¿™é‡Œä½¿ç”¨é€†é‚»æ¥è¡¨

    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        """
        :type numCourses: int è¯¾ç¨‹é—¨æ•°
        :type prerequisites: List[List[int]] è¯¾ç¨‹ä¸è¯¾ç¨‹ä¹‹é—´çš„å…³ç³»
        :rtype: bool
        """
        # è¯¾ç¨‹çš„é•¿åº¦
        clen = len(prerequisites)
        if clen == 0:
            # æ²¡æœ‰è¯¾ç¨‹ï¼Œå½“ç„¶å¯ä»¥å®Œæˆè¯¾ç¨‹çš„å­¦ä¹ 
            return True
        # æ·±åº¦ä¼˜å…ˆéå†ï¼Œåˆ¤æ–­ç»“ç‚¹æ˜¯å¦è®¿é—®è¿‡
        # è¿™é‡Œè¦è®¾ç½® 3 ä¸ªçŠ¶æ€
        # 0 å°±å¯¹åº” False ï¼Œè¡¨ç¤ºç»“ç‚¹æ²¡æœ‰è®¿é—®è¿‡
        # 1 å°±å¯¹åº” True ï¼Œè¡¨ç¤ºç»“ç‚¹å·²ç»è®¿é—®è¿‡ï¼Œåœ¨æ·±åº¦ä¼˜å…ˆéå†ç»“æŸä»¥åæ‰ç½®ä¸º 1
        # 2 è¡¨ç¤ºå½“å‰æ­£åœ¨éå†çš„ç»“ç‚¹ï¼Œå¦‚æœåœ¨æ·±åº¦ä¼˜å…ˆéå†çš„è¿‡ç¨‹ä¸­ï¼Œ
        # æœ‰é‡åˆ°çŠ¶æ€ä¸º 2 çš„ç»“ç‚¹ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªå›¾ä¸­å­˜åœ¨ç¯
        visited = [0 for _ in range(numCourses)]

        # é€†é‚»æ¥è¡¨ï¼Œå­˜çš„æ˜¯æ¯ä¸ªç»“ç‚¹çš„å‰é©±ç»“ç‚¹çš„é›†åˆ
        # æƒ³è¦å­¦ä¹ è¯¾ç¨‹ 0 ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 1 ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¹é…æ¥è¡¨ç¤ºä»–ä»¬: [0,1]
        # 1 åœ¨å‰ï¼Œ0 åœ¨å
        inverse_adj = [set() for _ in range(numCourses)]
        for second, first in prerequisites:
            inverse_adj[second].add(first)

        for i in range(numCourses):
            # åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°æœ‰ç¯ï¼Œå°±é€€å‡º
            if self.__dfs(i, inverse_adj, visited):
                return False
        return True

    def __dfs(self, vertex, inverse_adj, visited):
        """
        æ³¨æ„ï¼šè¿™ä¸ªé€’å½’æ–¹æ³•çš„è¿”å›å€¼æ˜¯è¿”å›æ˜¯å¦æœ‰ç¯
        :param vertex: ç»“ç‚¹çš„ç´¢å¼•
        :param inverse_adj: é€†é‚»æ¥è¡¨ï¼Œè®°å½•çš„æ˜¯å½“å‰ç»“ç‚¹çš„å‰é©±ç»“ç‚¹çš„é›†åˆ
        :param visited: è®°å½•äº†ç»“ç‚¹æ˜¯å¦è¢«è®¿é—®è¿‡ï¼Œ2 è¡¨ç¤ºå½“å‰æ­£åœ¨ DFS è¿™ä¸ªç»“ç‚¹
        :return: æ˜¯å¦æœ‰ç¯ï¼Œè¿”å› True è¡¨ç¤ºè¿™ä¸ªæœ‰å‘å›¾æœ‰ç¯
        """
        # 2 è¡¨ç¤ºè¿™ä¸ªç»“ç‚¹æ­£åœ¨è®¿é—®
        if visited[vertex] == 2:
            # è¡¨ç¤ºé‡åˆ°ç¯
            return True
        if visited[vertex] == 1:
            return False

        visited[vertex] = 2
        for precursor in inverse_adj[vertex]:
            # å¦‚æœæœ‰ç¯ï¼Œå°±è¿”å› True è¡¨ç¤ºæœ‰ç¯
            if self.__dfs(precursor, inverse_adj, visited):
                return True

        # 1 è¡¨ç¤ºè®¿é—®ç»“æŸ
        # å…ˆæŠŠ vertex è¿™ä¸ªç»“ç‚¹çš„æ‰€æœ‰å‰é©±ç»“ç‚¹éƒ½è¾“å‡ºä¹‹åï¼Œå†è¾“å‡ºè‡ªå·±
        visited[vertex] = 1
        return False
```

Java ä»£ç ï¼š

```java
import java.util.HashSet;

/**
 * æ ¹æ® Solution5 åšçš„ä¿®æ”¹
 *
 * @author liwei
 * @date 18/6/24 ä¸‹åˆ12:42
 */
public class Solution6 {

    /**
     * @param numCourses
     * @param prerequisites
     * @return
     */
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        if (numCourses <= 0) {
            return false;
        }
        int plen = prerequisites.length;
        if (plen == 0) {
            return true;
        }
        int[] marked = new int[numCourses];

        // åˆå§‹åŒ–æœ‰å‘å›¾ begin
        HashSet<Integer>[] graph = new HashSet[numCourses];
        for (int i = 0; i < numCourses; i++) {
            graph[i] = new HashSet<>();
        }
        // åˆå§‹åŒ–æœ‰å‘å›¾ end
        // æœ‰å‘å›¾çš„ key æ˜¯å‰é©±ç»“ç‚¹ï¼Œvalue æ˜¯åç»§ç»“ç‚¹çš„é›†åˆ
        for (int[] p : prerequisites) {
            graph[p[1]].add(p[0]);
        }

        for (int i = 0; i < numCourses; i++) {
            if (dfs(i, graph, marked)) {
                // æ³¨æ„æ–¹æ³•çš„è¯­ä¹‰ï¼Œå¦‚æœå›¾ä¸­å­˜åœ¨ç¯ï¼Œè¡¨ç¤ºè¯¾ç¨‹ä»»åŠ¡ä¸èƒ½å®Œæˆï¼Œåº”è¯¥è¿”å› false
                return false;
            }
        }
        // åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ç›´ dfs éƒ½æ²¡æœ‰é‡åˆ°å·²ç»é‡å¤è®¿é—®çš„ç»“ç‚¹ï¼Œå°±è¡¨ç¤ºæœ‰å‘å›¾ä¸­æ²¡æœ‰ç¯
        // æ‰€æœ‰è¯¾ç¨‹ä»»åŠ¡å¯ä»¥å®Œæˆï¼Œåº”è¯¥è¿”å› true
        return true;
    }

    /**
     * æ³¨æ„è¿™ä¸ª dfs æ–¹æ³•çš„è¯­ä¹‰
     * @param i      å½“å‰è®¿é—®çš„è¯¾ç¨‹ç»“ç‚¹
     * @param graph
     * @param marked å¦‚æœ == 1 è¡¨ç¤ºæ­£åœ¨è®¿é—®ä¸­ï¼Œå¦‚æœ == 2 è¡¨ç¤ºå·²ç»è®¿é—®å®Œäº†
     * @return true è¡¨ç¤ºå›¾ä¸­å­˜åœ¨ç¯ï¼Œfalse è¡¨ç¤ºè®¿é—®è¿‡äº†ï¼Œä¸ç”¨å†è®¿é—®äº†
     */
    private boolean dfs(int i,
                        HashSet<Integer>[] graph,
                        int[] marked) {
        // å¦‚æœè®¿é—®è¿‡äº†ï¼Œå°±ä¸ç”¨å†è®¿é—®äº†
        if (marked[i] == 1) {
            // ä»æ­£åœ¨è®¿é—®ä¸­ï¼Œåˆ°æ­£åœ¨è®¿é—®ä¸­ï¼Œè¡¨ç¤ºé‡åˆ°äº†ç¯
            return true;
        }

        if (marked[i] == 2) {
            // è¡¨ç¤ºåœ¨è®¿é—®çš„è¿‡ç¨‹ä¸­æ²¡æœ‰é‡åˆ°ç¯ï¼Œè¿™ä¸ªèŠ‚ç‚¹è®¿é—®è¿‡äº†
            return false;
        }
        // èµ°åˆ°è¿™é‡Œï¼Œæ˜¯å› ä¸ºåˆå§‹åŒ–å‘¢ï¼Œæ­¤æ—¶ marked[i] == 0
        // è¡¨ç¤ºæ­£åœ¨è®¿é—®ä¸­
        marked[i] = 1;
        // åç»§ç»“ç‚¹çš„é›†åˆ
        HashSet<Integer> successorNodes = graph[i];

        for (Integer successor : successorNodes) {
            if (dfs(successor, graph, marked)) {
                // å±‚å±‚é€’å½’è¿”å› true ï¼Œè¡¨ç¤ºå›¾ä¸­å­˜åœ¨ç¯
                return true;
            }
        }
        // i çš„æ‰€æœ‰åç»§ç»“ç‚¹éƒ½è®¿é—®å®Œäº†ï¼Œéƒ½æ²¡æœ‰å­˜åœ¨ç¯ï¼Œåˆ™è¿™ä¸ªç»“ç‚¹å°±å¯ä»¥è¢«æ ‡è®°ä¸ºå·²ç»è®¿é—®ç»“æŸ
        // çŠ¶æ€è®¾ç½®ä¸º 2
        marked[i] = 2;
        // false è¡¨ç¤ºå›¾ä¸­ä¸å­˜åœ¨ç¯
        return false;
    }
}
```

å¤æ‚åº¦åˆ†æï¼š

- æ—¶é—´å¤æ‚åº¦ï¼šğ‘‚(ğ¸+ğ‘‰)O(E+V)ï¼›
- ç©ºé—´å¤æ‚åº¦ï¼šğ‘‚(ğ‘‰)O(V)ã€‚

è¿™ä¸¤ç§æ€è·¯éƒ½å¯ä»¥å®Œæˆ LeetCode ç¬¬ 210 é¢˜ã€‚ï¼ˆæœ¬èŠ‚å®Œï¼‰